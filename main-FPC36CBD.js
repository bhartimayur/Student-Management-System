import{a as M,b as de,c as aE,d as Ff,e as y,f as uE,g as pc,h as cE,i as lE,j as dE,k as Vf,l as hE,m as gc,n as fE,o as mc,p as pE,q as gE,r as De,s as Jr,t as pn,u as yc,v as zo,w as mE,x as yE,y as ur,z as _t}from"./chunk-KZ55BCB2.js";var vE=null;var Lf=1;function Tt(t){let e=vE;return vE=t,e}var _E={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ER(t){if(!(Uf(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Lf)){if(!t.producerMustRecompute(t)&&!jf(t)){t.dirty=!1,t.lastCleanEpoch=Lf;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Lf}}function wE(t){return t&&(t.nextProducerIndex=0),Tt(t)}function EE(t,e){if(Tt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Uf(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Bf(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function jf(t){vc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(ER(n),r!==n.version))return!0}return!1}function IE(t){if(vc(t),Uf(t))for(let e=0;e<t.producerNode.length;e++)Bf(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Bf(t,e){if(IR(t),vc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Bf(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];vc(i),i.producerIndexOfThis[r]=e}}function Uf(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function vc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function IR(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function DR(){throw new Error}var CR=DR;function DE(t){CR=t}function q(t){return typeof t=="function"}function Ji(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var _c=Ji(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ei(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(s){e=s instanceof _c?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{CE(s)}catch(o){e=e??[],o instanceof _c?e=[...e,...o.errors]:e.push(o)}}if(e)throw new _c(e)}}add(e){var n;if(e&&e!==this)if(this.closed)CE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ei(n,e)}remove(e){let{_finalizers:n}=this;n&&ei(n,e),e instanceof t&&e._removeParent(this)}};xe.EMPTY=(()=>{let t=new xe;return t.closed=!0,t})();var $f=xe.EMPTY;function wc(t){return t instanceof xe||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function CE(t){q(t)?t():t.unsubscribe()}var Xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var es={setTimeout(t,e,...n){let{delegate:r}=es;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=es;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ec(t){es.setTimeout(()=>{let{onUnhandledError:e}=Xt;if(e)e(t);else throw t})}function Go(){}var TE=(()=>Hf("C",void 0,void 0))();function bE(t){return Hf("E",void 0,t)}function AE(t){return Hf("N",t,void 0)}function Hf(t,e,n){return{kind:t,value:e,error:n}}var ti=null;function ts(t){if(Xt.useDeprecatedSynchronousErrorHandling){let e=!ti;if(e&&(ti={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ti;if(ti=null,n)throw r}}else t()}function SE(t){Xt.useDeprecatedSynchronousErrorHandling&&ti&&(ti.errorThrown=!0,ti.error=t)}var ni=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wc(e)&&e.add(this)):this.destination=AR}static create(e,n,r){return new jn(e,n,r)}next(e){this.isStopped?zf(AE(e),this):this._next(e)}error(e){this.isStopped?zf(bE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zf(TE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},TR=Function.prototype.bind;function qf(t,e){return TR.call(t,e)}var Gf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ic(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ic(r)}else Ic(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ic(n)}}},jn=class extends ni{constructor(e,n,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Xt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qf(e.next,s),error:e.error&&qf(e.error,s),complete:e.complete&&qf(e.complete,s)}):i=e}this.destination=new Gf(i)}};function Ic(t){Xt.useDeprecatedSynchronousErrorHandling?SE(t):Ec(t)}function bR(t){throw t}function zf(t,e){let{onStoppedNotification:n}=Xt;n&&es.setTimeout(()=>n(t,e))}var AR={closed:!0,next:Go,error:bR,complete:Go};var ns=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function ct(t){return t}function Wf(...t){return Kf(t)}function Kf(t){return t.length===0?ct:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=MR(n)?n:new jn(n,r,i);return ts(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ME(r),new r((i,s)=>{let o=new jn({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ns](){return this}pipe(...n){return Kf(n)(this)}toPromise(n){return n=ME(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function ME(t){var e;return(e=t??Xt.Promise)!==null&&e!==void 0?e:Promise}function SR(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}function MR(t){return t&&t instanceof ni||SR(t)&&wc(t)}function Qf(t){return q(t?.lift)}function Z(t){return e=>{if(Qf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(t,e,n,r,i){return new Yf(t,e,n,r,i)}var Yf=class extends ni{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function rs(){return Z((t,e)=>{let n=null;t._refCount++;let r=X(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var is=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Qf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xe;let n=this.getSubject();e.add(this.source.subscribe(X(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xe.EMPTY)}return e}refCount(){return rs()(this)}};var xE=Ji(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ge=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Dc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new xE}next(n){ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?$f:(this.currentObservers=null,s.push(n),new xe(()=>{this.currentObservers=null,ei(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new Dc(e,n),t})(),Dc=class extends Ge{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:$f}};var tt=class extends Ge{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Wo={now(){return(Wo.delegate||Date).now()},delegate:void 0};var Cc=class extends Ge{constructor(e=1/0,n=1/0,r=Wo){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}};var Tc=class extends xe{constructor(e,n){super()}schedule(e,n=0){return this}};var Ko={setInterval(t,e,...n){let{delegate:r}=Ko;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ko;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ss=class extends Tc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Ko.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ko.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ei(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var os=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};os.now=Wo.now;var as=class extends os{constructor(e,n=os.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Qo=new as(ss);var bc=class extends ss{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ac=class extends as{};var Zf=new Ac(bc);var wt=new J(t=>t.complete());function RE(t){return t&&q(t.schedule)}function Xf(t){return t[t.length-1]}function Sc(t){return q(Xf(t))?t.pop():void 0}function gn(t){return RE(Xf(t))?t.pop():void 0}function NE(t,e){return typeof Xf(t)=="number"?t.pop():e}var Mc=t=>t&&typeof t.length=="number"&&typeof t!="function";function xc(t){return q(t?.then)}function Rc(t){return q(t[ns])}function Nc(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function Pc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function xR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Oc=xR();function kc(t){return q(t?.[Oc])}function Fc(t){return cE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield pc(n.read());if(i)return yield pc(void 0);yield yield pc(r)}}finally{n.releaseLock()}})}function Vc(t){return q(t?.getReader)}function ye(t){if(t instanceof J)return t;if(t!=null){if(Rc(t))return RR(t);if(Mc(t))return NR(t);if(xc(t))return PR(t);if(Nc(t))return PE(t);if(kc(t))return OR(t);if(Vc(t))return kR(t)}throw Pc(t)}function RR(t){return new J(e=>{let n=t[ns]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function NR(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function PR(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ec)})}function OR(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function PE(t){return new J(e=>{FR(t,e).catch(n=>e.error(n))})}function kR(t){return PE(Fc(t))}function FR(t,e){var n,r,i,s;return uE(this,void 0,void 0,function*(){try{for(n=lE(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Et(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Bt(t,e=0){return Z((n,r)=>{n.subscribe(X(r,i=>Et(r,t,()=>r.next(i),e),()=>Et(r,t,()=>r.complete(),e),i=>Et(r,t,()=>r.error(i),e)))})}function Jt(t,e=0){return Z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function OE(t,e){return ye(t).pipe(Jt(e),Bt(e))}function kE(t,e){return ye(t).pipe(Jt(e),Bt(e))}function FE(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function VE(t,e){return new J(n=>{let r;return Et(n,e,()=>{r=t[Oc](),Et(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function Lc(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{Et(n,e,()=>{let r=t[Symbol.asyncIterator]();Et(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function LE(t,e){return Lc(Fc(t),e)}function jE(t,e){if(t!=null){if(Rc(t))return OE(t,e);if(Mc(t))return FE(t,e);if(xc(t))return kE(t,e);if(Nc(t))return Lc(t,e);if(kc(t))return VE(t,e);if(Vc(t))return LE(t,e)}throw Pc(t)}function oe(t,e){return e?jE(t,e):ye(t)}function F(...t){let e=gn(t);return oe(t,e)}function us(t,e){let n=q(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function Jf(t){return!!t&&(t instanceof J||q(t.lift)&&q(t.subscribe))}var Bn=Ji(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function B(t,e){return Z((n,r)=>{let i=0;n.subscribe(X(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:VR}=Array;function LR(t,e){return VR(e)?t(...e):t(e)}function jc(t){return B(e=>LR(t,e))}var{isArray:jR}=Array,{getPrototypeOf:BR,prototype:UR,keys:$R}=Object;function Bc(t){if(t.length===1){let e=t[0];if(jR(e))return{args:e,keys:null};if(HR(e)){let n=$R(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function HR(t){return t&&typeof t=="object"&&BR(t)===UR}function Uc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Yo(...t){let e=gn(t),n=Sc(t),{args:r,keys:i}=Bc(t);if(r.length===0)return oe([],e);let s=new J(qR(r,e,i?o=>Uc(i,o):ct));return n?s.pipe(jc(n)):s}function qR(t,e,n=ct){return r=>{BE(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)BE(e,()=>{let c=oe(t[u],e),l=!1;c.subscribe(X(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function BE(t,e,n){t?Et(n,t,e):e()}function UE(t,e,n,r,i,s,o,a){let u=[],c=0,l=0,d=!1,h=()=>{d&&!u.length&&!c&&e.complete()},f=v=>c<r?m(v):u.push(v),m=v=>{s&&e.next(v),c++;let _=!1;ye(n(v,l++)).subscribe(X(e,D=>{i?.(D),s?f(D):e.next(D)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;u.length&&c<r;){let D=u.shift();o?Et(e,o,()=>m(D)):m(D)}h()}catch(D){e.error(D)}}))};return t.subscribe(X(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Le(t,e,n=1/0){return q(e)?Le((r,i)=>B((s,o)=>e(r,s,i,o))(ye(t(r,i))),n):(typeof e=="number"&&(n=e),Z((r,i)=>UE(r,i,t,n)))}function cr(t=1/0){return Le(ct,t)}function $E(){return cr(1)}function cs(...t){return $E()(oe(t,gn(t)))}function $c(t){return new J(e=>{ye(t()).subscribe(e)})}function ep(...t){let e=Sc(t),{args:n,keys:r}=Bc(t),i=new J(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,c=o;for(let l=0;l<o;l++){let d=!1;ye(n[l]).subscribe(X(s,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||s.next(r?Uc(r,a):a),s.complete())}))}});return e?i.pipe(jc(e)):i}function tp(...t){let e=gn(t),n=NE(t,1/0),r=t;return r.length?r.length===1?ye(r[0]):cr(n)(oe(r,e)):wt}function Ke(t,e){return Z((n,r)=>{let i=0;n.subscribe(X(r,s=>t.call(e,s,i++)&&r.next(s)))})}function lr(t){return Z((e,n)=>{let r=null,i=!1,s;r=e.subscribe(X(n,void 0,void 0,o=>{s=ye(t(o,lr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function HE(t,e,n,r,i){return(s,o)=>{let a=n,u=e,c=0;s.subscribe(X(o,l=>{let d=c++;u=a?t(u,l,d):(a=!0,l),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function dr(t,e){return q(e)?Le(t,e,1):Le(t,1)}function hr(t){return Z((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Un(t){return t<=0?()=>wt:Z((e,n)=>{let r=0;e.subscribe(X(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function np(t){return B(()=>t)}function rp(t,e=ct){return t=t??zR,Z((n,r)=>{let i,s=!0;n.subscribe(X(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function zR(t,e){return t===e}function Hc(t=GR){return Z((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function GR(){return new Bn}function ls(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function bt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ke((i,s)=>t(i,s,r)):ct,Un(1),n?hr(e):Hc(()=>new Bn))}function ds(t){return t<=0?()=>wt:Z((e,n)=>{let r=[];e.subscribe(X(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function ip(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ke((i,s)=>t(i,s,r)):ct,ds(1),n?hr(e):Hc(()=>new Bn))}function Zo(){return Z((t,e)=>{let n,r=!1;t.subscribe(X(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function ri(t,e){return Z(HE(t,e,arguments.length>=2,!0))}function qE(t={}){let{connector:e=()=>new Ge,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},m=()=>{let v=o;f(),v?.unsubscribe()};return Z((v,_)=>{c++,!d&&!l&&h();let D=u=u??e();_.add(()=>{c--,c===0&&!d&&!l&&(a=sp(m,i))}),D.subscribe(_),!o&&c>0&&(o=new jn({next:N=>D.next(N),error:N=>{d=!0,h(),a=sp(f,n,N),D.error(N)},complete:()=>{l=!0,h(),a=sp(f,r),D.complete()}}),ye(v).subscribe(o))})(s)}}function sp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new jn({next:()=>{r.unsubscribe(),t()}});return ye(e(...n)).subscribe(r)}function qc(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,qE({connector:()=>new Cc(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ii(...t){let e=gn(t);return Z((n,r)=>{(e?cs(t,n,e):cs(t,n)).subscribe(r)})}function Ce(t,e){return Z((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(X(r,u=>{i?.unsubscribe();let c=0,l=s++;ye(t(u,l)).subscribe(i=X(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function zc(t,e){return q(e)?Ce(()=>t,e):Ce(()=>t)}function op(t){return Z((e,n)=>{ye(t).subscribe(X(n,()=>n.complete(),Go)),!n.closed&&e.subscribe(n)})}function be(t,e,n){let r=q(t)||e||n?{next:t,error:e,complete:n}:t;return r?Z((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(X(s,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),s.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ct}function pe(t){for(let e in t)if(t[e]===pe)return e;throw Error("Could not find renamed property on target object.")}function Gc(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function dt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(dt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function zE(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var WR=pe({__forward_ref__:pe});function bs(t){return t.__forward_ref__=bs,t.toString=function(){return dt(this())},t}function lt(t){return xI(t)?t():t}function xI(t){return typeof t=="function"&&t.hasOwnProperty(WR)&&t.__forward_ref__===bs}function RI(t){return t&&!!t.\u0275providers}var KR="https://g.co/ng/security#xss",O=class extends Error{constructor(e,n){super(Al(e,n)),this.code=e}};function Al(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var QR=pe({\u0275cmp:pe}),YR=pe({\u0275dir:pe}),ZR=pe({\u0275pipe:pe}),XR=pe({\u0275mod:pe}),il=pe({\u0275fac:pe}),Jo=pe({__NG_ELEMENT_ID__:pe}),GE=pe({__NG_ENV_ID__:pe});function NI(t){return typeof t=="string"?t:t==null?"":String(t)}function JR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():NI(t)}function eN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new O(-200,`Circular dependency in DI detected for ${t}${n}`)}function fg(t,e){let n=e?` in ${e}`:"";throw new O(-201,!1)}function tN(t,e){t==null&&nN(e,t,null,"!=")}function nN(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function P(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Pe(t){return{providers:t.providers||[],imports:t.imports||[]}}function Sl(t){return WE(t,OI)||WE(t,kI)}function PI(t){return Sl(t)!==null}function WE(t,e){return t.hasOwnProperty(e)?t[e]:null}function rN(t){let e=t&&(t[OI]||t[kI]);return e||null}function KE(t){return t&&(t.hasOwnProperty(QE)||t.hasOwnProperty(iN))?t[QE]:null}var OI=pe({\u0275prov:pe}),QE=pe({\u0275inj:pe}),kI=pe({ngInjectableDef:pe}),iN=pe({ngInjectorDef:pe}),ee=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ee||{}),Dp;function FI(){return Dp}function Ut(t){let e=Dp;return Dp=t,e}function VI(t,e,n){let r=Sl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ee.Optional)return null;if(e!==void 0)return e;fg(dt(t),"Injector")}var St=globalThis;var x=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var sN={},ta=sN,Cp="__NG_DI_FLAG__",sl="ngTempTokenPath",oN="ngTokenPath",aN=/\n/gm,uN="\u0275",YE="__source",ms;function cN(){return ms}function fr(t){let e=ms;return ms=t,e}function lN(t,e=ee.Default){if(ms===void 0)throw new O(-203,!1);return ms===null?VI(t,void 0,e):ms.get(t,e&ee.Optional?null:void 0,e)}function I(t,e=ee.Default){return(FI()||lN)(lt(t),e)}function C(t,e=ee.Default){return I(t,Ml(e))}function Ml(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Tp(t){let e=[];for(let n=0;n<t.length;n++){let r=lt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new O(900,!1);let i,s=ee.Default;for(let o=0;o<r.length;o++){let a=r[o],u=dN(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(I(i,s))}else e.push(I(r))}return e}function LI(t,e){return t[Cp]=e,t.prototype[Cp]=e,t}function dN(t){return t[Cp]}function hN(t,e,n,r){let i=t[sl];throw e[YE]&&i.unshift(e[YE]),t.message=fN(`
`+t.message,i,n,r),t[oN]=i,t[sl]=null,t}function fN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==uN?t.slice(2):t;let i=dt(e);if(Array.isArray(e))i=e.map(dt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):dt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(aN,`
  `)}`}function ha(t){return{toString:t}.toString()}var jI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(jI||{}),_n=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(_n||{}),vs={},At=[];function BI(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function bp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];gN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function pN(t){return t===3||t===4||t===6}function gN(t){return t.charCodeAt(0)===64}function na(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ZE(t,n,i,null,e[++r]):ZE(t,n,i,null,null))}}return t}function ZE(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var UI="ng-template";function mN(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if(typeof s=="string"&&i){let o=t[r++];if(n&&s==="class"&&BI(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;r<t.length&&typeof(s=t[r++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(i=!1)}return!1}function $I(t){return t.type===4&&t.value!==UI}function yN(t,e,n){let r=t.type===4&&!n?UI:t.value;return e===r}function vN(t,e,n){let r=4,i=t.attrs||[],s=EN(i),o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!en(r)&&!en(u))return!1;if(o&&en(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!yN(t,u,n)||u===""&&e.length===1){if(en(r))return!1;o=!0}}else{let c=r&8?u:e[++a];if(r&8&&t.attrs!==null){if(!mN(t.attrs,c,n)){if(en(r))return!1;o=!0}continue}let l=r&8?"class":u,d=_N(l,i,$I(t),n);if(d===-1){if(en(r))return!1;o=!0;continue}if(c!==""){let h;d>s?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&BI(f,c,0)!==-1||r&2&&c!==h){if(en(r))return!1;o=!0}}}}return en(r)||o}function en(t){return(t&1)===0}function _N(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return IN(e,t)}function wN(t,e,n=!1){for(let r=0;r<e.length;r++)if(vN(t,e[r],n))return!0;return!1}function EN(t){for(let e=0;e<t.length;e++){let n=t[e];if(pN(n))return e}return t.length}function IN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function XE(t,e){return t?":not("+e.trim()+")":e}function DN(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!en(o)&&(e+=XE(s,i),i=""),r=o,s=s||!en(r);n++}return i!==""&&(e+=XE(s,i)),e}function CN(t){return t.map(DN).join(",")}function TN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!en(i))break;i=s}r++}return{attrs:e,classes:n}}function It(t){return ha(()=>{let e=WI(t),n=de(M({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===jI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||_n.Emulated,styles:t.styles||At,_:null,schemas:t.schemas||null,tView:null,id:""});KI(n);let r=t.dependencies;return n.directiveDefs=eI(r,!1),n.pipeDefs=eI(r,!0),n.id=SN(n),n})}function bN(t){return gr(t)||HI(t)}function AN(t){return t!==null}function Oe(t){return ha(()=>({type:t.type,bootstrap:t.bootstrap||At,declarations:t.declarations||At,imports:t.imports||At,exports:t.exports||At,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function JE(t,e){if(t==null)return vs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Pt(t){return ha(()=>{let e=WI(t);return KI(e),e})}function gr(t){return t[QR]||null}function HI(t){return t[YR]||null}function qI(t){return t[ZR]||null}function zI(t){let e=gr(t)||HI(t)||qI(t);return e!==null?e.standalone:!1}function GI(t,e){let n=t[XR]||null;if(!n&&e===!0)throw new Error(`Type ${dt(t)} does not have '\u0275mod' property.`);return n}function WI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||vs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||At,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:JE(t.inputs,e),outputs:JE(t.outputs),debugInfo:null}}function KI(t){t.features?.forEach(e=>e(t))}function eI(t,e){if(!t)return null;let n=e?qI:bN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(AN)}function SN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var xt=0,te=1,H=2,Be=3,tn=4,sn=5,$n=6,ra=7,nn=8,_s=9,mr=10,Re=11,ia=12,tI=13,As=14,$t=15,xl=16,hs=17,sa=18,Rl=19,QI=20,pr=21,ap=22,oi=23,Rt=25,YI=1,oa=6,Hn=7,ol=8,al=9,Mt=10,ws=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(ws||{});function vn(t){return Array.isArray(t)&&typeof t[YI]=="object"}function Ht(t){return Array.isArray(t)&&t[YI]===!0}function ZI(t){return(t.flags&4)!==0}function fa(t){return t.componentOffset>-1}function pg(t){return(t.flags&1)===1}function yr(t){return!!t.template}function XI(t){return(t[H]&512)!==0}function Es(t,e){let n=t.hasOwnProperty(il);return n?t[il]:null}var Ap=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ss(){return JI}function JI(t){return t.type.prototype.ngOnChanges&&(t.setInput=xN),MN}Ss.ngInherit=!0;function MN(){let t=tD(this),e=t?.current;if(e){let n=t.previous;if(n===vs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function xN(t,e,n,r){let i=this.declaredInputs[n],s=tD(t)||RN(t,{previous:vs,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new Ap(u&&u.currentValue,e,a===vs),t[r]=e}var eD="__ngSimpleChanges__";function tD(t){return t[eD]||null}function RN(t,e){return t[eD]=e}var nI=null;var mn=function(t,e,n){nI?.(t,e,n)},NN="svg",PN="math",ON=!1;function kN(){return ON}function rn(t){for(;Array.isArray(t);)t=t[xt];return t}function nD(t,e){return rn(e[t])}function qt(t,e){return rn(e[t.index])}function rD(t,e){return t.data[e]}function _r(t,e){let n=e[t];return vn(n)?n:n[xt]}function gg(t){return(t[H]&128)===128}function FN(t){return Ht(t[Be])}function ul(t,e){return e==null?null:t[e]}function iD(t){t[hs]=0}function VN(t){t[H]&1024||(t[H]|=1024,gg(t)&&aa(t))}function LN(t,e){for(;t>0;)e=e[As],t--;return e}function sD(t){return t[H]&9216||t[oi]?.dirty}function Sp(t){sD(t)?aa(t):t[H]&64&&(kN()?(t[H]|=1024,aa(t)):t[mr].changeDetectionScheduler?.notify())}function aa(t){t[mr].changeDetectionScheduler?.notify();let e=t[Be];for(;e!==null&&!(Ht(e)&&e[H]&ws.HasChildViewsToRefresh||vn(e)&&e[H]&8192);){if(Ht(e))e[H]|=ws.HasChildViewsToRefresh;else if(e[H]|=8192,!gg(e))break;e=e[Be]}}function oD(t,e){if((t[H]&256)===256)throw new O(911,!1);t[pr]===null&&(t[pr]=[]),t[pr].push(e)}function jN(t,e){if(t[pr]===null)return;let n=t[pr].indexOf(e);n!==-1&&t[pr].splice(n,1)}var ne={lFrame:mD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function BN(){return ne.lFrame.elementDepthCount}function UN(){ne.lFrame.elementDepthCount++}function $N(){ne.lFrame.elementDepthCount--}function aD(){return ne.bindingsEnabled}function pa(){return ne.skipHydrationRootTNode!==null}function HN(t){return ne.skipHydrationRootTNode===t}function qN(t){ne.skipHydrationRootTNode=t}function zN(){ne.skipHydrationRootTNode=null}function Ne(){return ne.lFrame.lView}function En(){return ne.lFrame.tView}function uD(t){return ne.lFrame.contextLView=t,t[nn]}function cD(t){return ne.lFrame.contextLView=null,t}function zt(){let t=lD();for(;t!==null&&t.type===64;)t=t.parent;return t}function lD(){return ne.lFrame.currentTNode}function GN(){let t=ne.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ga(t,e){let n=ne.lFrame;n.currentTNode=t,n.isParent=e}function dD(){return ne.lFrame.isParent}function WN(){ne.lFrame.isParent=!1}function KN(t){return ne.lFrame.bindingIndex=t}function hD(){return ne.lFrame.bindingIndex++}function QN(t){let e=ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function YN(){return ne.lFrame.inI18n}function ZN(t,e){let n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,Mp(e)}function XN(){return ne.lFrame.currentDirectiveIndex}function Mp(t){ne.lFrame.currentDirectiveIndex=t}function JN(t){let e=ne.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function fD(t){ne.lFrame.currentQueryIndex=t}function eP(t){let e=t[te];return e.type===2?e.declTNode:e.type===1?t[sn]:null}function pD(t,e,n){if(n&ee.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ee.Host);)if(i=eP(s),i===null||(s=s[As],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ne.lFrame=gD();return r.currentTNode=e,r.lView=t,!0}function mg(t){let e=gD(),n=t[te];ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function gD(){let t=ne.lFrame,e=t===null?null:t.child;return e===null?mD(t):e}function mD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function yD(){let t=ne.lFrame;return ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var vD=yD;function yg(){let t=yD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function tP(t){return(ne.lFrame.contextLView=LN(t,ne.lFrame.contextLView))[nn]}function Ms(){return ne.lFrame.selectedIndex}function ai(t){ne.lFrame.selectedIndex=t}function nP(){let t=ne.lFrame;return rD(t.tView,t.selectedIndex)}function _D(){return ne.lFrame.currentNamespace}var wD=!0;function vg(){return wD}function wr(t){wD=t}function rP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=JI(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function _g(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Jc(t,e,n){ED(t,e,3,n)}function el(t,e,n,r){(t[H]&3)===n&&ED(t,e,n,r)}function up(t,e){let n=t[H];(n&3)===e&&(n&=16383,n+=1,t[H]=n)}function ED(t,e,n,r){let i=r!==void 0?t[hs]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[hs]+=65536),(a<s||s==-1)&&(iP(t,n,e,u),t[hs]=(t[hs]&4294901760)+u+2),u++}function rI(t,e){mn(4,t,e);let n=Tt(null);try{e.call(t)}finally{Tt(n),mn(5,t,e)}}function iP(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[H]>>14<t[hs]>>16&&(t[H]&3)===e&&(t[H]+=16384,rI(a,s)):rI(a,s)}var ys=-1,ui=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function sP(t){return t instanceof ui}function oP(t){return(t.flags&8)!==0}function aP(t){return(t.flags&16)!==0}function ID(t){return t!==ys}function cl(t){let e=t&32767;return t&32767}function uP(t){return t>>16}function ll(t,e){let n=uP(t),r=e;for(;n>0;)r=r[As],n--;return r}var xp=!0;function iI(t){let e=xp;return xp=t,e}var cP=256,DD=cP-1,CD=5,lP=0,yn={};function dP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Jo)&&(r=n[Jo]),r==null&&(r=n[Jo]=lP++);let i=r&DD,s=1<<i;e.data[t+(i>>CD)]|=s}function dl(t,e){let n=TD(t,e);if(n!==-1)return n;let r=e[te];r.firstCreatePass&&(t.injectorIndex=e.length,cp(r.data,t),cp(e,null),cp(r.blueprint,null));let i=wg(t,e),s=t.injectorIndex;if(ID(i)){let o=cl(i),a=ll(i,e),u=a[te].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function cp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function TD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function wg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=xD(i),r===null)return ys;if(n++,i=i[As],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ys}function Rp(t,e,n){dP(t,e,n)}function bD(t,e,n){if(n&ee.Optional||t!==void 0)return t;fg(e,"NodeInjector")}function AD(t,e,n,r){if(n&ee.Optional&&r===void 0&&(r=null),!(n&(ee.Self|ee.Host))){let i=t[_s],s=Ut(void 0);try{return i?i.get(e,r,n&ee.Optional):VI(e,r,n&ee.Optional)}finally{Ut(s)}}return bD(r,e,n)}function SD(t,e,n,r=ee.Default,i){if(t!==null){if(e[H]&2048&&!(r&ee.Self)){let o=mP(t,e,n,r,yn);if(o!==yn)return o}let s=MD(t,e,n,r,yn);if(s!==yn)return s}return AD(e,n,r,i)}function MD(t,e,n,r,i){let s=pP(n);if(typeof s=="function"){if(!pD(e,t,r))return r&ee.Host?bD(i,n,r):AD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ee.Optional))fg(n);else return o}finally{vD()}}else if(typeof s=="number"){let o=null,a=TD(t,e),u=ys,c=r&ee.Host?e[$t][sn]:null;for((a===-1||r&ee.SkipSelf)&&(u=a===-1?wg(t,e):e[a+8],u===ys||!oI(r,!1)?a=-1:(o=e[te],a=cl(u),e=ll(u,e)));a!==-1;){let l=e[te];if(sI(s,a,l.data)){let d=hP(a,e,n,o,r,c);if(d!==yn)return d}u=e[a+8],u!==ys&&oI(r,e[te].data[a+8]===c)&&sI(s,a,e)?(o=l,a=cl(u),e=ll(u,e)):a=-1}}return i}function hP(t,e,n,r,i,s){let o=e[te],a=o.data[t+8],u=r==null?fa(a)&&xp:r!=o&&(a.type&3)!==0,c=i&ee.Host&&s===a,l=fP(a,o,n,u,c);return l!==null?Is(e,o,l,a):yn}function fP(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,c=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:c;for(let f=d;f<h;f++){let m=o[f];if(f<u&&n===m||f>=u&&m.type===n)return f}if(i){let f=o[u];if(f&&yr(f)&&f.type===n)return u}return null}function Is(t,e,n,r){let i=t[n],s=e.data;if(sP(i)){let o=i;o.resolving&&eN(JR(s[n]));let a=iI(o.canSeeViewProviders);o.resolving=!0;let u,c=o.injectImpl?Ut(o.injectImpl):null,l=pD(t,r,ee.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&rP(n,s[n],e)}finally{c!==null&&Ut(c),iI(a),o.resolving=!1,vD()}}return i}function pP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Jo)?t[Jo]:void 0;return typeof e=="number"?e>=0?e&DD:gP:e}function sI(t,e,n){let r=1<<t;return!!(n[e+(t>>CD)]&r)}function oI(t,e){return!(t&ee.Self)&&!(t&ee.Host&&e)}var si=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return SD(this._tNode,this._lView,e,Ml(r),n)}};function gP(){return new si(zt(),Ne())}function ma(t){return ha(()=>{let e=t.prototype.constructor,n=e[il]||Np(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[il]||Np(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Np(t){return xI(t)?()=>{let e=Np(lt(t));return e&&e()}:Es(t)}function mP(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[H]&2048&&!(o[H]&512);){let a=MD(s,o,n,r|ee.Self,yn);if(a!==yn)return a;let u=s.parent;if(!u){let c=o[QI];if(c){let l=c.get(n,yn,r);if(l!==yn)return l}u=xD(o),o=o[As]}s=u}return i}function xD(t){let e=t[te],n=e.type;return n===2?e.declTNode:n===1?t[sn]:null}var Wc="__parameters__";function yP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function RD(t,e,n){return ha(()=>{let r=yP(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,c,l){let d=u.hasOwnProperty(Wc)?u[Wc]:Object.defineProperty(u,Wc,{value:[]})[Wc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function vP(t){let e=St.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function _P(t){return typeof t=="function"}function Eg(t,e){t.forEach(n=>Array.isArray(n)?Eg(n,e):e(n))}function ND(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function wP(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function EP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function IP(t,e,n){let r=ya(t,e);return r>=0?t[r|1]=n:(r=~r,EP(t,r,e,n)),r}function lp(t,e){let n=ya(t,e);if(n>=0)return t[n|1]}function ya(t,e){return DP(t,e,1)}function DP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var xs=LI(RD("Optional"),8);var Ig=LI(RD("SkipSelf"),4);function CP(t){let e=[],n=new Map;function r(i){let s=n.get(i);if(!s){let o=t(i);n.set(i,s=o.then(SP))}return s}return fl.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(c=>{i.template=c}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let c=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),o.push(r(d).then(f=>{a[c+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(c=>{a.push(c),i.styleUrl=void 0}));let u=Promise.all(o).then(()=>MP(s));e.push(u)}),bP(),Promise.all(e).then(()=>{})}var fl=new Map,TP=new Set;function bP(){let t=fl;return fl=new Map,t}function AP(){return fl.size===0}function SP(t){return typeof t=="string"?t:t.text()}function MP(t){TP.delete(t)}var ci=new x("ENVIRONMENT_INITIALIZER"),PD=new x("INJECTOR",-1),OD=new x("INJECTOR_DEF_TYPES"),pl=class{get(e,n=ta){if(n===ta){let r=new Error(`NullInjectorError: No provider for ${dt(e)}!`);throw r.name="NullInjectorError",r}return n}};function va(t){return{\u0275providers:t}}function xP(...t){return{\u0275providers:kD(!0,t),\u0275fromNgModule:!0}}function kD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Eg(e,o=>{let a=o;Pp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&FD(i,s),n}function FD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Dg(i,s=>{e(s,r)})}}function Pp(t,e,n,r){if(t=lt(t),!t)return!1;let i=null,s=KE(t),o=!s&&gr(t);if(!s&&!o){let u=t.ngModule;if(s=KE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of u)Pp(c,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{Eg(s.imports,l=>{Pp(l,e,n,r)&&(c||=[],c.push(l))})}finally{}c!==void 0&&FD(c,e)}if(!a){let c=Es(i)||(()=>new i);e({provide:i,useFactory:c,deps:At},i),e({provide:OD,useValue:i,multi:!0},i),e({provide:ci,useValue:()=>I(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let c=t;Dg(u,l=>{e(l,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Dg(t,e){for(let n of t)RI(n)&&(n=n.\u0275providers),Array.isArray(n)?Dg(n,e):e(n)}var RP=pe({provide:String,useValue:pe});function VD(t){return t!==null&&typeof t=="object"&&RP in t}function NP(t){return!!(t&&t.useExisting)}function PP(t){return!!(t&&t.useFactory)}function Ds(t){return typeof t=="function"}function OP(t){return!!t.useClass}var Nl=new x("Set Injector scope."),tl={},kP={},dp;function Cg(){return dp===void 0&&(dp=new pl),dp}var Nt=class{},ua=class extends Nt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kp(e,o=>this.processProvider(o)),this.records.set(PD,fs(void 0,this)),i.has("environment")&&this.records.set(Nt,fs(void 0,this));let s=this.records.get(Nl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(OD,At,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=fr(this),r=Ut(void 0),i;try{return e()}finally{fr(n),Ut(r)}}get(e,n=ta,r=ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(GE))return e[GE](this);r=Ml(r);let i,s=fr(this),o=Ut(void 0);try{if(!(r&ee.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=BP(e)&&Sl(e);c&&this.injectableDefInScope(c)?u=fs(Op(e),tl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ee.Self?Cg():this.parent;return n=r&ee.Optional&&n===ta?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[sl]=a[sl]||[]).unshift(dt(e)),s)throw a;return hN(a,e,"R3InjectorError",this.source)}else throw a}finally{Ut(o),fr(s)}}resolveInjectorInitializers(){let e=fr(this),n=Ut(void 0),r;try{let i=this.get(ci,At,ee.Self);for(let s of i)s()}finally{fr(e),Ut(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(dt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new O(205,!1)}processProvider(e){e=lt(e);let n=Ds(e)?e:lt(e&&e.provide),r=VP(e);if(!Ds(e)&&e.multi===!0){let i=this.records.get(n);i||(i=fs(void 0,tl,!0),i.factory=()=>Tp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}else{let i=this.records.get(n)}this.records.set(n,r)}hydrate(e,n){return n.value===tl&&(n.value=kP,n.value=n.factory()),typeof n.value=="object"&&n.value&&jP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=lt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Op(t){let e=Sl(t),n=e!==null?e.factory:Es(t);if(n!==null)return n;if(t instanceof x)throw new O(204,!1);if(t instanceof Function)return FP(t);throw new O(204,!1)}function FP(t){let e=t.length;if(e>0){let r=wP(e,"?");throw new O(204,!1)}let n=rN(t);return n!==null?()=>n.factory(t):()=>new t}function VP(t){if(VD(t))return fs(void 0,t.useValue);{let e=LD(t);return fs(e,tl)}}function LD(t,e,n){let r;if(Ds(t)){let i=lt(t);return Es(i)||Op(i)}else if(VD(t))r=()=>lt(t.useValue);else if(PP(t))r=()=>t.useFactory(...Tp(t.deps||[]));else if(NP(t))r=()=>I(lt(t.useExisting));else{let i=lt(t&&(t.useClass||t.provide));if(LP(t))r=()=>new i(...Tp(t.deps));else return Es(i)||Op(i)}return r}function fs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function LP(t){return!!t.deps}function jP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function BP(t){return typeof t=="function"||typeof t=="object"&&t instanceof x}function kp(t,e){for(let n of t)Array.isArray(n)?kp(n,e):n&&RI(n)?kp(n.\u0275providers,e):e(n)}function Gn(t,e){t instanceof ua&&t.assertNotDestroyed();let n,r=fr(t),i=Ut(void 0);try{return e()}finally{fr(r),Ut(i)}}function UP(t){if(!FI()&&!cN())throw new O(-203,!1)}function aI(t,e=null,n=null,r){let i=jD(t,e,n,r);return i.resolveInjectorInitializers(),i}function jD(t,e=null,n=null,r,i=new Set){let s=[n||At,xP(t)];return r=r||(typeof t=="object"?void 0:dt(t)),new ua(s,e||Cg(),r||null,i)}var Ot=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return aI({name:""},i,r,"");{let s=r.name??"";return aI({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=ta,e.NULL=new pl,e.\u0275prov=P({token:e,providedIn:"any",factory:()=>I(PD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Fp;function BD(t){Fp=t}function Pl(){if(Fp!==void 0)return Fp;if(typeof document<"u")return document;throw new O(210,!1)}var _a=new x("AppId",{providedIn:"root",factory:()=>$P}),$P="ng",Tg=new x("Platform Initializer"),ht=new x("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var bg=new x("CSP nonce",{providedIn:"root",factory:()=>Pl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function HP(t){return t.ownerDocument.body}function UD(t){return t instanceof Function?t():t}function Xo(t){return(t??C(Ot)).get(ht)==="browser"}var qP="ngSkipHydration",zP="ngskiphydration";function $D(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===zP)return!0}return!1}function HD(t){return t.hasAttribute(qP)}function gl(t){return(t.flags&128)===128}function GP(t){if(gl(t))return!0;let e=t.parent;for(;e;){if(gl(t)||$D(e))return!0;e=e.parent}return!1}var qn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(qn||{}),WP=/^>|^->|<!--|-->|--!>|<!-$/g,KP=/(<|>)/g,QP="\u200B$1\u200B";function YP(t){return t.replace(WP,e=>e.replace(KP,QP))}var qD=new Map,ZP=0;function XP(){return ZP++}function JP(t){qD.set(t[Rl],t)}function e1(t){qD.delete(t[Rl])}var uI="__ngContext__";function li(t,e){vn(e)?(t[uI]=e[Rl],JP(e)):t[uI]=e}var t1;function Ag(t,e){return t1(t,e)}function Sg(t){let e=t[Be];return Ht(e)?e[Be]:e}function zD(t){return WD(t[ia])}function GD(t){return WD(t[tn])}function WD(t){for(;t!==null&&!Ht(t);)t=t[tn];return t}function ps(t,e,n,r,i){if(r!=null){let s,o=!1;Ht(r)?s=r:vn(r)&&(o=!0,r=r[xt]);let a=rn(r);t===0&&n!==null?i==null?XD(e,n,a):ml(e,n,a,i||null,!0):t===1&&n!==null?ml(e,n,a,i||null,!0):t===2?eC(e,a,o):t===3&&e.destroyNode(a),s!=null&&_1(e,t,s,n,i)}}function KD(t,e){return t.createText(e)}function n1(t,e,n){t.setValue(e,n)}function QD(t,e){return t.createComment(YP(e))}function Mg(t,e,n){return t.createElement(e,n)}function r1(t,e){let n=e[Re];wa(t,e,n,2,null,null),e[xt]=null,e[sn]=null}function i1(t,e,n,r,i,s){r[xt]=i,r[sn]=e,wa(t,r,n,1,i,s)}function s1(t,e){wa(t,e,e[Re],2,null,null)}function o1(t){let e=t[ia];if(!e)return hp(t[te],t);for(;e;){let n=null;if(vn(e))n=e[ia];else{let r=e[Mt];r&&(n=r)}if(!n){for(;e&&!e[tn]&&e!==t;)vn(e)&&hp(e[te],e),e=e[Be];e===null&&(e=t),vn(e)&&hp(e[te],e),n=e&&e[tn]}e=n}}function a1(t,e,n,r){let i=Mt+r,s=n.length;r>0&&(n[i-1][tn]=e),r<s-Mt?(e[tn]=n[i],ND(n,Mt+r,e)):(n.push(e),e[tn]=null),e[Be]=n;let o=e[xl];o!==null&&n!==o&&u1(o,e);let a=e[sa];a!==null&&a.insertView(t),Sp(e),e[H]|=128}function u1(t,e){let n=t[al],i=e[Be][Be][$t];e[$t]!==i&&(t[H]|=ws.HasTransplantedViews),n===null?t[al]=[e]:n.push(e)}function YD(t,e){let n=t[al],r=n.indexOf(e),i=e[Be];n.splice(r,1)}function Vp(t,e){if(t.length<=Mt)return;let n=Mt+e,r=t[n];if(r){let i=r[xl];i!==null&&i!==t&&YD(i,r),e>0&&(t[n-1][tn]=r[tn]);let s=hl(t,Mt+e);r1(r[te],r);let o=s[sa];o!==null&&o.detachView(s[te]),r[Be]=null,r[tn]=null,r[H]&=-129}return r}function ZD(t,e){if(!(e[H]&256)){let n=e[Re];n.destroyNode&&wa(t,e,n,3,null,null),o1(e)}}function hp(t,e){if(!(e[H]&256)){e[H]&=-129,e[H]|=256,e[oi]&&IE(e[oi]),l1(t,e),c1(t,e),e[te].type===1&&e[Re].destroy();let n=e[xl];if(n!==null&&Ht(e[Be])){n!==e[Be]&&YD(n,e);let r=e[sa];r!==null&&r.detachView(t)}e1(e)}}function c1(t,e){let n=t.cleanup,r=e[ra];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[ra]=null);let i=e[pr];if(i!==null){e[pr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function l1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ui)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];mn(4,a,u);try{u.call(a)}finally{mn(5,a,u)}}else{mn(4,i,s);try{s.call(i)}finally{mn(5,i,s)}}}}}function d1(t,e,n){return h1(t,e.parent,n)}function h1(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[xt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===_n.None||s===_n.Emulated)return null}return qt(r,n)}}function ml(t,e,n,r,i){t.insertBefore(e,n,r,i)}function XD(t,e,n){t.appendChild(e,n)}function cI(t,e,n,r,i){r!==null?ml(t,e,n,r,i):XD(t,e,n)}function f1(t,e,n,r){t.removeChild(e,n,r)}function xg(t,e){return t.parentNode(e)}function p1(t,e){return t.nextSibling(e)}function g1(t,e,n){return y1(t,e,n)}function m1(t,e,n){return t.type&40?qt(t,n):null}var y1=m1,lI;function Rg(t,e,n,r){let i=d1(t,r,e),s=e[Re],o=r.parent||e[sn],a=g1(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)cI(s,i,n[u],a,!1);else cI(s,i,n,a,!1);lI!==void 0&&lI(s,r,e,n,i)}function nl(t,e){if(e!==null){let n=e.type;if(n&3)return qt(e,t);if(n&4)return Lp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return nl(t,r);{let i=t[e.index];return Ht(i)?Lp(-1,i):rn(i)}}else{if(n&32)return Ag(e,t)()||rn(t[e.index]);{let r=JD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Sg(t[$t]);return nl(i,r)}else return nl(t,e.next)}}}return null}function JD(t,e){if(e!==null){let r=t[$t][sn],i=e.projection;return r.projection[i]}return null}function Lp(t,e){let n=Mt+t+1;if(n<e.length){let r=e[n],i=r[te].firstChild;if(i!==null)return nl(r,i)}return e[Hn]}function eC(t,e,n){let r=xg(t,e);r&&f1(t,r,e,n)}function tC(t){t.textContent=""}function Ng(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&li(rn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Ng(t,e,n.child,r,i,s,!1),ps(e,t,i,a,s);else if(u&32){let c=Ag(n,r),l;for(;l=c();)ps(e,t,i,l,s);ps(e,t,i,a,s)}else u&16?v1(t,e,r,n,i,s):ps(e,t,i,a,s);n=o?n.projectionNext:n.next}}function wa(t,e,n,r,i,s){Ng(n,r,t.firstChild,e,i,s,!1)}function v1(t,e,n,r,i,s){let o=n[$t],u=o[sn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];ps(e,t,i,l,s)}else{let c=u,l=o[Be];gl(r)&&(c.flags|=128),Ng(t,e,c,l,i,s,!0)}}function _1(t,e,n,r,i){let s=n[Hn],o=rn(n);s!==o&&ps(e,t,r,s,i);for(let a=Mt;a<n.length;a++){let u=n[a];wa(u[te],u,t,e,r,s)}}function w1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:qn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=qn.Important),t.setStyle(n,r,i,s))}}function E1(t,e,n){t.setAttribute(e,"style",n)}function nC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function rC(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&bp(t,e,r),i!==null&&nC(t,e,i),s!==null&&E1(t,e,s)}var jp=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${KR})`}};function Pg(t){return t instanceof jp?t.changingThisBreaksApplicationSecurity:t}var Bp=class{};function I1(){let t=new fi;return C(ht)==="browser"&&(t.store=D1(Pl(),C(_a))),t}var fi=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=P({token:e,providedIn:"root",factory:I1});let t=e;return t})();function D1(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var iC="h",sC="b",Up=function(t){return t.FirstChild="f",t.NextSibling="n",t}(Up||{}),C1="e",T1="t",Og="c",oC="x",yl="r",b1="i",A1="n",S1="d",M1="__nghData__",aC=M1,fp="ngh",x1="nghm",uC=(t,e,n)=>null;function R1(t,e,n=!1){let r=t.getAttribute(fp);if(r==null)return null;let[i,s]=r.split("|");if(r=n?s:i,!r)return null;let o=n?i:s?`|${s}`:"",a={};if(r!==""){let c=e.get(fi,null,{optional:!0});c!==null&&(a=c.get(aC,[])[Number(r)])}let u={data:a,firstChild:t.firstChild??null};return n&&(u.firstChild=t,Ol(u,0,t.nextSibling)),o?t.setAttribute(fp,o):t.removeAttribute(fp),u}function N1(){uC=R1}function kg(t,e,n=!1){return uC(t,e,n)}function P1(t){let e=t._lView;return e[te].type===2?null:(XI(e)&&(e=e[Rt]),e)}function O1(t){return t.textContent?.replace(/\s/gm,"")}function k1(t){let e=Pl(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=O1(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function Ol(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function $p(t,e){return t.segmentHeads?.[e]??null}function F1(t,e){let n=t.data,r=n[C1]?.[e]??null;return r===null&&n[Og]?.[e]&&(r=Fg(t,e)),r}function cC(t,e){return t.data[Og]?.[e]??null}function Fg(t,e){let n=cC(t,e)??[],r=0;for(let i of n)r+=i[yl]*(i[oC]??1);return r}function kl(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[S1];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var Hp=class{},vl=class{};function V1(t){let e=Error(`No component factory found for ${dt(t)}.`);return e[L1]=t,e}var L1="ngComponent";var qp=class{resolveComponentFactory(e){throw V1(e)}},Fl=(()=>{let e=class e{};e.NULL=new qp;let t=e;return t})();function j1(){return Vl(zt(),Ne())}function Vl(t,e){return new pi(qt(t,e))}var pi=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=j1;let t=e;return t})();var ca=class{},Rs=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>B1();let t=e;return t})();function B1(){let t=Ne(),e=zt(),n=_r(e.index,t);return(vn(n)?n:t)[Re]}var U1=(()=>{let e=class e{};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),pp={};function lC(t){return H1(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function $1(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function H1(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var zp=class{constructor(){}supports(e){return lC(e)}create(e){return new Gp(e)}},q1=(t,e)=>e,Gp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||q1}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<dI(r,i,s)?n:r,a=dI(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){let f=h<s.length?s[h]:s[h]=0,m=f+h;l<=m&&m<c&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!lC(e))throw new O(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,$1(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Wp(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new _l),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _l),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Wp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Kp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},_l=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Kp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dI(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function hI(){return new Vg([new zp])}var Vg=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||hI()),deps:[[e,new Ig,new xs]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new O(901,!1)}};e.\u0275prov=P({token:e,providedIn:"root",factory:hI});let t=e;return t})();function wl(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(rn(s)),Ht(s)&&z1(s,r);let o=n.type;if(o&8)wl(t,e,n.child,r);else if(o&32){let a=Ag(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=JD(e,n);if(Array.isArray(a))r.push(...a);else{let u=Sg(e[$t]);wl(u[te],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function z1(t,e){for(let n=Mt;n<t.length;n++){let r=t[n],i=r[te].firstChild;i!==null&&wl(r[te],r,i,e)}t[Hn]!==t[xt]&&e.push(t[Hn])}var dC=[];function G1(t){return t[oi]??W1(t)}function W1(t){let e=dC.pop()??Object.create(Q1);return e.lView=t,e}function K1(t){t.lView[oi]!==t&&(t.lView=null,dC.push(t))}var Q1=de(M({},_E),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{aa(t.lView)},consumerOnSignalRead(){this.lView[oi]=this}}),Y1="ngOriginalError";function gp(t){return t[Y1]}var wn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&gp(e);for(;n&&gp(n);)n=gp(n);return n||null}},hC=new x("",{providedIn:"root",factory:()=>C(wn).handleError.bind(void 0)}),Kc=new x(""),fC=!1,pC=new x("",{providedIn:"root",factory:()=>fC});var Ns={};function Qe(t){gC(En(),Ne(),Ms()+t,!1)}function gC(t,e,n,r){if(!r)if((e[H]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Jc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&el(e,s,0,n)}ai(n)}function se(t,e=ee.Default){let n=Ne();if(n===null)return I(t,e);let r=zt();return SD(r,n,lt(t),e)}function mC(){let t="invalid";throw new Error(t)}function Z1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ai(~i);else{let s=i,o=n[++r],a=n[++r];ZN(o,s);let u=e[s];a(2,u)}}}finally{ai(-1)}}function Ll(t,e,n,r,i,s,o,a,u,c,l){let d=e.blueprint.slice();return d[xt]=i,d[H]=r|4|128|8|64,(c!==null||t&&t[H]&2048)&&(d[H]|=2048),iD(d),d[Be]=d[As]=t,d[nn]=n,d[mr]=o||t&&t[mr],d[Re]=a||t&&t[Re],d[_s]=u||t&&t[_s]||null,d[sn]=s,d[Rl]=XP(),d[$n]=l,d[QI]=c,d[$t]=e.type==2?t[$t]:d,d}function jl(t,e,n,r,i){let s=t.data[e];if(s===null)s=X1(t,e,n,r,i),YN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=GN();s.injectorIndex=o===null?-1:o.injectorIndex}return ga(s,!0),s}function X1(t,e,n,r,i){let s=lD(),o=dD(),a=o?s:s&&s.parent,u=t.data[e]=iO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function yC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function vC(t,e,n,r,i){let s=Ms(),o=r&2;try{ai(-1),o&&e.length>Rt&&gC(t,e,Rt,!1),mn(o?2:0,i),n(r,i)}finally{ai(s),mn(o?3:1,i)}}function _C(t,e,n){if(ZI(e)){let r=Tt(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Tt(r)}}}function wC(t,e,n){aD()&&(dO(t,e,n,qt(n,e)),(n.flags&64)===64&&bC(t,e,n))}function EC(t,e,n=qt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function IC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Lg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Lg(t,e,n,r,i,s,o,a,u,c,l){let d=Rt+r,h=d+i,f=J1(d,h),m=typeof c=="function"?c():c;return f[te]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:m,incompleteFirstPass:!1,ssrId:l}}function J1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ns);return n}function eO(t,e,n,r){let s=r.get(pC,fC)||n===_n.ShadowDom,o=t.selectRootElement(e,s);return tO(o),o}function tO(t){DC(t)}var DC=t=>null;function nO(t){HD(t)?tC(t):k1(t)}function rO(){DC=nO}function iO(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return pa()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function fI(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=n===null?{}:n;let s=t[i];r===null?pI(n,e,i,s):r.hasOwnProperty(i)&&pI(n,e,r[i],s)}return n}function pI(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function sO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,c=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;u=fI(d.inputs,l,u,f),c=fI(d.outputs,l,c,m);let v=u!==null&&o!==null&&!$I(e)?wO(u,l,o):null;a.push(v)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function oO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function aO(t,e,n,r,i,s,o,a){let u=qt(e,n),c=e.inputs,l;!a&&c!=null&&(l=c[r])?(jg(t,n,l,r,i),fa(e)&&uO(n,e.index)):e.type&3?(r=oO(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function uO(t,e){let n=_r(e,t);n[H]&16||(n[H]|=64)}function CC(t,e,n,r){if(aD()){let i=r===null?null:{"":-1},s=fO(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&TC(t,e,n,o,i,a),i&&pO(n,r,i)}n.mergedAttrs=na(n.mergedAttrs,n.attrs)}function TC(t,e,n,r,i,s){for(let c=0;c<r.length;c++)Rp(dl(n,e),t,r[c].type);mO(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let l=r[c];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,u=yC(t,e,r.length,null);for(let c=0;c<r.length;c++){let l=r[c];n.mergedAttrs=na(n.mergedAttrs,l.hostAttrs),yO(t,n,e,u,l),gO(u,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}sO(t,n,s)}function cO(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;lO(o)!=a&&o.push(a),o.push(n,r,s)}}function lO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function dO(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;fa(n)&&vO(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||dl(n,e),li(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],c=Is(e,t,a,n);if(li(c,e),o!==null&&_O(e,a-i,c,u,n,o),yr(u)){let l=_r(n.index,e);l[nn]=Is(e,t,a,n)}}}function bC(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=XN();try{ai(s);for(let a=r;a<i;a++){let u=t.data[a],c=e[a];Mp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&hO(u,c)}}finally{ai(-1),Mp(o)}}function hO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function fO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(wN(e,o.selectors,!1))if(r||(r=[]),yr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Qp(t,e,u)}else r.unshift(o),Qp(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Qp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function pO(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new O(-301,!1);r.push(e[i],s)}}}function gO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yr(e)&&(n[""]=t)}}function mO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function yO(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Es(i.type,!0)),o=new ui(s,yr(i),se);t.blueprint[r]=o,n[r]=o,cO(t,e,r,yC(t,n,i.hostVars,Ns),i)}function vO(t,e,n){let r=qt(e,t),i=IC(n),s=t[mr].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Bl(t,Ll(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function _O(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],c=o[a++],l=o[a++];AC(r,n,u,c,l)}}function AC(t,e,n,r,i){let s=Tt(null);try{let o=t.inputTransforms;o!==null&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),t.setInput!==null?t.setInput(e,i,n,r):e[r]=i}finally{Tt(s)}}function wO(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}return r}function SC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function MC(t,e){let n=t.contentQueries;if(n!==null){let r=Tt(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];fD(s),a.contentQueries(2,e[o],o)}}}finally{Tt(r)}}}function Bl(t,e){return t[ia]?t[tI][tn]=e:t[ia]=e,t[tI]=e,e}function Yp(t,e,n){fD(0);let r=Tt(null);try{e(t,n)}finally{Tt(r)}}function EO(t){return t[ra]||(t[ra]=[])}function IO(t){return t.cleanup||(t.cleanup=[])}function xC(t,e){let n=t[_s],r=n?n.get(wn,null):null;r&&r.handleError(e)}function jg(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=e[o],c=t.data[o];AC(c,u,r,a,i)}}function DO(t,e,n){let r=nD(e,t);n1(t[Re],r,n)}var CO=100;function TO(t,e=!0){let n=t[mr],r=n.rendererFactory,i=n.afterRenderEventManager,s=!1;s||(r.begin?.(),i?.begin());try{bO(t)}catch(o){throw e&&xC(t,o),o}finally{s||(r.end?.(),n.inlineEffectRunner?.flush(),i?.end())}}function bO(t){Zp(t,0);let e=0;for(;sD(t);){if(e===CO)throw new O(103,!1);e++,Zp(t,1)}}function AO(t,e,n,r){let i=e[H];if((i&256)===256)return;let s=!1;!s&&e[mr].inlineEffectRunner?.flush(),mg(e);let o=null,a=null;!s&&SO(t)&&(a=G1(e),o=wE(a));try{iD(e),KN(t.bindingStartIndex),n!==null&&vC(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let d=t.preOrderCheckHooks;d!==null&&Jc(e,d,null)}else{let d=t.preOrderHooks;d!==null&&el(e,d,0,null),up(e,0)}if(MO(e),RC(e,0),t.contentQueries!==null&&MC(t,e),!s)if(u){let d=t.contentCheckHooks;d!==null&&Jc(e,d)}else{let d=t.contentHooks;d!==null&&el(e,d,1),up(e,1)}Z1(t,e);let c=t.components;c!==null&&PC(e,c,0);let l=t.viewQuery;if(l!==null&&Yp(2,l,r),!s)if(u){let d=t.viewCheckHooks;d!==null&&Jc(e,d)}else{let d=t.viewHooks;d!==null&&el(e,d,2),up(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ap]){for(let d of e[ap])d();e[ap]=null}s||(e[H]&=-73)}catch(u){throw aa(e),u}finally{a!==null&&(EE(a,o),K1(a)),yg()}}function SO(t){return t.type!==2}function RC(t,e){for(let n=zD(t);n!==null;n=GD(n)){n[H]&=~ws.HasChildViewsToRefresh;for(let r=Mt;r<n.length;r++){let i=n[r];NC(i,e)}}}function MO(t){for(let e=zD(t);e!==null;e=GD(e)){if(!(e[H]&ws.HasTransplantedViews))continue;let n=e[al];for(let r=0;r<n.length;r++){let i=n[r],s=i[Be];VN(i)}}}function xO(t,e,n){let r=_r(e,t);NC(r,n)}function NC(t,e){gg(t)&&Zp(t,e)}function Zp(t,e){let r=t[te],i=t[H],s=t[oi],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&jf(s)),s&&(s.dirty=!1),t[H]&=-9217,o)AO(r,t,r.template,t[nn]);else if(i&8192){RC(t,1);let a=r.components;a!==null&&PC(t,a,1)}}function PC(t,e,n){for(let r=0;r<e.length;r++)xO(t,e[r],n)}function Bg(t){for(t[mr].changeDetectionScheduler?.notify();t;){t[H]|=64;let e=Sg(t);if(XI(t)&&!e)return t;t=e}return null}var di=class{get rootNodes(){let e=this._lView,n=e[te];return wl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nn]}set context(e){this._lView[nn]=e}get destroyed(){return(this._lView[H]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Be];if(Ht(e)){let n=e[ol],r=n?n.indexOf(this):-1;r>-1&&(Vp(e,r),hl(n,r))}this._attachedToViewContainer=!1}ZD(this._lView[te],this._lView)}onDestroy(e){oD(this._lView,e)}markForCheck(){Bg(this._cdRefInjectingView||this._lView)}detach(){this._lView[H]&=-129}reattach(){Sp(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,TO(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,s1(this._lView[te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e,Sp(this._lView)}},Ps=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=RO;let t=e;return t})();function RO(t){return NO(zt(),Ne(),(t&16)===16)}function NO(t,e,n){if(fa(t)&&!n){let r=_r(t.index,e);return new di(r,r)}else if(t.type&47){let r=e[$t];return new di(r,e)}return null}var OC=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=PO,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Xp=class extends OC{constructor(e){super(),this._lView=e}onDestroy(e){return oD(this._lView,e),()=>jN(this._lView,e)}};function PO(){return new Xp(Ne())}var gI=new Set;function Os(t){gI.has(t)||(gI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Jp=class extends Ge{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=mp(s),i&&(i=mp(i)),o&&(o=mp(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof xe&&e.add(a),a}};function mp(t){return e=>{setTimeout(t,void 0,e)}}var je=Jp;function mI(...t){}function OO(){let t=typeof St.requestAnimationFrame=="function",e=St[t?"requestAnimationFrame":"setTimeout"],n=St[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var re=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new je(!1),this.onMicrotaskEmpty=new je(!1),this.onStable=new je(!1),this.onError=new je(!1),typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=OO().nativeRequestAnimationFrame,VO(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new O(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,kO,mI,mI);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},kO={};function Ug(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function FO(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(St,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,eg(t),t.isCheckStableRunning=!0,Ug(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),eg(t))}function VO(t){let e=()=>{FO(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(LO(a))return n.invokeTask(i,s,o,a);try{return yI(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),vI(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return yI(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),vI(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,eg(t),Ug(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function eg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function yI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vI(t){t._nesting--,Ug(t)}var tg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new je,this.onMicrotaskEmpty=new je,this.onStable=new je,this.onError=new je}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function LO(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function jO(t="zone.js",e){return t==="noop"?new tg:t==="zone.js"?new re(e):t}var gs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(gs||{}),BO={destroy(){}};function $g(t,e){!e&&UP($g);let n=e?.injector??C(Ot);if(!Xo(n))return BO;Os("NgAfterNextRender");let r=n.get(kC),i=r.handler??=new rg,s=e?.phase??gs.MixedReadWrite,o=()=>{i.unregister(u),a()},a=n.get(OC).onDestroy(o),u=new ng(n,s,()=>{o(),t()});return i.register(u),{destroy:o}}var ng=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(re),this.errorHandler=e.get(wn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},rg=class{constructor(){this.executingCallbacks=!1,this.buckets={[gs.EarlyRead]:new Set,[gs.Write]:new Set,[gs.MixedReadWrite]:new Set,[gs.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new O(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},kC=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let r of this.internalCallbacks)r();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function UO(t,e){let n=_r(e,t),r=n[te];$O(r,n);let i=n[xt];i!==null&&n[$n]===null&&(n[$n]=kg(i,n[_s])),Hg(r,n,n[nn])}function $O(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Hg(t,e,n){mg(e);try{let r=t.viewQuery;r!==null&&Yp(1,r,n);let i=t.template;i!==null&&vC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&MC(t,e),t.staticViewQueries&&Yp(2,t.viewQuery,n);let s=t.components;s!==null&&HO(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[H]&=-5,yg()}}function HO(t,e){for(let n=0;n<e.length;n++)UO(t,e[n])}function ig(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=zE(i,a);else if(s==2){let u=a,c=e[++o];r=zE(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var El=class extends Fl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=gr(e);return new Cs(n,this.ngModule)}};function _I(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push({propName:r,templateName:n})}return e}function qO(t){let e=t.toLowerCase();return e==="svg"?NN:e==="math"?PN:null}var sg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ml(r);let i=this.injector.get(e,pp,r);return i!==pp||n===pp?i:this.parentInjector.get(e,n,r)}},Cs=class extends vl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=_I(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return _I(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=CN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let s=i instanceof Nt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new sg(e,s):e,a=o.get(ca,null);if(a===null)throw new O(407,!1);let u=o.get(U1,null),c=o.get(kC,null),l=o.get(Bp,null),d={rendererFactory:a,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",m=r?eO(h,r,this.componentDef.encapsulation,o):Mg(h,f,qO(f)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let _=null;m!==null&&(_=kg(m,o,!0));let D=Lg(0,null,null,1,0,null,null,null,null,null,null),N=Ll(null,D,null,v,null,null,d,h,o,null,_);mg(N);let S,j;try{let $=this.componentDef,K,we=null;$.findHostDirectiveDefs?(K=[],we=new Map,$.findHostDirectiveDefs($,K,we),K.push($)):K=[$];let jt=zO(N,m),kf=GO(jt,m,$,K,N,d,h);j=rD(D,Rt),m&&QO(h,$,m,r),n!==void 0&&YO(j,this.ngContentSelectors,n),S=KO(kf,$,K,we,N,[ZO]),Hg(D,N,null)}finally{yg()}return new og(this.componentType,S,Vl(j,N),N,j)}},og=class extends Hp{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new di(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;jg(s[te],s,i,e,n),this.previousInputValues.set(e,n);let o=_r(this._tNode.index,s);Bg(o)}}get injector(){return new si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function zO(t,e){let n=t[te],r=Rt;return t[r]=e,jl(n,r,2,"#host",null)}function GO(t,e,n,r,i,s,o){let a=i[te];WO(r,t,e,o);let u=null;e!==null&&(u=kg(e,i[_s]));let c=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Ll(i,IC(n),null,l,i[t.index],t,s,c,null,null,u);return a.firstCreatePass&&Qp(a,t,r.length-1),Bl(i,d),i[t.index]=d}function WO(t,e,n,r){for(let i of t)e.mergedAttrs=na(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ig(e,e.mergedAttrs,!0),n!==null&&rC(r,n,e))}function KO(t,e,n,r,i,s){let o=zt(),a=i[te],u=qt(o,i);TC(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=Is(i,a,d,o);li(h,i)}bC(a,i,o),u&&li(u,i);let c=Is(i,a,o.directiveStart+o.componentOffset,o);if(t[nn]=i[nn]=c,s!==null)for(let l of s)l(c,e);return _C(a,o,t),c}function QO(t,e,n,r){if(r)bp(t,n,["ng-version","17.0.8"]);else{let{attrs:i,classes:s}=TN(e.selectors[0]);i&&bp(t,n,i),s&&s.length>0&&nC(t,n,s.join(" "))}}function YO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function ZO(){let t=zt();_g(Ne()[te],t)}function XO(t){return Object.getPrototypeOf(t.prototype).constructor}function Er(t){let e=XO(t.type),n=!0,r=[t];for(;e;){let i;if(yr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new O(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Qc(t.inputs),o.inputTransforms=Qc(t.inputTransforms),o.declaredInputs=Qc(t.declaredInputs),o.outputs=Qc(t.outputs);let a=i.hostBindings;a&&nk(t,a);let u=i.viewQuery,c=i.contentQueries;if(u&&ek(t,u),c&&tk(t,c),Gc(t.inputs,i.inputs),Gc(t.declaredInputs,i.declaredInputs),Gc(t.outputs,i.outputs),i.inputTransforms!==null&&(o.inputTransforms===null&&(o.inputTransforms={}),Gc(o.inputTransforms,i.inputTransforms)),yr(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Er&&(n=!1)}}e=Object.getPrototypeOf(e)}JO(r)}function JO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=na(i.hostAttrs,n=na(n,i.hostAttrs))}}function Qc(t){return t===vs?{}:t===At?[]:t}function ek(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function tk(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function nk(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function qg(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function rk(t,e,n,r){return qg(t,hD(),n)?e+NI(n)+r:Ns}function Yc(t,e){return t<<17|e<<2}function hi(t){return t>>17&32767}function ik(t){return(t&2)==2}function sk(t,e){return t&131071|e<<17}function ag(t){return t|2}function Ts(t){return(t&131068)>>2}function yp(t,e){return t&-131069|e<<2}function ok(t){return(t&1)===1}function ug(t){return t|1}function ak(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=hi(o),u=Ts(o);t[r]=n;let c=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||ya(d,l)>0)&&(c=!0)}else l=n;if(i)if(u!==0){let h=hi(t[a+1]);t[r+1]=Yc(h,a),h!==0&&(t[h+1]=yp(t[h+1],r)),t[a+1]=sk(t[a+1],r)}else t[r+1]=Yc(a,0),a!==0&&(t[a+1]=yp(t[a+1],r)),a=r;else t[r+1]=Yc(u,0),a===0?a=r:t[u+1]=yp(t[u+1],r),u=r;c&&(t[r+1]=ag(t[r+1])),wI(t,l,r,!0,s),wI(t,l,r,!1,s),uk(e,l,t,r,s),o=Yc(a,u),s?e.classBindings=o:e.styleBindings=o}function uk(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ya(s,e)>=0&&(n[r+1]=ug(n[r+1]))}function wI(t,e,n,r,i){let s=t[n+1],o=e===null,a=r?hi(s):Ts(s),u=!1;for(;a!==0&&(u===!1||o);){let c=t[a],l=t[a+1];ck(c,e)&&(u=!0,t[a+1]=r?ug(l):ag(l)),a=r?hi(l):Ts(l)}u&&(t[n+1]=r?ag(s):ug(s))}function ck(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ya(t,e)>=0:!1}function ft(t,e,n){let r=Ne(),i=hD();if(qg(r,i,e)){let s=En(),o=nP();aO(s,o,r,t,e,r[Re],n,!1)}return ft}function EI(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";jg(t,n,s[o],o,r)}function Ul(t,e){return lk(t,e,null,!0),Ul}function lk(t,e,n,r){let i=Ne(),s=En(),o=QN(2);if(s.firstUpdatePass&&hk(s,t,o,r),e!==Ns&&qg(i,o,e)){let a=s.data[Ms()];yk(s,a,i,i[Re],t,i[o+1]=vk(e,n),r,o)}}function dk(t,e){return e>=t.expandoStartIndex}function hk(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Ms()],o=dk(t,n);_k(s,r)&&e===null&&!o&&(e=!1),e=fk(i,s,e,r),ak(i,s,e,n,o,r)}}function fk(t,e,n,r){let i=JN(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=vp(null,t,e,n,r),n=la(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=vp(i,t,e,n,r),s===null){let u=pk(t,e,r);u!==void 0&&Array.isArray(u)&&(u=vp(null,t,e,u[1],r),u=la(u,e.attrs,r),gk(t,e,r,u))}else s=mk(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function pk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ts(r)!==0)return t[hi(r)]}function gk(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[hi(i)]=r}function mk(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=la(r,o,n)}return la(r,e.attrs,n)}function vp(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=la(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function la(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),IP(t,o,n?!0:e[++s]))}return t===void 0?null:t}function yk(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,c=u[a+1],l=ok(c)?II(u,e,n,i,Ts(c),o):void 0;if(!Il(l)){Il(s)||ik(c)&&(s=II(u,null,n,i,a,o));let d=nD(Ms(),n);w1(r,o,d,i,s)}}function II(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],c=Array.isArray(u),l=c?u[1]:u,d=l===null,h=n[i+1];h===Ns&&(h=d?At:void 0);let f=d?lp(h,r):l===r?h:void 0;if(c&&!Il(f)&&(f=lp(u,r)),Il(f)&&(a=f,o))return a;let m=t[i+1];i=o?hi(m):Ts(m)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=lp(u,r))}return a}function Il(t){return t!==void 0}function vk(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=dt(Pg(t)))),t}function _k(t,e){return(t.flags&(e?8:16))!==0}function FC(t){let e=t[oa]??[],r=t[Be][Re];for(let i of e)wk(i,r);t[oa]=At}function wk(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[yl];for(;n<i;){let s=r.nextSibling;eC(e,r,!1),r=s,n++}}}function VC(t){FC(t);for(let e=Mt;e<t.length;e++)Dl(t[e])}function Dl(t){let e=t[te];for(let n=Rt;n<e.bindingStartIndex;n++)if(Ht(t[n])){let r=t[n];VC(r)}else vn(t[n])&&Dl(t[n])}function Ek(t){let e=t._views;for(let n of e){let r=P1(n);if(r!==null&&r[xt]!==null)if(vn(r))Dl(r);else{let i=r[xt];Dl(i),VC(r)}}}var Ik=new RegExp(`^(\\d+)*(${sC}|${iC})*(.*)`);function Dk(t){let e=t.match(Ik),[n,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[u,c,l]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(l,10)||1;a.push(c,d)}return[o,...a]}function Ck(t){return!t.prev&&t.parent?.type===8}function _p(t){return t.index-Rt}function $l(t,e,n,r){let i=null,s=_p(r),o=t.data[A1];if(o?.[s])i=bk(o[s],n);else if(e.firstChild===r)i=t.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(Ck(r)){let c=_p(r.parent);i=$p(t,c)}else{let c=qt(u,n);if(a)i=c.firstChild;else{let l=_p(u),d=$p(t,l);if(u.type===2&&d){let f=Fg(t,l)+1;i=Hl(f,d)}else i=c.nextSibling}}}return i}function Hl(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function Tk(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case Up.FirstChild:n=n.firstChild;break;case Up.NextSibling:n=n.nextSibling;break}}return n}function bk(t,e){let[n,...r]=Dk(t),i;if(n===iC)i=e[$t][xt];else if(n===sC)i=HP(e[$t][xt]);else{let s=Number(n);i=rn(e[s+Rt])}return Tk(i,r)}function Ak(t,e){let n=[];for(let r of e)for(let i=0;i<(r[oC]??1);i++){let s={data:r,firstChild:null};r[yl]>0&&(s.firstChild=t,t=Hl(r[yl],t)),n.push(s)}return[t,n]}var LC=(t,e)=>null;function Sk(t,e){let n=t[oa];return!e||n===null||n.length===0?null:n[0].data[b1]===e?n.shift():(FC(t),null)}function Mk(){LC=Sk}function DI(t,e){return LC(t,e)}function xk(t,e,n,r){let i=e.tView,o=t[H]&4096?4096:16,a=Ll(t,i,n,o,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),u=t[e.index];a[xl]=u;let c=t[sa];return c!==null&&(a[sa]=c.createEmbeddedView(i)),Hg(i,a,n),a}function CI(t,e){return!e||e.firstChild===null||gl(t)}function Rk(t,e,n,r=!0){let i=e[te];if(a1(i,e,t,n),r){let o=Lp(n,t),a=e[Re],u=xg(a,t[Hn]);u!==null&&i1(i,t[sn],a,e,u,o)}let s=e[$n];s!==null&&s.firstChild!==null&&(s.firstChild=null)}var Ea=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Nk;let t=e;return t})();function Nk(){let t=zt();return Ok(t,Ne())}var Pk=Ea,jC=class extends Pk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Vl(this._hostTNode,this._hostLView)}get injector(){return new si(this._hostTNode,this._hostLView)}get parentInjector(){let e=wg(this._hostTNode,this._hostLView);if(ID(e)){let n=ll(e,this._hostLView),r=cl(e),i=n[te].data[r+8];return new si(i,n)}else return new si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=TI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Mt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=DI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,CI(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!_P(e),a;if(o)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}let u=o?e:new Cs(gr(e)),c=r||this.parentInjector;if(!s&&u.ngModule==null){let v=(o?c:this.parentInjector).get(Nt,null);v&&(s=v)}let l=gr(u.componentType??{}),d=DI(this._lContainer,l?.id??null),h=d?.firstChild??null,f=u.create(c,i,h,s);return this.insertImpl(f.hostView,a,CI(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(FN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Be],c=new jC(u,u[sn],u[Be]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Rk(o,i,s,r),e.attachToViewContainerRef(),ND(wp(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=TI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Vp(this._lContainer,n);r&&(hl(wp(this._lContainer),n),ZD(r[te],r))}detach(e){let n=this._adjustIndex(e,-1),r=Vp(this._lContainer,n);return r&&hl(wp(this._lContainer),n)!=null?new di(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function TI(t){return t[ol]}function wp(t){return t[ol]||(t[ol]=[])}function Ok(t,e){let n,r=e[t.index];return Ht(r)?n=r:(n=SC(r,e,null,t),e[t.index]=n,Bl(e,n)),BC(n,e,t,r),new jC(n,t,e)}function kk(t,e){let n=t[Re],r=n.createComment(""),i=qt(e,t),s=xg(n,i);return ml(n,s,r,p1(n,i),!1),r}var BC=UC,zg=(t,e,n)=>!1;function Fk(t,e,n){return zg(t,e,n)}function UC(t,e,n,r){if(t[Hn])return;let i;n.type&8?i=rn(r):i=kk(e,n),t[Hn]=i}function Vk(t,e,n){if(t[Hn]&&t[oa])return!0;let r=n[$n],i=e.index-Rt;if(!r||GP(e)||kl(r,i))return!1;let o=$p(r,i),a=r.data[Og]?.[i],[u,c]=Ak(o,a);return t[Hn]=u,t[oa]=c,!0}function Lk(t,e,n,r){zg(t,n,e)||UC(t,e,n,r)}function jk(){BC=Lk,zg=Vk}function Bk(t,e,n,r,i,s,o,a,u){let c=e.consts,l=jl(e,t,4,o||null,ul(c,a));CC(e,n,l,ul(c,u)),_g(e,l);let d=l.tView=Lg(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Gg(t,e,n,r,i,s,o,a){let u=Ne(),c=En(),l=t+Rt,d=c.firstCreatePass?Bk(l,c,u,e,n,r,i,s,o):c.data[l];ga(d,!1);let h=$C(c,u,d,t);vg()&&Rg(c,u,h,d),li(h,u);let f=SC(h,u,h,d);return u[l]=f,Bl(u,f),Fk(f,d,u),pg(d)&&wC(c,u,d),o!=null&&EC(u,d,a),Gg}var $C=HC;function HC(t,e,n,r){return wr(!0),e[Re].createComment("")}function Uk(t,e,n,r){let i=e[$n],s=!i||pa()||kl(i,r);if(wr(s),s)return HC(t,e,n,r);let o=i.data[T1]?.[r]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=$l(i,t,e,n);Ol(i,r,a);let u=Fg(i,r);return Hl(u,a)}function $k(){$C=Uk}function Hk(t,e,n,r,i,s){let o=e.consts,a=ul(o,i),u=jl(e,t,2,r,a);return CC(e,n,u,ul(o,s)),u.attrs!==null&&ig(u,u.attrs,!1),u.mergedAttrs!==null&&ig(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function V(t,e,n,r){let i=Ne(),s=En(),o=Rt+t,a=i[Re],u=s.firstCreatePass?Hk(o,s,i,e,n,r):s.data[o],c=qC(s,i,u,a,e,t);i[o]=c;let l=pg(u);return ga(u,!0),rC(a,c,u),(u.flags&32)!==32&&vg()&&Rg(s,i,c,u),BN()===0&&li(c,i),UN(),l&&(wC(s,i,u),_C(s,u,i)),r!==null&&EC(i,u),V}function U(){let t=zt();dD()?WN():(t=t.parent,ga(t,!1));let e=t;HN(e)&&zN(),$N();let n=En();return n.firstCreatePass&&(_g(n,t),ZI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&oP(e)&&EI(n,e,Ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&aP(e)&&EI(n,e,Ne(),e.stylesWithoutHost,!1),U}function gi(t,e,n,r){return V(t,e,n,r),U(),gi}var qC=(t,e,n,r,i,s)=>(wr(!0),Mg(r,i,_D()));function qk(t,e,n,r,i,s){let o=e[$n],a=!o||pa()||kl(o,s);if(wr(a),a)return Mg(r,i,_D());let u=$l(o,t,e,n);return cC(o,s)&&Ol(o,s,u.nextSibling),o&&($D(n)||HD(u))&&fa(n)&&(qN(n),tC(u)),u}function zk(){qC=qk}var Gk=(t,e,n,r)=>(wr(!0),QD(e[Re],""));function Wk(t,e,n,r){let i,s=e[$n],o=!s||pa();if(wr(o),o)return QD(e[Re],"");let a=$l(s,t,e,n),u=F1(s,r);return Ol(s,r,a),i=Hl(u,a),i}function Kk(){Gk=Wk}function zC(){return Ne()}var Cl="en-US";var Qk=Cl;function Yk(t){tN(t,"Expected localeId to be defined"),typeof t=="string"&&(Qk=t.toLowerCase().replace(/_/g,"-"))}function mi(t){return!!t&&typeof t.then=="function"}function GC(t){return!!t&&typeof t.subscribe=="function"}function Ee(t,e,n,r){let i=Ne(),s=En(),o=zt();return Xk(s,i,i[Re],o,t,e,r),Ee}function Zk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[ra],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function Xk(t,e,n,r,i,s,o){let a=pg(r),c=t.firstCreatePass&&IO(t),l=e[nn],d=EO(e),h=!0;if(r.type&3||o){let v=qt(r,e),_=o?o(v):v,D=d.length,N=o?j=>o(rn(j[r.index])):r.index,S=null;if(!o&&a&&(S=Zk(t,e,i,r.index)),S!==null){let j=S.__ngLastListenerFn__||S;j.__ngNextListenerFn__=s,S.__ngLastListenerFn__=s,h=!1}else{s=AI(r,e,l,s,!1);let j=n.listen(_,i,s);d.push(s,j),c&&c.push(i,N,D,D+1)}}else s=AI(r,e,l,s,!1);let f=r.outputs,m;if(h&&f!==null&&(m=f[i])){let v=m.length;if(v)for(let _=0;_<v;_+=2){let D=m[_],N=m[_+1],$=e[D][N].subscribe(s),K=d.length;d.push(s,$),c&&c.push(i,r.index,K,-(K+1))}}}function bI(t,e,n,r){try{return mn(6,e,n),n(r)!==!1}catch(i){return xC(t,i),!1}finally{mn(7,e,n)}}function AI(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?_r(t.index,e):e;Bg(a);let u=bI(e,n,r,o),c=s.__ngNextListenerFn__;for(;c;)u=bI(e,n,c,o)&&u,c=c.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function WC(t=1){return tP(t)}function G(t,e=""){let n=Ne(),r=En(),i=t+Rt,s=r.firstCreatePass?jl(r,i,1,e,null):r.data[i],o=KC(r,n,s,e,t);n[i]=o,vg()&&Rg(r,n,o,s),ga(s,!1)}var KC=(t,e,n,r,i)=>(wr(!0),KD(e[Re],r));function Jk(t,e,n,r,i){let s=e[$n],o=!s||pa()||kl(s,i);return wr(o),o?KD(e[Re],r):$l(s,t,e,n)}function eF(){KC=Jk}function ks(t){return QC("",t,""),ks}function QC(t,e,n){let r=Ne(),i=rk(r,t,e,n);return i!==Ns&&DO(r,Ms(),i),QC}function tF(t,e,n){let r=En();if(r.firstCreatePass){let i=yr(t);cg(n,r.data,r.blueprint,i,!0),cg(e,r.data,r.blueprint,i,!1)}}function cg(t,e,n,r,i){if(t=lt(t),Array.isArray(t))for(let s=0;s<t.length;s++)cg(t[s],e,n,r,i);else{let s=En(),o=Ne(),a=zt(),u=Ds(t)?t:lt(t.provide),c=LD(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ds(t)||!t.multi){let f=new ui(c,i,se),m=Ip(u,e,i?l:l+h,d);m===-1?(Rp(dl(a,o),s,u),Ep(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[m]=f,o[m]=f)}else{let f=Ip(u,e,l+h,d),m=Ip(u,e,l,l+h),v=f>=0&&n[f],_=m>=0&&n[m];if(i&&!_||!i&&!v){Rp(dl(a,o),s,u);let D=iF(i?rF:nF,n.length,i,r,c);!i&&_&&(n[m].providerFactory=D),Ep(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(D),o.push(D)}else{let D=YC(n[i?m:f],c,!i&&r);Ep(s,t,f>-1?f:m,D)}!i&&r&&_&&n[m].componentProviders++}}}function Ep(t,e,n,r){let i=Ds(e),s=OP(e);if(i||s){let u=(s?lt(e.useClass):e).prototype.ngOnDestroy;if(u){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=c.indexOf(n);l===-1?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function YC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ip(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function nF(t,e,n,r){return lg(this.multi,[])}function rF(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Is(n,n[te],this.providerFactory.index,r);s=a.slice(0,o),lg(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],lg(i,s);return s}function lg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function iF(t,e,n,r,i){let s=new ui(t,n,se);return s.multi=[],s.index=e,s.componentProviders=0,YC(s,i,r&&!n),s}function ql(t,e=[]){return n=>{n.providersResolver=(r,i)=>tF(r,i?i(t):t,e)}}var vr=class{},da=class{};var Tl=class extends vr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new El(this);let i=GI(e);this._bootstrapComponents=UD(i.bootstrap),this._r3Injector=jD(e,n,[{provide:vr,useValue:this},{provide:Fl,useValue:this.componentFactoryResolver},...r],dt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bl=class extends da{constructor(e){super(),this.moduleType=e}create(e){return new Tl(this.moduleType,e,[])}};function sF(t,e,n){return new Tl(t,e,n)}var dg=class extends vr{constructor(e){super(),this.componentFactoryResolver=new El(this),this.instance=null;let n=new ua([...e.providers,{provide:vr,useValue:this},{provide:Fl,useValue:this.componentFactoryResolver}],e.parent||Cg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function zl(t,e,n=null){return new dg({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var oF=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=kD(!1,r.type),s=i.length>0?zl([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=P({token:e,providedIn:"environment",factory:()=>new e(I(Nt))});let t=e;return t})();function ZC(t){Os("NgStandalone"),t.getStandaloneInjector=e=>e.get(oF).getOrCreateStandaloneInjector(t)}var Wg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cF;let t=e;return t})(),aF=Wg,uF=class extends aF{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=xk(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new di(i)}};function cF(){return lF(zt(),Ne())}function lF(t,e){return t.type&4?new uF(e,t,Vl(t,e)):null}var Zc=null;function dF(t){Zc!==null&&(t.defaultEncapsulation!==Zc.defaultEncapsulation||t.preserveWhitespaces!==Zc.preserveWhitespaces)||(Zc=t)}var zn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},XC=new zn("17.0.8");var Gl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),hg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Wl=(()=>{let e=class e{compileModuleSync(r){return new bl(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=GI(r),o=UD(s.declarations).reduce((a,u)=>{let c=gr(u);return c&&a.push(new Cs(c)),a},[]);return new hg(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hF=new x("compilerOptions");var Ia=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new tt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Kg=new x(""),Da=new x(""),Kl=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qg||(fF(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(I(re),I(Ql),I(Da))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Ql=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Qg?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function fF(t){Qg=t}var Qg,Yl=new x("Application Initializer"),JC=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=C(Yl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(mi(o))r.push(o);else if(GC(o)){let a=new Promise((u,c)=>{o.subscribe({complete:u,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fs=new x("appBootstrapListener");function pF(t,e,n){let r=new bl(n);return Promise.resolve(r)}function gF(){DE(()=>{throw new O(600,!1)})}function mF(t){return t.isBoundToModule}function yF(t,e,n){try{let r=n();return mi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function e0(t,e){return Array.isArray(e)?e.reduce(e0,t):M(M({},t),e)}var Wn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=C(hC),this.componentTypes=[],this.components=[],this.isStable=C(Ia).hasPendingTasks.pipe(B(r=>!r)),this._injector=C(Nt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof vl;if(!this._injector.get(JC).done){let m="Cannot bootstrap as there are still asynchronous initializers running."+(!s&&zI(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new O(405,!1)}let a;s?a=r:a=this._injector.get(Fl).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=mF(a)?void 0:this._injector.get(vr),c=i||a.selector,l=a.create(Ot.NULL,[],c,u),d=l.location.nativeElement,h=l.injector.get(Kg,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),rl(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new O(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;rl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Fs,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>rl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new O(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function SI(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var Xc;function Yg(t){Xc??=new WeakMap;let e=Xc.get(t);if(e)return e;let n=t.isStable.pipe(bt(r=>r)).toPromise().then(()=>{});return Xc.set(t,n),t.onDestroy(()=>Xc?.delete(t)),n}var vF=(()=>{let e=class e{constructor(){this.zone=C(re),this.applicationRef=C(Wn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _F(t){return[{provide:re,useFactory:t},{provide:ci,multi:!0,useFactory:()=>{let e=C(vF,{optional:!0});return()=>e.initialize()}},{provide:ci,multi:!0,useFactory:()=>{let e=C(IF);return()=>{e.initialize()}}},{provide:hC,useFactory:wF}]}function wF(){let t=C(re),e=C(wn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function EF(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var IF=(()=>{let e=class e{constructor(){this.subscription=new xe,this.initialized=!1,this.zone=C(re),this.pendingTasks=C(Ia)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{re.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function DF(){return typeof $localize<"u"&&$localize.locale||Cl}var Zg=new x("LocaleId",{providedIn:"root",factory:()=>C(Zg,ee.Optional|ee.SkipSelf)||DF()});var t0=new x("PlatformDestroyListeners"),n0=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=jO(i?.ngZone,EF({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{let o=sF(r.moduleType,this.injector,_F(()=>s)),a=o.injector.get(wn,null);return s.runOutsideAngular(()=>{let u=s.onError.subscribe({next:c=>{a.handleError(c)}});o.onDestroy(()=>{rl(this._modules,o),u.unsubscribe()})}),yF(a,s,()=>{let u=o.injector.get(JC);return u.runInitializers(),u.donePromise.then(()=>{let c=o.injector.get(Zg,Cl);return Yk(c||Cl),this._moduleDoBootstrap(o),o})})})}bootstrapModule(r,i=[]){let s=e0({},i);return pF(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(r){let i=r.injector.get(Wn);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>i.bootstrap(s));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new O(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new O(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(t0,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(I(Ot))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),ea=null,r0=new x("AllowMultipleToken");function CF(t){if(ea&&!ea.get(r0,!1))throw new O(400,!1);gF(),ea=t;let e=t.get(n0);return AF(t),e}function Xg(t,e,n=[]){let r=`Platform: ${e}`,i=new x(r);return(s=[])=>{let o=i0();if(!o||o.injector.get(r0,!1)){let a=[...n,...s,{provide:i,useValue:!0}];t?t(a):CF(TF(a,r))}return bF(i)}}function TF(t=[],e){return Ot.create({name:e,providers:[{provide:Nl,useValue:"platform"},{provide:t0,useValue:new Set([()=>ea=null])},...t]})}function bF(t){let e=i0();if(!e)throw new O(401,!1);return e}function i0(){return ea?.get(n0)??null}function AF(t){t.get(Tg,null)?.forEach(n=>n())}function Jg(){return!1}var s0=Xg(null,"core",[]),o0=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(I(Wn))},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({});let t=e;return t})();var MI=!1;function SF(){MI||(MI=!0,N1(),zk(),eF(),Kk(),$k(),jk(),Mk(),rO())}function MF(t,e){return Yg(t)}function a0(){return va([{provide:Kc,useFactory:()=>{let t=!0;return Xo()&&(t=!!C(fi,{optional:!0})?.get(aC,null)),t&&Os("NgHydration"),t}},{provide:ci,useValue:()=>{Xo()&&C(Kc)&&(xF(),SF())},multi:!0},{provide:pC,useFactory:()=>Xo()&&C(Kc)},{provide:Fs,useFactory:()=>{if(Xo()&&C(Kc)){let t=C(Wn),e=C(Ot);return()=>{MF(t,e).then(()=>{re.assertInAngularZone(),Ek(t)})}}return()=>{}},multi:!0}])}function xF(){let t=Pl(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===x1){e=n;break}if(!e)throw new O(-507,!1)}function Zl(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function u0(t){let e=gr(t);if(!e)return null;let n=new Cs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var em=null;function In(){return em}function h0(t){em||(em=t)}var Xl=class{},pt=new x("DocumentToken"),rm=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>C(PF))(),providedIn:"platform"});let t=e;return t})(),f0=new x("Location Initialized"),PF=(()=>{let e=class e extends rm{constructor(){super(),this._doc=C(pt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return In().getBaseHref(this._doc)}onPopState(r){let i=In().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=In().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function im(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function c0(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Kn(t){return t&&t[0]!=="?"?"?"+t:t}var yi=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>C(sm))(),providedIn:"root"});let t=e;return t})(),p0=new x("appBaseHref"),sm=(()=>{let e=class e extends yi{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??C(pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return im(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Kn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Kn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Kn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(I(rm),I(p0,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),g0=(()=>{let e=class e extends yi{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return i==null&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=im(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Kn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Kn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(I(rm),I(p0,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Vs=(()=>{let e=class e{constructor(r){this._subject=new je,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=FF(c0(l0(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Kn(i))}normalize(r){return e.stripTrailingSlash(kF(this._basePath,l0(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Kn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Kn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Kn,e.joinWithSlash=im,e.stripTrailingSlash=c0,e.\u0275fac=function(i){return new(i||e)(I(yi))},e.\u0275prov=P({token:e,factory:()=>OF(),providedIn:"root"});let t=e;return t})();function OF(){return new Vs(I(yi))}function kF(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function l0(t){return t.replace(/\/index.html$/,"")}function FF(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function m0(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var tm=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},y0=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(!1)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new tm(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,a),d0(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);d0(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(se(Ea),se(Wg),se(Vg))},e.\u0275dir=Pt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function d0(t,e){t.context.$implicit=e.item}var v0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({});let t=e;return t})(),_0="browser",VF="server";function vi(t){return t===VF}var w0=(()=>{let e=class e{};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>new nm(I(pt),window)});let t=e;return t})(),nm=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let n=LF(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function LF(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Jl=class{};var td=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var A0=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(A0||{}),om=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new td,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var nd=class t extends om{constructor(e={}){super(e),this.type=A0.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var UF=new x("");var E0="b",I0="h",D0="s",C0="st",T0="u",b0="rt",ed=new x(""),$F=["GET","HEAD"];function HF(t,e){let l=C(ed),{isCacheActive:n}=l,r=aE(l,["isCacheActive"]),{transferCache:i,method:s}=t;if(!n||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!$F.includes(s)||i===!1||r.filter?.(t)===!1)return e(t);let o=C(fi),a=zF(t),u=o.get(a,null),c=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(c=i.includeHeaders),u){let{[E0]:d,[b0]:h,[I0]:f,[D0]:m,[C0]:v,[T0]:_}=u,D=d;switch(h){case"arraybuffer":D=new TextEncoder().encode(d).buffer;break;case"blob":D=new Blob([d]);break}let N=new td(f);return F(new nd({body:D,headers:N,status:m,statusText:v,url:_}))}return e(t).pipe(be(d=>{d instanceof nd&&o.set(a,{[E0]:d.body,[I0]:qF(d.headers,c),[D0]:d.status,[C0]:d.statusText,[T0]:d.url||"",[b0]:t.responseType})}))}function qF(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function zF(t){let{params:e,method:n,responseType:r,url:i}=t,s=e.keys().sort().map(u=>`${u}=${e.getAll(u)}`).join("&"),o=n+"."+r+"."+i+"?"+s,a=GF(o);return a}function GF(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483647+1,e.toString()}function S0(t){return[{provide:ed,useFactory:()=>(Os("NgHttpTransferCache"),M({isCacheActive:!0},t))},{provide:UF,useValue:HF,multi:!0,deps:[fi,ed]},{provide:Fs,multi:!0,useFactory:()=>{let e=C(Wn),n=C(ed);return()=>{Yg(e).then(()=>{n.isCacheActive=!1})}}}]}var cm=class extends Xl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},lm=class t extends cm{static makeCurrent(){h0(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=WF();return n==null?null:KF(n)}resetBaseElement(){Ca=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return m0(document.cookie,e)}},Ca=null;function WF(){return Ca=Ca||document.querySelector("base"),Ca?Ca.getAttribute("href"):null}function KF(t){return new URL(t,document.baseURI).pathname}var dm=class{addToWindow(e){St.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new O(5103,!1);return s},St.getAllAngularTestabilities=()=>e.getAllTestabilities(),St.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=St.getAllAngularTestabilities(),s=i.length,o=!1,a=function(u){o=o||u,s--,s==0&&r(o)};i.forEach(u=>{u.whenStable(a)})};St.frameworkStabilizers||(St.frameworkStabilizers=[]),St.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?In().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},QF=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),hm=new x("EventManagerPlugins"),N0=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new O(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(I(hm),I(re))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),rd=class{constructor(e){this._doc=e}},am="ng-app-id",P0=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=vi(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${am}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(am),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(am,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(I(pt),I(_a),I(bg,8),I(ht))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),um={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pm=/%COMP%/g,O0="%COMP%",YF=`_nghost-${O0}`,ZF=`_ngcontent-${O0}`,XF=!0,JF=new x("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>XF});function eV(t){return ZF.replace(pm,t)}function tV(t){return YF.replace(pm,t)}function k0(t,e){return e.map(n=>n.replace(pm,t))}var M0=(()=>{let e=class e{constructor(r,i,s,o,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=vi(u),this.defaultRenderer=new Ta(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===_n.ShadowDom&&(i=de(M({},i),{encapsulation:_n.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof id?s.applyToHost(r):s instanceof ba&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case _n.Emulated:o=new id(c,l,i,this.appId,d,a,u,h);break;case _n.ShadowDom:return new fm(c,l,r,i,a,u,this.nonce,h);default:o=new ba(c,l,i,d,a,u,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(I(N0),I(P0),I(_a),I(JF),I(pt),I(ht),I(re),I(bg))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Ta=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(um[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(x0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(x0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new O(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=um[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=um[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(qn.DashCase|qn.Important)?e.style.setProperty(n,r,i&qn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&qn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=In().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function x0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var fm=class extends Ta{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=k0(i.id,i.styles);for(let l of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ba=class extends Ta{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?k0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},id=class extends ba{constructor(e,n,r,i,s,o,a,u){let c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=eV(c),this.hostAttr=tV(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},nV=(()=>{let e=class e extends rd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(I(pt))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),R0=["alt","control","meta","shift"],rV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},sV=(()=>{let e=class e extends rd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>In().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),R0.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=rV[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),R0.forEach(a=>{if(a!==s){let u=iV[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(I(pt))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function oV(){lm.makeCurrent()}function aV(){return new wn}function uV(){return BD(document),document}var cV=[{provide:ht,useValue:_0},{provide:Tg,useValue:oV,multi:!0},{provide:pt,useFactory:uV,deps:[]}],F0=Xg(s0,"browser",cV),lV=new x(""),dV=[{provide:Da,useClass:dm,deps:[]},{provide:Kg,useClass:Kl,deps:[re,Ql,Da]},{provide:Kl,useClass:Kl,deps:[re,Ql,Da]}],hV=[{provide:Nl,useValue:"root"},{provide:wn,useFactory:aV,deps:[]},{provide:hm,useClass:nV,multi:!0,deps:[pt,re,ht]},{provide:hm,useClass:sV,multi:!0,deps:[pt]},M0,P0,N0,{provide:ca,useExisting:M0},{provide:Jl,useClass:QF,deps:[]},[]],V0=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:_a,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(I(lV,12))},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({providers:[...hV,...dV],imports:[v0,o0]});let t=e;return t})();function fV(){return new gm(I(pt))}var gm=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(I(pt))},e.\u0275prov=P({token:e,factory:function(i){let s=null;return i?s=new i:s=fV(),s},providedIn:"root"});let t=e;return t})();function L0(...t){let e=[],n=new Set,r=n.has(1);for(let{\u0275providers:i,\u0275kind:s}of t)n.add(s),i.length&&e.push(i);return va([[],a0(),n.has(0)||r?[]:S0({}),e])}var Y="primary",Ua=Symbol("RouteTitle"),wm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function $s(t){return new wm(t)}function gV(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function mV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Dn(t[n],e[n]))return!1;return!0}function Dn(t,e){let n=t?Em(t):void 0,r=e?Em(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!K0(t[i],e[i]))return!1;return!0}function Em(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function K0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Q0(t){return t.length>0?t[t.length-1]:null}function Tr(t){return Jf(t)?t:mi(t)?oe(Promise.resolve(t)):F(t)}var yV={exact:Z0,subset:X0},Y0={exact:vV,subset:_V,ignored:()=>!0};function B0(t,e,n){return yV[n.paths](t.root,e.root,n.matrixParams)&&Y0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function vV(t,e){return Dn(t,e)}function Z0(t,e,n){if(!wi(t.segments,e.segments)||!ad(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Z0(t.children[r],e.children[r],n))return!1;return!0}function _V(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>K0(t[n],e[n]))}function X0(t,e,n){return J0(t,e,e.segments,n)}function J0(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!wi(i,n)||e.hasChildren()||!ad(i,n,r))}else if(t.segments.length===n.length){if(!wi(t.segments,n)||!ad(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!X0(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!wi(t.segments,i)||!ad(t.segments,i,r)||!t.children[Y]?!1:J0(t.children[Y],e,s,r)}}function ad(t,e,n){return e.every((r,i)=>Y0[n](t[i].parameters,r.parameters))}var Ir=class{constructor(e=new le([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$s(this.queryParams)),this._queryParamMap}toString(){return IV.serialize(this)}},le=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ud(this)}},_i=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=$s(this.parameters)),this._parameterMap}toString(){return tT(this)}};function wV(t,e){return wi(t,e)&&t.every((n,r)=>Dn(n.parameters,e[r].parameters))}function wi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function EV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Y&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Y&&(n=n.concat(e(i,r)))}),n}var $a=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>new Pa)(),providedIn:"root"});let t=e;return t})(),Pa=class{parse(e){let n=new Dm(e);return new Ir(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Aa(e.root,!0)}`,r=TV(e.queryParams),i=typeof e.fragment=="string"?`#${DV(e.fragment)}`:"";return`${n}${r}${i}`}},IV=new Pa;function ud(t){return t.segments.map(e=>tT(e)).join("/")}function Aa(t,e){if(!t.hasChildren())return ud(t);if(e){let n=t.children[Y]?Aa(t.children[Y],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Y&&r.push(`${i}:${Aa(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=EV(t,(r,i)=>i===Y?[Aa(t.children[Y],!1)]:[`${i}:${Aa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Y]!=null?`${ud(t)}/${n[0]}`:`${ud(t)}/(${n.join("//")})`}}function eT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sd(t){return eT(t).replace(/%3B/gi,";")}function DV(t){return encodeURI(t)}function Im(t){return eT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cd(t){return decodeURIComponent(t)}function U0(t){return cd(t.replace(/\+/g,"%20"))}function tT(t){return`${Im(t.path)}${CV(t.parameters)}`}function CV(t){return Object.keys(t).map(e=>`;${Im(e)}=${Im(t[e])}`).join("")}function TV(t){let e=Object.keys(t).map(n=>{let r=t[n];return Array.isArray(r)?r.map(i=>`${sd(n)}=${sd(i)}`).join("&"):`${sd(n)}=${sd(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var bV=/^[^\/()?;#]+/;function mm(t){let e=t.match(bV);return e?e[0]:""}var AV=/^[^\/()?;=#]+/;function SV(t){let e=t.match(AV);return e?e[0]:""}var MV=/^[^=?&#]+/;function xV(t){let e=t.match(MV);return e?e[0]:""}var RV=/^[^&#]+/;function NV(t){let e=t.match(RV);return e?e[0]:""}var Dm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Y]=new le(e,n)),r}parseSegment(){let e=mm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new O(4009,!1);return this.capture(e),new _i(cd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=SV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=mm(this.remaining);i&&(r=i,this.capture(r))}e[cd(n)]=cd(r)}parseQueryParam(e){let n=xV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=NV(this.remaining);o&&(r=o,this.capture(r))}let i=U0(n),s=U0(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=mm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new O(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Y);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[Y]:new le([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new O(4011,!1)}};function nT(t){return t.segments.length>0?new le([],{[Y]:t}):t}function rT(t){let e={};for(let r of Object.keys(t.children)){let i=t.children[r],s=rT(i);if(r===Y&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new le(t.segments,e);return PV(n)}function PV(t){if(t.numberOfChildren===1&&t.children[Y]){let e=t.children[Y];return new le(t.segments.concat(e.segments),e.children)}return t}function Hs(t){return t instanceof Ir}function OV(t,e,n=null,r=null){let i=iT(t);return sT(i,e,n,r)}function iT(t){let e;function n(s){let o={};for(let u of s.children){let c=n(u);o[u.outlet]=c}let a=new le(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=nT(r);return e??i}function sT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ym(i,i,i,n,r);let s=kV(e);if(s.toRoot())return ym(i,i,new le([],{}),n,r);let o=FV(s,i,t),a=o.processChildren?xa(o.segmentGroup,o.index,s.commands):aT(o.segmentGroup,o.index,s.commands);return ym(i,o.segmentGroup,a,n,r)}function ld(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Oa(t){return typeof t=="object"&&t!=null&&t.outlets}function ym(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let o;t===e?o=n:o=oT(t,e,n);let a=nT(rT(o));return new Ir(a,s,i)}function oT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=oT(s,e,n)}),new le(t.segments,r)}var dd=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ld(r[0]))throw new O(4003,!1);let i=r.find(Oa);if(i&&i!==Q0(r))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function kV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new dd(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new dd(n,e,r)}var Bs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function FV(t,e,n){if(t.isAbsolute)return new Bs(e,!0,0);if(!n)return new Bs(e,!1,NaN);if(n.parent===null)return new Bs(n,!0,0);let r=ld(t.commands[0])?0:1,i=n.segments.length-1+r;return VV(n,i,t.numberOfDoubleDots)}function VV(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new O(4005,!1);i=r.segments.length}return new Bs(r,!1,i-s)}function LV(t){return Oa(t[0])?t[0].outlets:{[Y]:t}}function aT(t,e,n){if(t||(t=new le([],{})),t.segments.length===0&&t.hasChildren())return xa(t,e,n);let r=jV(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new le(t.segments.slice(0,r.pathIndex),{});return s.children[Y]=new le(t.segments.slice(r.pathIndex),t.children),xa(s,0,i)}else return r.match&&i.length===0?new le(t.segments,{}):r.match&&!t.hasChildren()?Cm(t,e,n):r.match?xa(t,0,i):Cm(t,e,n)}function xa(t,e,n){if(n.length===0)return new le(t.segments,{});{let r=LV(n),i={};if(Object.keys(r).some(s=>s!==Y)&&t.children[Y]&&t.numberOfChildren===1&&t.children[Y].segments.length===0){let s=xa(t.children[Y],e,n);return new le(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=aT(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new le(t.segments,i)}}function jV(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Oa(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!H0(u,c,o))return s;r+=2}else{if(!H0(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Oa(s)){let u=BV(s.outlets);return new le(r,u)}if(i===0&&ld(n[0])){let u=t.segments[e];r.push(new _i(u.path,$0(n[0]))),i++;continue}let o=Oa(s)?s.outlets[Y]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ld(a)?(r.push(new _i(o,$0(a))),i+=2):(r.push(new _i(o,{})),i++)}return new le(r,{})}function BV(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Cm(new le([],{}),0,r))}),e}function $0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function H0(t,e,n){return t==n.path&&Dn(e,n.parameters)}var Ra="imperative",Gt=class{constructor(e,n){this.id=e,this.url=n}},qs=class extends Gt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qn=class extends Gt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Dr=class extends Gt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Cr=class extends Gt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}},ka=class extends Gt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hd=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tm=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bm=class extends Gt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Am=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sm=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mm=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xm=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Rm=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nm=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pm=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Om=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fd=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Fa=class{},Va=class{constructor(e){this.url=e}};var km=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ha,this.attachRef=null}},Ha=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new km,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Fm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Fm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Vm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vm(e,this._root).map(n=>n.value)}};function Fm(t,e){if(t===e.value)return e;for(let n of e.children){let r=Fm(t,n);if(r)return r}return null}function Vm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Vm(t,n);if(r.length)return r.unshift(e),r}return[]}var kt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function js(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var gd=class extends pd{constructor(e,n){super(e),this.snapshot=n,Wm(this,e)}toString(){return this.snapshot.toString()}};function uT(t,e){let n=UV(t,e),r=new tt([new _i("",{})]),i=new tt({}),s=new tt({}),o=new tt({}),a=new tt(""),u=new zs(r,i,o,a,s,Y,e,n.root);return u.snapshot=n.root,new gd(new kt(u,[]),n)}function UV(t,e){let n={},r={},i={},s="",o=new La([],n,i,s,r,Y,e,null,{});return new md("",new kt(o,[]))}var zs=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(B(c=>c[Ua]))??F(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(B(e=>$s(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B(e=>$s(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Gm(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M(M(M({},t.data),e.data),i?.data),t._resolvedData)}:r={params:M({},t.params),data:M({},t.data),resolve:M(M({},t.data),t._resolvedData??{})},i&&lT(i)&&(r.resolve[Ua]=i.title),r}var La=class{get title(){return this.data?.[Ua]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$s(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$s(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},md=class extends pd{constructor(e,n){super(n),this.url=e,Wm(this,n)}toString(){return cT(this._root)}};function Wm(t,e){e.value._routerState=t,e.children.forEach(n=>Wm(t,n))}function cT(t){let e=t.children.length>0?` { ${t.children.map(cT).join(", ")} } `:"";return`${t.value}${e}`}function vm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Dn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Dn(e.params,n.params)||t.paramsSubject.next(n.params),mV(e.url,n.url)||t.urlSubject.next(n.url),Dn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Lm(t,e){let n=Dn(t.params,e.params)&&wV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Lm(t.parent,e.parent))}function lT(t){return typeof t.title=="string"||t.title===null}var Km=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Y,this.activateEvents=new je,this.deactivateEvents=new je,this.attachEvents=new je,this.detachEvents=new je,this.parentContexts=C(Ha),this.location=C(Ea),this.changeDetector=C(Ps),this.environmentInjector=C(Nt),this.inputBinder=C(Ed,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new O(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new jm(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Pt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ss]});let t=e;return t})(),jm=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===zs?this.route:e===Ha?this.childContexts:this.parent.get(e,n)}},Ed=new x(""),q0=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Yo([i.queryParams,i.params,i.data]).pipe(Ce(([o,a,u],c)=>(u=M(M(M({},o),a),u),c===0?F(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=u0(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function $V(t,e,n){let r=ja(t,e._root,n?n._root:void 0);return new gd(r,e)}function ja(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=HV(t,e,n);return new kt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ja(t,a)),o}}let r=qV(e.value),i=e.children.map(s=>ja(t,s));return new kt(r,i)}}function HV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ja(t,r,i);return ja(t,r)})}function qV(t){return new zs(new tt(t.url),new tt(t.params),new tt(t.queryParams),new tt(t.fragment),new tt(t.data),t.outlet,t.component,t)}var dT="ngNavigationCancelingError";function hT(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Hs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=fT(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function fT(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[dT]=!0,r.cancellationCode=e,n&&(r.url=n),r}function zV(t){return pT(t)&&Hs(t.url)}function pT(t){return t&&t[dT]}var GV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=It({type:e,selectors:[["ng-component"]],standalone:!0,features:[ZC],decls:1,vars:0,template:function(i,s){i&1&&gi(0,"router-outlet")},dependencies:[Km],encapsulation:2});let t=e;return t})();function WV(t,e){return t.providers&&!t._injector&&(t._injector=zl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Qm(t){let e=t.children&&t.children.map(Qm),n=e?de(M({},t),{children:e}):M({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Y&&(n.component=GV),n}function Cn(t){return t.outlet||Y}function KV(t,e){let n=t.filter(r=>Cn(r)===e);return n.push(...t.filter(r=>Cn(r)!==e)),n}function qa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var QV=(t,e,n,r)=>B(i=>(new Bm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Bm=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),vm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=js(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=js(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=js(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=js(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Om(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Nm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(vm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),vm(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=qa(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},yd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Us=class{constructor(e,n){this.component=e,this.route=n}};function YV(t,e,n){let r=t._root,i=e?e._root:null;return Sa(r,i,n,[r.value])}function ZV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ws(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!PI(t)?t:e.get(t):r}function Sa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=js(e);return t.children.forEach(o=>{XV(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Na(a,n.getContext(o),i)),i}function XV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=JV(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new yd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Sa(t,e,a?a.children:null,r,i):Sa(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Us(a.outlet.component,o))}else o&&Na(e,a,i),i.canActivateChecks.push(new yd(r)),s.component?Sa(t,null,a?a.children:null,r,i):Sa(t,null,n,r,i);return i}function JV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!wi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!wi(t.url,e.url)||!Dn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lm(t,e)||!Dn(t.queryParams,e.queryParams);case"paramsChange":default:return!Lm(t,e)}}function Na(t,e,n){let r=js(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Na(o,e.children.getContext(s),n):Na(o,null,n):Na(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Us(e.outlet.component,i)):n.canDeactivateChecks.push(new Us(null,i)):n.canDeactivateChecks.push(new Us(null,i))}function za(t){return typeof t=="function"}function eL(t){return typeof t=="boolean"}function tL(t){return t&&za(t.canLoad)}function nL(t){return t&&za(t.canActivate)}function rL(t){return t&&za(t.canActivateChild)}function iL(t){return t&&za(t.canDeactivate)}function sL(t){return t&&za(t.canMatch)}function gT(t){return t instanceof Bn||t?.name==="EmptyError"}var od=Symbol("INITIAL_VALUE");function Gs(){return Ce(t=>Yo(t.map(e=>e.pipe(Un(1),ii(od)))).pipe(B(e=>{for(let n of e)if(n!==!0){if(n===od)return od;if(n===!1||n instanceof Ir)return n}return!0}),Ke(e=>e!==od),Un(1)))}function oL(t,e){return Le(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?F(de(M({},n),{guardsResult:!0})):aL(o,r,i,t).pipe(Le(a=>a&&eL(a)?uL(r,s,t,e):F(a)),B(a=>de(M({},n),{guardsResult:a})))})}function aL(t,e,n,r){return oe(t).pipe(Le(i=>fL(i.component,i.route,n,e,r)),bt(i=>i!==!0,!0))}function uL(t,e,n,r){return oe(e).pipe(dr(i=>cs(lL(i.route.parent,r),cL(i.route,r),hL(t,i.path,n),dL(t,i.route,n))),bt(i=>i!==!0,!0))}function cL(t,e){return t!==null&&e&&e(new Pm(t)),F(!0)}function lL(t,e){return t!==null&&e&&e(new Rm(t)),F(!0)}function dL(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(s=>$c(()=>{let o=qa(e)??n,a=Ws(s,o),u=nL(a)?a.canActivate(e,t):Gn(o,()=>a(e,t));return Tr(u).pipe(bt())}));return F(i).pipe(Gs())}function hL(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>ZV(o)).filter(o=>o!==null).map(o=>$c(()=>{let a=o.guards.map(u=>{let c=qa(o.node)??n,l=Ws(u,c),d=rL(l)?l.canActivateChild(r,t):Gn(c,()=>l(r,t));return Tr(d).pipe(bt())});return F(a).pipe(Gs())}));return F(s).pipe(Gs())}function fL(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return F(!0);let o=s.map(a=>{let u=qa(e)??i,c=Ws(a,u),l=iL(c)?c.canDeactivate(t,e,n,r):Gn(u,()=>c(t,e,n,r));return Tr(l).pipe(bt())});return F(o).pipe(Gs())}function pL(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let s=i.map(o=>{let a=Ws(o,t),u=tL(a)?a.canLoad(e,n):Gn(t,()=>a(e,n));return Tr(u)});return F(s).pipe(Gs(),mT(r))}function mT(t){return Wf(be(e=>{if(Hs(e))throw hT(t,e)}),B(e=>e===!0))}function gL(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let s=i.map(o=>{let a=Ws(o,t),u=sL(a)?a.canMatch(e,n):Gn(t,()=>a(e,n));return Tr(u)});return F(s).pipe(Gs(),mT(r))}var Ba=class{constructor(e){this.segmentGroup=e||null}},vd=class extends Error{constructor(e){super(),this.urlTree=e}};function Ls(t){return us(new Ba(t))}function mL(t){return us(new O(4e3,!1))}function yL(t){return us(fT(!1,3))}var Um=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[Y])return mL(e.redirectTo);i=i.children[Y]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new vd(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Ir(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new le(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new O(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},$m={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vL(t,e,n,r,i){let s=Ym(t,e,n);return s.matched?(r=WV(e,r),gL(r,e,n,i).pipe(B(o=>o===!0?s:M({},$m)))):F(s)}function Ym(t,e,n){if(e.path==="**")return _L(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?M({},$m):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||gV)(n,t,e);if(!i)return M({},$m);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?M(M({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function _L(t){return{matched:!0,parameters:t.length>0?Q0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function z0(t,e,n,r){return n.length>0&&IL(t,n,r)?{segmentGroup:new le(e,EL(r,new le(n,t.children))),slicedSegments:[]}:n.length===0&&DL(t,n,r)?{segmentGroup:new le(t.segments,wL(t,e,n,r,t.children)),slicedSegments:n}:{segmentGroup:new le(t.segments,t.children),slicedSegments:n}}function wL(t,e,n,r,i){let s={};for(let o of r)if(Id(t,n,o)&&!i[Cn(o)]){let a=new le([],{});s[Cn(o)]=a}return M(M({},i),s)}function EL(t,e){let n={};n[Y]=e;for(let r of t)if(r.path===""&&Cn(r)!==Y){let i=new le([],{});n[Cn(r)]=i}return n}function IL(t,e,n){return n.some(r=>Id(t,e,r)&&Cn(r)!==Y)}function DL(t,e,n){return n.some(r=>Id(t,e,r))}function Id(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function CL(t,e,n,r){return Cn(t)!==r&&(r===Y||!Id(e,n,t))?!1:Ym(e,t,n).matched}function TL(t,e,n){return e.length===0&&!t.children[n]}var Hm=class{};function bL(t,e,n,r,i,s,o="emptyOnly"){return new qm(t,e,n,r,i,o,s).recognize()}var AL=31,qm=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Um(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new O(4002,`'${e.segmentGroup}'`)}recognize(){let e=z0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(B(n=>{let r=new La([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,{},Y,this.rootComponentType,null,{}),i=new kt(r,n),s=new md("",i),o=OV(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Y).pipe(lr(r=>{if(r instanceof vd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ba?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Gm(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(B(s=>s instanceof kt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return oe(i).pipe(dr(s=>{let o=r.children[s],a=KV(n,s);return this.processSegmentGroup(e,a,o,s)}),ri((s,o)=>(s.push(...o),s)),hr(null),ip(),Le(s=>{if(s===null)return Ls(r);let o=yT(s);return SL(o),F(o)}))}processSegment(e,n,r,i,s,o){return oe(n).pipe(dr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(lr(u=>{if(u instanceof Ba)return F(null);throw u}))),bt(a=>!!a),lr(a=>{if(gT(a))return TL(r,i,s)?F(new Hm):Ls(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return CL(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Ls(i):Ls(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=Ym(n,i,s);if(!a)return Ls(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>AL&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(Le(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=vL(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Ce(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ce(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new La(l,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,xL(r),Cn(r),r.component??r._loadedComponent??null,r,RL(r)),{segmentGroup:m,slicedSegments:v}=z0(n,l,d,u);if(v.length===0&&m.hasChildren())return this.processChildren(c,u,m).pipe(B(D=>D===null?null:new kt(f,D)));if(u.length===0&&v.length===0)return F(new kt(f,[]));let _=Cn(r)===s;return this.processSegment(c,u,m,v,_?Y:s,!0).pipe(B(D=>new kt(f,D instanceof kt?[D]:[])))}))):Ls(n)))}getChildConfig(e,n,r){return n.children?F({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?F({routes:n._loadedRoutes,injector:n._loadedInjector}):pL(e,n,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(e,n).pipe(be(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):yL(n))):F({routes:[],injector:e})}};function SL(t){t.sort((e,n)=>e.value.outlet===Y?-1:n.value.outlet===Y?1:e.value.outlet.localeCompare(n.value.outlet))}function ML(t){let e=t.value.routeConfig;return e&&e.path===""}function yT(t){let e=[],n=new Set;for(let r of t){if(!ML(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=yT(r.children);e.push(new kt(r.value,i))}return e.filter(r=>!n.has(r))}function xL(t){return t.data||{}}function RL(t){return t.resolve||{}}function NL(t,e,n,r,i,s){return Le(o=>bL(t,e,n,r,o.extractedUrl,i,s).pipe(B(({state:a,tree:u})=>de(M({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function PL(t,e){return Le(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return F(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let c of vT(u))o.add(c);let a=0;return oe(o).pipe(dr(u=>s.has(u)?OL(u,r,t,e):(u.data=Gm(u,u.parent,t).resolve,F(void 0))),be(()=>a++),ds(1),Le(u=>a===o.size?F(n):wt))})}function vT(t){let e=t.children.map(n=>vT(n)).flat();return[t,...e]}function OL(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!lT(i)&&(s[Ua]=i.title),kL(s,t,e,r).pipe(B(o=>(t._resolvedData=o,t.data=Gm(t,t.parent,n).resolve,null)))}function kL(t,e,n,r){let i=Em(t);if(i.length===0)return F({});let s={};return oe(i).pipe(Le(o=>FL(t[o],e,n,r).pipe(bt(),be(a=>{s[o]=a}))),ds(1),np(s),lr(o=>gT(o)?wt:us(o)))}function FL(t,e,n,r){let i=qa(e)??r,s=Ws(t,i),o=s.resolve?s.resolve(e,n):Gn(i,()=>s(e,n));return Tr(o)}function _m(t){return Ce(e=>{let n=t(e);return n?oe(n).pipe(B(()=>e)):F(e)})}var _T=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===Y);return i}getResolvedTitleForRoute(r){return r.data[Ua]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>C(VL))(),providedIn:"root"});let t=e;return t})(),VL=(()=>{let e=class e extends _T{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(I(gm))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ga=new x("",{providedIn:"root",factory:()=>({})}),_d=new x("ROUTES"),Zm=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=C(Wl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return F(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Tr(r.loadComponent()).pipe(B(wT),be(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),ls(()=>{this.componentLoaders.delete(r)})),s=new is(i,()=>new Ge).pipe(rs());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return F({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=LL(i,this.compiler,r,this.onLoadEndListener).pipe(ls(()=>{this.childrenLoaders.delete(i)})),a=new is(o,()=>new Ge).pipe(rs());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function LL(t,e,n,r){return Tr(t.loadChildren()).pipe(B(wT),Le(i=>i instanceof da||Array.isArray(i)?F(i):oe(e.compileModuleAsync(i))),B(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(_d,[],{optional:!0,self:!0}).flat()),{routes:o.map(Qm),injector:s}}))}function jL(t){return t&&typeof t=="object"&&"default"in t}function wT(t){return jL(t)?t.default:t}var Xm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>C(BL))(),providedIn:"root"});let t=e;return t})(),BL=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ET=new x(""),IT=new x("");function UL(t,e,n){let r=t.get(IT),i=t.get(pt);return t.get(re).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),$L(t))),{onViewTransitionCreated:u}=r;return u&&Gn(t,()=>u({transition:a,from:e,to:n})),o})}function $L(t){return new Promise(e=>{$g(e,{injector:t})})}var Jm=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ge,this.transitionAbortSubject=new Ge,this.configLoader=C(Zm),this.environmentInjector=C(Nt),this.urlSerializer=C($a),this.rootContexts=C(Ha),this.location=C(Vs),this.inputBindingEnabled=C(Ed,{optional:!0})!==null,this.titleStrategy=C(_T),this.options=C(Ga,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=C(Xm),this.createViewTransition=C(ET,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Mm(s)),i=s=>this.events.next(new xm(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(de(M(M({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new tt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ra,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ke(o=>o.id!==0),B(o=>de(M({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ce(o=>{this.currentTransition=o;let a=!1,u=!1;return F(o).pipe(be(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?de(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ce(c=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Cr(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),wt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(Ce(h=>{let f=this.transitions?.getValue();return this.events.next(new qs(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?wt:Promise.resolve(h)}),NL(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),be(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=de(M({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new hd(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:v,extras:_}=c,D=new qs(h,this.urlSerializer.serialize(f),m,v);this.events.next(D);let N=uT(f,this.rootComponentType).snapshot;return this.currentTransition=o=de(M({},c),{targetSnapshot:N,urlAfterRedirects:f,extras:de(M({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,F(o)}else{let h="";return this.events.next(new Cr(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),wt}}),be(c=>{let l=new Tm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),B(c=>(this.currentTransition=o=de(M({},c),{guards:YV(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),oL(this.environmentInjector,c=>this.events.next(c)),be(c=>{if(o.guardsResult=c.guardsResult,Hs(c.guardsResult))throw hT(this.urlSerializer,c.guardsResult);let l=new bm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Ke(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",3),!1)),_m(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(be(l=>{let d=new Am(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Ce(l=>{let d=!1;return F(l).pipe(PL(this.paramsInheritanceStrategy,this.environmentInjector),be({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",2)}}))}),be(l=>{let d=new Sm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),_m(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(be(f=>{d.component=f}),B(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Yo(l(c.targetSnapshot.root)).pipe(hr(null),Un(1))}),_m(()=>this.afterPreactivation()),Ce(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?oe(d).pipe(B(()=>o)):F(o)}),B(c=>{let l=$V(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=de(M({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),be(()=>{this.events.next(new Fa)}),QV(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Un(1),be({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),op(this.transitionAbortSubject.pipe(be(c=>{throw c}))),ls(()=>{if(!a&&!u){let c="";this.cancelNavigationTransition(o,c,1)}this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),lr(c=>{if(u=!0,pT(c))this.events.next(new Dr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),zV(c)?this.events.next(new Va(c.url)):o.resolve(!1);else{this.events.next(new ka(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(c))}catch(l){o.reject(l)}}return wt}))}))}cancelNavigationTransition(r,i,s){let o=new Dr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function HL(t){return t!==Ra}var qL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>C(zL))(),providedIn:"root"});let t=e;return t})(),zm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},zL=(()=>{let e=class e extends zm{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ma(e)))(s||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),DT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>C(GL))(),providedIn:"root"});let t=e;return t})(),GL=(()=>{let e=class e extends DT{constructor(){super(...arguments),this.location=C(Vs),this.urlSerializer=C($a),this.options=C(Ga,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=C(Xm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ir,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=uT(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof qs)this.stateMemento=this.createStateMemento();else if(r instanceof Cr)this.rawUrlTree=i.initialUrl;else if(r instanceof hd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Fa?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Dr&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof ka?this.restoreHistory(i,!0):r instanceof Qn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=M(M({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ma(e)))(s||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ma=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ma||{});function CT(t,e){t.events.pipe(Ke(n=>n instanceof Qn||n instanceof Dr||n instanceof ka||n instanceof Cr),B(n=>n instanceof Qn||n instanceof Cr?Ma.COMPLETE:(n instanceof Dr?n.code===0||n.code===1:!1)?Ma.REDIRECTING:Ma.FAILED),Ke(n=>n!==Ma.REDIRECTING),Un(1)).subscribe(()=>{e()})}function WL(t){throw t}var KL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},on=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=C(Gl),this.stateManager=C(DT),this.options=C(Ga,{optional:!0})||{},this.pendingTasks=C(Ia),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=C(Jm),this.urlSerializer=C($a),this.location=C(Vs),this.urlHandlingStrategy=C(Xm),this._events=new Ge,this.errorHandler=this.options.errorHandler||WL,this.navigated=!1,this.routeReuseStrategy=C(qL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=C(_d,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!C(Ed,{optional:!0}),this.eventsSubscription=new xe,this.isNgZoneEnabled=C(re)instanceof re&&re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Dr&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof Qn)this.navigated=!0;else if(i instanceof Va){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||HL(s.source)};this.scheduleNavigation(a,Ra,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}ZL(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ra,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=M({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Qm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=iT(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return sT(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Hs(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ra,null,i)}navigate(r,i={skipLocationChange:!1}){return YL(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=M({},KL):i===!1?s=M({},QL):s=i,Hs(r))return B0(this.currentUrlTree,r,s);let o=this.parseUrl(r);return B0(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.keys(r).reduce((i,s)=>{let o=r[s];return o!=null&&(i[s]=o),i},{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((h,f)=>{u=h,c=f});let d=this.pendingTasks.add();return CT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function YL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new O(4008,!1)}function ZL(t){return!(t instanceof Fa)&&!(t instanceof Va)}var wd=class{};var XL=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ke(r=>r instanceof Qn),dr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=zl(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return oe(s).pipe(cr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=F(null);let o=s.pipe(Le(a=>a===null?F(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return oe([o,a]).pipe(cr())}else return o})}};e.\u0275fac=function(i){return new(i||e)(I(on),I(Wl),I(Nt),I(wd),I(Zm))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),TT=new x(""),JL=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof qs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Qn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Cr&&r.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof fd&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new fd(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){mC()},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function e2(t){return t.routerState.root}function Wa(t,e){return{\u0275kind:t,\u0275providers:e}}function t2(){let t=C(Ot);return e=>{let n=t.get(Wn);if(e!==n.components[0])return;let r=t.get(on),i=t.get(bT);t.get(ey)===1&&r.initialNavigation(),t.get(AT,null,ee.Optional)?.setUpPreloading(),t.get(TT,null,ee.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var bT=new x("",{factory:()=>new Ge}),ey=new x("",{providedIn:"root",factory:()=>1});function n2(){return Wa(2,[{provide:ey,useValue:0},{provide:Yl,multi:!0,deps:[Ot],useFactory:e=>{let n=e.get(f0,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(on),s=e.get(bT);CT(i,()=>{r(!0)}),e.get(Jm).afterPreactivation=()=>(r(!0),s.closed?F(void 0):s),i.initialNavigation()}))}}])}function r2(){return Wa(3,[{provide:Yl,multi:!0,useFactory:()=>{let e=C(on);return()=>{e.setUpLocationChangeListener()}}},{provide:ey,useValue:2}])}var AT=new x("");function i2(t){return Wa(0,[{provide:AT,useExisting:XL},{provide:wd,useExisting:t}])}function s2(){return Wa(8,[q0,{provide:Ed,useExisting:q0}])}function o2(t){let e=[{provide:ET,useValue:UL},{provide:IT,useValue:M({skipNextTransition:!!t?.skipInitialTransition},t)}];return Wa(9,e)}var G0=new x("ROUTER_FORROOT_GUARD"),a2=[Vs,{provide:$a,useClass:Pa},on,Ha,{provide:zs,useFactory:e2,deps:[on]},Zm,[]],Ka=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[a2,[],{provide:_d,multi:!0,useValue:r},{provide:G0,useFactory:d2,deps:[[on,new xs,new Ig]]},{provide:Ga,useValue:i||{}},i?.useHash?c2():l2(),u2(),i?.preloadingStrategy?i2(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?h2(i):[],i?.bindToComponentInputs?s2().\u0275providers:[],i?.enableViewTransitions?o2().\u0275providers:[],f2()]}}static forChild(r){return{ngModule:e,providers:[{provide:_d,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(I(G0,8))},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({});let t=e;return t})();function u2(){return{provide:TT,useFactory:()=>{let t=C(w0),e=C(re),n=C(Ga),r=C(Jm),i=C($a);return n.scrollOffset&&t.setOffset(n.scrollOffset),new JL(i,r,t,e,n)}}}function c2(){return{provide:yi,useClass:g0}}function l2(){return{provide:yi,useClass:sm}}function d2(t){return"guarded"}function h2(t){return[t.initialNavigation==="disabled"?r2().\u0275providers:[],t.initialNavigation==="enabledBlocking"?n2().\u0275providers:[]]}var W0=new x("");function f2(){return[{provide:W0,useFactory:t2},{provide:Fs,multi:!0,useExisting:W0}]}var p2="firebase",g2="10.7.1";ur(p2,g2,"app");var Ks=new zn("ANGULARFIRE2_VERSION");var m2=(t,e)=>{let n=e?[e]:yE(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ei=class{constructor(){return m2(y2)}},y2="app-check";function ny(){}var Dd=class{zone;delegate;constructor(e,n=Zf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},ry=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ny,{},ny,ny)),n.pipe(be({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Cd=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Dd(Zone.current)),this.insideAngular=n.run(()=>new Dd(Zone.current,Qo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(I(re))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function v2(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Dt(t){return _2(v2())(t)}function _2(t){return function(n){return n=n.lift(new ry(t.ngZone)),n.pipe(Jt(t.outsideAngular),Bt(t.insideAngular))}}var I2=new Map,D2={activated:!1,tokenObservers:[]},C2={initialized:!1,enabled:!1};function an(t){return I2.get(t)||Object.assign({},D2)}function PT(){return C2}var T2="https://content-firebaseappcheck.googleapis.com/v1";var b2="exchangeDebugToken",MT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},w5=24*60*60*1e3;var sy=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new Vf,this.pending.promise.catch(n=>{}),yield A2(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Vf,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function A2(t){return new Promise(e=>{setTimeout(e,t)})}var S2={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},br=new gE("appCheck","AppCheck",S2);function OT(t){if(!an(t).activated)throw br.create("use-before-activation",{appName:t.name})}function kT(r,i){return y(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:s},u;try{u=yield fetch(t,a)}catch(f){throw br.create("fetch-network-error",{originalErrorMessage:f?.message})}if(u.status!==200)throw br.create("fetch-status-error",{httpStatus:u.status});let c;try{c=yield u.json()}catch(f){throw br.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=c.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw br.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function FT(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${T2}/projects/${n}/apps/${r}:${b2}?key=${i}`,body:{debug_token:e}}}var M2="firebase-app-check-database",x2=1,oy="firebase-app-check-store";var Td=null;function R2(){return Td||(Td=new Promise((t,e)=>{try{let n=indexedDB.open(M2,x2);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(br.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(oy,{keyPath:"compositeKey"})}}}catch(n){e(br.create("storage-open",{originalErrorMessage:n?.message}))}}),Td)}function N2(t,e){return P2(O2(t),e)}function P2(t,e){return y(this,null,function*(){let r=(yield R2()).transaction(oy,"readwrite"),s=r.objectStore(oy).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(br.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function O2(t){return`${t.options.appId}-${t.name}`}var ay=new yc("@firebase/app-check");function iy(t,e){return mc()?N2(t,e).catch(n=>{ay.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function VT(){return PT().enabled}function LT(){return y(this,null,function*(){let t=PT();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var k2={error:"UNKNOWN_ERROR"};function F2(t){return dE.encodeString(JSON.stringify(t),!1)}function uy(t,e=!1){return y(this,null,function*(){let n=t.app;OT(n);let r=an(n),i=r.token,s;if(i&&!Qa(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Qa(u)?i=u:yield iy(n,void 0))}if(!e&&i&&Qa(i))return{token:i.token};let o=!1;if(VT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=kT(FT(n,yield LT()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let u=yield r.exchangeTokenPromise;return yield iy(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield an(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?ay.warn(u.message):ay.error(u),s=u}let a;return i?s?Qa(i)?a={token:i.token,internalError:s}:a=RT(s):(a={token:i.token},r.token=i,yield iy(n,i)):a=RT(s),o&&B2(n,a),a})}function V2(t){return y(this,null,function*(){let e=t.app;OT(e);let{provider:n}=an(e);if(VT()){let r=yield LT(),{token:i}=yield kT(FT(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function L2(t,e,n,r){let{app:i}=t,s=an(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Qa(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),xT(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>xT(t))}function jT(t,e){let n=an(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function xT(t){let{app:e}=t,n=an(e),r=n.tokenRefresher;r||(r=j2(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function j2(t){let{app:e}=t;return new sy(()=>y(this,null,function*(){let n=an(e),r;if(n.token?r=yield uy(t,!0):r=yield uy(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=an(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},MT.RETRIAL_MIN_WAIT,MT.RETRIAL_MAX_WAIT)}function B2(t,e){let n=an(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Qa(t){return t.expireTimeMillis-Date.now()>0}function RT(t){return{token:F2(k2),error:t}}var cy=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=an(this.app);for(let n of e)jT(this.app,n.next);return Promise.resolve()}};function U2(t,e){return new cy(t,e)}function $2(t){return{getToken:e=>uy(t,e),getLimitedUseToken:()=>V2(t),addTokenListener:e=>L2(t,"INTERNAL",e),removeTokenListener:e=>jT(t.app,e)}}var H2="@firebase/app-check",q2="0.8.1";var z2="app-check",NT="app-check-internal";function G2(){zo(new Jr(z2,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return U2(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(NT).initialize()})),zo(new Jr(NT,t=>{let e=t.getProvider("app-check").getImmediate();return $2(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ur(H2,q2)}G2();var W2=["localhost","0.0.0.0","127.0.0.1"],N5=typeof window<"u"&&W2.includes(window.location.hostname);var K2="firebase",Q2="10.7.1";_t.registerVersion(K2,Q2,"app-compat");var Y2=["ngOnDestroy"],$T=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(Y2.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let u=a?.[s];return typeof u=="function"?u.bind(a):u?.then?u.then(c=>n.run(()=>c)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,c)=>o.then(l=>{let d=l?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,d),d})})})});var bd=class{constructor(e){return e}},Qs=new x("angularfire2.app.options"),Ys=new x("angularfire2.app.name");function Ya(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let o=_t.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>_t.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;Z2("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new bd(o)}var Z2=(t,...e)=>{Jg()&&typeof console<"u"&&console[t](...e)},X2={provide:bd,useFactory:Ya,deps:[Qs,re,[new xs,Ys]]},HT=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Qs,useValue:n},{provide:Ys,useValue:r}]}}constructor(n){_t.registerVersion("angularfire",Ks.full,"core"),_t.registerVersion("angularfire",Ks.full,"app-compat"),_t.registerVersion("angular",XC.full,n.toString())}static \u0275fac=function(r){return new(r||t)(I(ht))};static \u0275mod=Oe({type:t});static \u0275inj=Pe({providers:[X2]})}return t})();function Ad(t,e,n,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return J2(i,o)||(UT("error",`${e} was already initialized on the ${n} Firebase App with different settings.${ej?" You may need to reload as Firebase is not HMR aware.":""}`),UT("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function J2(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var ej=typeof module<"u"&&!!module.hot,UT=(t,...e)=>{Jg()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var ly=new x("angularfire2.auth.use-emulator"),dy=new x("angularfire2.auth.settings"),hy=new x("angularfire2.auth.tenant-id"),fy=new x("angularfire2.auth.langugage-code"),py=new x("angularfire2.auth.use-device-language"),gy=new x("angularfire.auth.persistence"),my=(t,e,n,r,i,s,o,a)=>Ad(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(let[c,l]of Object.entries(o))u.settings[c]=l;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]),Sd=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,c,l,d,h,f){let m=new Ge,v=F(void 0).pipe(Bt(o.outsideAngular),Ce(()=>s.runOutsideAngular(()=>import("./chunk-KTRENSU5.js"))),B(()=>Ya(n,s,r)),B(_=>my(_,s,a,c,l,d,u,h)),qc({bufferSize:1,refCount:!1}));if(vi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{v.pipe(bt()).subscribe();let _=v.pipe(Ce(S=>S.getRedirectResult().then(j=>j,()=>null)),Dt,qc({bufferSize:1,refCount:!1})),D=v.pipe(Ce(S=>new J(j=>({unsubscribe:s.runOutsideAngular(()=>S.onAuthStateChanged($=>j.next($),$=>j.error($),()=>j.complete()))})))),N=v.pipe(Ce(S=>new J(j=>({unsubscribe:s.runOutsideAngular(()=>S.onIdTokenChanged($=>j.next($),$=>j.error($),()=>j.complete()))}))));this.authState=_.pipe(zc(D),Jt(o.outsideAngular),Bt(o.insideAngular)),this.user=_.pipe(zc(N),Jt(o.outsideAngular),Bt(o.insideAngular)),this.idToken=this.user.pipe(Ce(S=>S?oe(S.getIdToken()):F(null))),this.idTokenResult=this.user.pipe(Ce(S=>S?oe(S.getIdTokenResult()):F(null))),this.credential=tp(_,m,this.authState.pipe(Ke(S=>!S))).pipe(B(S=>S?.user?S:null),Jt(o.outsideAngular),Bt(o.insideAngular))}return $T(this,v,s,{spy:{apply:(_,D,N)=>{(_.startsWith("signIn")||_.startsWith("createUser"))&&N.then(S=>m.next(S))}}})}static \u0275fac=function(r){return new(r||t)(I(Qs),I(Ys,8),I(ht),I(re),I(Cd),I(ly,8),I(dy,8),I(hy,8),I(fy,8),I(py,8),I(gy,8),I(Ei,8))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Ar=(()=>{let e=class e{constructor(r,i){this.fireauth=r,this.router=i}login(r,i){this.fireauth.signInWithEmailAndPassword(r,i).then(s=>{localStorage.setItem("token","true"),s.user?.emailVerified==!0?this.router.navigate(["/dashboard"]):this.router.navigate(["/verify-email"])},s=>{alert("Something Went wrong"),this.router.navigate(["/login"])})}register(r,i){this.fireauth.createUserWithEmailAndPassword(r,i).then(s=>{alert("Registration Successful"),this.router.navigate(["/login"]),this.SendEmailForVerification(s.user)},s=>{alert(s.message),this.router.navigate(["/register"])})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},r=>{alert("Logout Successful")})}forgotpassword(r){this.fireauth.sendPasswordResetEmail(r).then(()=>{this.router.navigate(["/verify-email"])},i=>{alert("Something went wrong")})}SendEmailForVerification(r){r.sendEmailVerification().then(i=>{this.router.navigate(["/verify-email"])},i=>{alert("something went wrong. Not able to send mail.")})}};e.\u0275fac=function(i){return new(i||e)(I(Sd),I(on))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var XT=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(se(Rs),se(pi))},e.\u0275dir=Pt({type:e});let t=e;return t})(),tj=(()=>{let e=class e extends XT{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ma(e)))(s||e)}})(),e.\u0275dir=Pt({type:e,features:[Er]});let t=e;return t})(),JT=new x("NgValueAccessor");var nj={provide:JT,useExisting:bs(()=>Tn),multi:!0};function rj(){let t=In()?In().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var ij=new x("CompositionEventMode"),Tn=(()=>{let e=class e extends XT{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!rj())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(se(Rs),se(pi),se(ij,8))},e.\u0275dir=Pt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Ee("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[ql([nj]),Er]});let t=e;return t})();var eb=new x("NgValidators"),tb=new x("NgAsyncValidators");function nb(t){return t!=null}function rb(t){return mi(t)?oe(t):t}function ib(t){let e={};return t.forEach(n=>{e=n!=null?M(M({},e),n):e}),Object.keys(e).length===0?null:e}function sb(t,e){return e.map(n=>n(t))}function sj(t){return!t.validate}function ob(t){return t.map(e=>sj(e)?e:n=>e.validate(n))}function oj(t){if(!t)return null;let e=t.filter(nb);return e.length==0?null:function(n){return ib(sb(n,e))}}function vy(t){return t!=null?oj(ob(t)):null}function aj(t){if(!t)return null;let e=t.filter(nb);return e.length==0?null:function(n){let r=sb(n,e).map(rb);return ep(r).pipe(B(ib))}}function _y(t){return t!=null?aj(ob(t)):null}function zT(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function uj(t){return t._rawValidators}function cj(t){return t._rawAsyncValidators}function yy(t){return t?Array.isArray(t)?t:[t]:[]}function Rd(t,e){return Array.isArray(t)?t.includes(e):t===e}function GT(t,e){let n=yy(e);return yy(t).forEach(i=>{Rd(n,i)||n.push(i)}),n}function WT(t,e){return yy(e).filter(n=>!Rd(t,n))}var Nd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_y(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Xs=class extends Nd{get formDirective(){return null}get path(){return null}},eu=class extends Nd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Pd=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},lj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},v8=de(M({},lj),{"[class.ng-submitted]":"isSubmitted"}),Sr=(()=>{let e=class e extends Pd{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(se(eu,2))},e.\u0275dir=Pt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Ul("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Er]});let t=e;return t})(),Mr=(()=>{let e=class e extends Pd{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(se(Xs,10))},e.\u0275dir=Pt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Ul("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Er]});let t=e;return t})();var Za="VALID",xd="INVALID",Zs="PENDING",Xa="DISABLED";function ab(t){return(Fd(t)?t.validators:t)||null}function dj(t){return Array.isArray(t)?vy(t):t||null}function ub(t,e){return(Fd(e)?e.asyncValidators:t)||null}function hj(t){return Array.isArray(t)?_y(t):t||null}function Fd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function fj(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new O(1e3,"");if(!r[n])throw new O(1001,"")}function pj(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new O(1002,"")})}var Od=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Za}get invalid(){return this.status===xd}get pending(){return this.status==Zs}get disabled(){return this.status===Xa}get enabled(){return this.status!==Xa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(GT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(GT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(WT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(WT(e,this._rawAsyncValidators))}hasValidator(e){return Rd(this._rawValidators,e)}hasAsyncValidator(e){return Rd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Zs,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Xa,this.errors=null,this._forEachChild(r=>{r.disable(de(M({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(M({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Za,this._forEachChild(r=>{r.enable(de(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(M({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Za||this.status===Zs)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xa:Za}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Zs,this._hasOwnPendingAsyncValidator=!0;let n=rb(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new je,this.statusChanges=new je}_calculateStatus(){return this._allControlsDisabled()?Xa:this.errors?xd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zs)?Zs:this._anyControlsHaveStatus(xd)?xd:Za}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Fd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=dj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=hj(this._rawAsyncValidators)}},kd=class extends Od{constructor(e,n,r){super(ab(n),ub(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){pj(this,!0,e),Object.keys(e).forEach(r=>{fj(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Vd=new x("CallSetDisabledState",{providedIn:"root",factory:()=>Ld}),Ld="always";function gj(t,e){return[...e.path,t]}function cb(t,e,n=Ld){lb(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),yj(t,e),_j(t,e),vj(t,e),mj(t,e)}function KT(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function mj(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function lb(t,e){let n=uj(t);e.validator!==null?t.setValidators(zT(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=cj(t);e.asyncValidator!==null?t.setAsyncValidators(zT(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();KT(e._rawValidators,i),KT(e._rawAsyncValidators,i)}function yj(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&db(t,e)})}function vj(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&db(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function db(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function _j(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function wj(t,e){t==null,lb(t,e)}function Ej(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Ij(t){return Object.getPrototypeOf(t.constructor)===tj}function Dj(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Cj(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Tn?n=s:Ij(s)?r=s:i=s}),i||r||n||null}var Tj={provide:Xs,useExisting:bs(()=>Yn)},Ja=(()=>Promise.resolve())(),Yn=(()=>{let e=class e extends Xs{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new je,this.form=new kd({},vy(r),_y(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Ja.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),cb(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Ja.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Ja.then(()=>{let i=this._findContainer(r.path),s=new kd({});wj(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Ja.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Ja.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,Dj(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(se(eb,10),se(tb,10),se(Vd,8))},e.\u0275dir=Pt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Ee("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ql([Tj]),Er]});let t=e;return t})();function QT(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function YT(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var bj=class extends Od{constructor(e=null,n,r){super(ab(n),ub(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(YT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){QT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){QT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){YT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Aj={provide:eu,useExisting:bs(()=>Zn)},ZT=(()=>Promise.resolve())(),Zn=(()=>{let e=class e extends eu{constructor(r,i,s,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new bj,this._registered=!1,this.name="",this.update=new je,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Cj(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Ej(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){cb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){ZT.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Zl(i);ZT.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?gj(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(se(Xs,9),se(eb,10),se(tb,10),se(JT,10),se(Ps,8),se(Vd,8))},e.\u0275dir=Pt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ql([Aj]),Er,Ss]});let t=e;return t})(),xr=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Pt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var Sj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({});let t=e;return t})();var Mj=new x("NgModelWithFormControlWarning");var hb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({imports:[Sj]});let t=e;return t})();var fb=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Vd,useValue:r.callSetDisabledState??Ld}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({imports:[hb]});let t=e;return t})(),pb=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Mj,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Vd,useValue:r.callSetDisabledState??Ld}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({imports:[hb]});let t=e;return t})();var gb=(()=>{let e=class e{constructor(r){this.auth=r,this.email="",this.password=""}login(){if(this.email==""){alert("Please enter the email");return}if(this.password==""){alert("Please enter the password ");return}this.auth.login(this.email,this.password),this.email="",this.password=""}};e.\u0275fac=function(i){return new(i||e)(se(Ar))},e.\u0275cmp=It({type:e,selectors:[["app-login"]],decls:29,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col","md-6"],["href","/register",2,"text-decoration","none"],[1,"text-danger"],["href","/forgot-password",1,"text-dark",2,"text-decoration","none"]],template:function(i,s){i&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),G(9,"Login"),U()(),V(10,"div",6)(11,"label",8),G(12,"Email "),U(),V(13,"input",9),Ee("ngModelChange",function(a){return s.email=a}),U()(),V(14,"div",6)(15,"label",10),G(16,"Password"),U(),V(17,"input",11),Ee("ngModelChange",function(a){return s.password=a}),U()(),V(18,"button",12),Ee("click",function(){return s.login()}),G(19,"Login"),U(),V(20,"div",13)(21,"div",14)(22,"a",15),G(23,"Need Account ? "),V(24,"span",16),G(25,"Register"),U()()(),V(26,"div",14)(27,"a",17),G(28,"Forgot Password ?"),U()()()()()()()()()()),i&2&&(Qe(13),ft("ngModel",s.email),Qe(4),ft("ngModel",s.password))},dependencies:[xr,Tn,Sr,Mr,Zn,Yn]});let t=e;return t})();var xj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn={},b,Uy=Uy||{},z=xj||self;function Xd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function gu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Rj(t){return Object.prototype.hasOwnProperty.call(t,wy)&&t[wy]||(t[wy]=++Nj)}var wy="closure_uid_"+(1e9*Math.random()>>>0),Nj=0;function Pj(t,e,n){return t.call.apply(t.bind,arguments)}function Oj(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function st(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?st=Pj:st=Oj,st.apply(null,arguments)}function jd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Xe(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Rr(){this.s=this.s,this.o=this.o}var kj=0;Rr.prototype.s=!1;Rr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),kj!=0)&&Rj(this)};Rr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Sb=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function $y(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function mb(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Xd(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function ot(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var Fj=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};z.addEventListener("test",n,e),z.removeEventListener("test",n,e)}catch{}return t}();function au(t){return/^[\s\xa0]*$/.test(t)}function Jd(){var t=z.navigator;return t&&(t=t.userAgent)?t:""}function bn(t){return Jd().indexOf(t)!=-1}function Hy(t){return Hy[" "](t),t}Hy[" "]=function(){};function Vj(t,e){var n=TB;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Lj=bn("Opera"),no=bn("Trident")||bn("MSIE"),Mb=bn("Edge"),Ty=Mb||no,xb=bn("Gecko")&&!(Jd().toLowerCase().indexOf("webkit")!=-1&&!bn("Edge"))&&!(bn("Trident")||bn("MSIE"))&&!bn("Edge"),jj=Jd().toLowerCase().indexOf("webkit")!=-1&&!bn("Edge");function Rb(){var t=z.document;return t?t.documentMode:void 0}var by;e:{if(Bd="",Ud=function(){var t=Jd();if(xb)return/rv:([^\);]+)(\)|;)/.exec(t);if(Mb)return/Edge\/([\d\.]+)/.exec(t);if(no)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(jj)return/WebKit\/(\S+)/.exec(t);if(Lj)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Ud&&(Bd=Ud?Ud[1]:""),no&&($d=Rb(),$d!=null&&$d>parseFloat(Bd))){by=String($d);break e}by=Bd}var Bd,Ud,$d,Ay;z.document&&no?(Ey=Rb(),Ay=Ey||parseInt(by,10)||void 0):Ay=void 0;var Ey,Bj=Ay;function uu(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(xb){e:{try{Hy(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Uj[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&uu.$.h.call(this)}}Xe(uu,ot);var Uj={2:"touch",3:"pen",4:"mouse"};uu.prototype.h=function(){uu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var mu="closure_listenable_"+(1e6*Math.random()|0),$j=0;function Hj(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++$j,this.fa=this.ia=!1}function eh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function qy(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function qj(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function Nb(t){let e={};for(let n in t)e[n]=t[n];return e}var yb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pb(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<yb.length;s++)n=yb[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function th(t){this.src=t,this.g={},this.h=0}th.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=My(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Hj(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Sy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Sb(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(eh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function My(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var zy="closure_lm_"+(1e6*Math.random()|0),Iy={};function Ob(t,e,n,r,i){if(r&&r.once)return Fb(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ob(t,e[s],n,r,i);return null}return n=Ky(n),t&&t[mu]?t.O(e,n,gu(r)?!!r.capture:!!r,i):kb(t,e,n,!1,r,i)}function kb(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=gu(i)?!!i.capture:!!i,a=Wy(t);if(a||(t[zy]=a=new th(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=zj(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Fj||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Lb(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function zj(){function t(n){return e.call(t.src,t.listener,n)}let e=Gj;return t}function Fb(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Fb(t,e[s],n,r,i);return null}return n=Ky(n),t&&t[mu]?t.P(e,n,gu(r)?!!r.capture:!!r,i):kb(t,e,n,!0,r,i)}function Vb(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Vb(t,e[s],n,r,i);else r=gu(r)?!!r.capture:!!r,n=Ky(n),t&&t[mu]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=My(s,n,r,i),-1<n&&(eh(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Wy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=My(e,n,r,i)),(n=-1<t?e[t]:null)&&Gy(n))}function Gy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[mu])Sy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Lb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Wy(e))?(Sy(n,t),n.h==0&&(n.src=null,e[zy]=null)):eh(t)}}}function Lb(t){return t in Iy?Iy[t]:Iy[t]="on"+t}function Gj(t,e){if(t.fa)t=!0;else{e=new uu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Gy(t),t=n.call(r,e)}return t}function Wy(t){return t=t[zy],t instanceof th?t:null}var Dy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ky(t){return typeof t=="function"?t:(t[Dy]||(t[Dy]=function(e){return t.handleEvent(e)}),t[Dy])}function Ze(){Rr.call(this),this.i=new th(this),this.S=this,this.J=null}Xe(Ze,Rr);Ze.prototype[mu]=!0;Ze.prototype.removeEventListener=function(t,e,n,r){Vb(this,t,e,n,r)};function rt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var i=e;e=new ot(r,t),Pb(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Hd(o,r,!0,e)&&i}if(o=e.g=t,i=Hd(o,r,!0,e)&&i,i=Hd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Hd(o,r,!1,e)&&i}Ze.prototype.N=function(){if(Ze.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)eh(n[r]);delete t.g[e],t.h--}}this.J=null};Ze.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ze.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Hd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&Sy(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Qy=z.JSON.stringify,xy=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Wj(){var t=Yy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ry=class{constructor(){this.h=this.g=null}add(e,n){let r=jb.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},jb=new xy(()=>new Ny,t=>t.reset()),Ny=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Kj(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Qj(t){z.setTimeout(()=>{throw t},0)}var cu,lu=!1,Yy=new Ry,Bb=()=>{let t=z.Promise.resolve(void 0);cu=()=>{t.then(Yj)}},Yj=()=>{for(var t;t=Wj();){try{t.h.call(t.g)}catch(n){Qj(n)}var e=jb;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}lu=!1};function nh(t,e){Ze.call(this),this.h=t||1,this.g=e||z,this.j=st(this.qb,this),this.l=Date.now()}Xe(nh,Ze);b=nh.prototype;b.ga=!1;b.T=null;b.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),rt(this,"tick"),this.ga&&(Zy(this),this.start()))}};b.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Zy(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}b.N=function(){nh.$.N.call(this),Zy(this),delete this.g};function Xy(t,e,n){if(typeof t=="function")n&&(t=st(t,n));else if(t&&typeof t.handleEvent=="function")t=st(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:z.setTimeout(t,e||0)}function Ub(t){t.g=Xy(()=>{t.g=null,t.i&&(t.i=!1,Ub(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Py=class extends Rr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ub(this)}N(){super.N(),this.g&&(z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function du(t){Rr.call(this),this.h=t,this.g={}}Xe(du,Rr);var vb=[];function $b(t,e,n,r){Array.isArray(n)||(n&&(vb[0]=n.toString()),n=vb);for(var i=0;i<n.length;i++){var s=Ob(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Hb(t){qy(t.g,function(e,n){this.g.hasOwnProperty(n)&&Gy(e)},t),t.g={}}du.prototype.N=function(){du.$.N.call(this),Hb(this)};du.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function rh(){this.g=!0}rh.prototype.Ea=function(){this.g=!1};function Zj(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+c+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Xj(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function eo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+eB(t,n)+(r?" "+r:"")})}function Jj(t,e){t.info(function(){return"TIMEOUT: "+e})}rh.prototype.info=function(){};function eB(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Qy(n)}catch{return e}}var Ti={},_b=null;function ih(){return _b=_b||new Ze}Ti.Ta="serverreachability";function qb(t){ot.call(this,Ti.Ta,t)}Xe(qb,ot);function hu(t){let e=ih();rt(e,new qb(e))}Ti.STAT_EVENT="statevent";function zb(t,e){ot.call(this,Ti.STAT_EVENT,t),this.stat=e}Xe(zb,ot);function gt(t){let e=ih();rt(e,new zb(e,t))}Ti.Ua="timingevent";function Gb(t,e){ot.call(this,Ti.Ua,t),this.size=e}Xe(Gb,ot);function yu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return z.setTimeout(function(){t()},e)}var sh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Wb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Jy(){}Jy.prototype.h=null;function wb(t){return t.h||(t.h=t.i())}function Kb(){}var vu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ev(){ot.call(this,"d")}Xe(ev,ot);function tv(){ot.call(this,"c")}Xe(tv,ot);var Oy;function oh(){}Xe(oh,Jy);oh.prototype.g=function(){return new XMLHttpRequest};oh.prototype.i=function(){return{}};Oy=new oh;function _u(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new du(this),this.P=tB,t=Ty?125:void 0,this.V=new nh(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Qb}function Qb(){this.i=null,this.g="",this.h=!1}var tB=45e3,Yb={},ky={};b=_u.prototype;b.setTimeout=function(t){this.P=t};function Fy(t,e,n){t.L=1,t.A=uh(Jn(e)),t.u=n,t.S=!0,Zb(t,null)}function Zb(t,e){t.G=Date.now(),wu(t),t.B=Jn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),sA(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Qb,t.g=bA(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Py(st(t.Pa,t,t.g),t.O)),$b(t.U,t.g,"readystatechange",t.nb),e=t.I?Nb(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),hu(),Zj(t.j,t.v,t.B,t.m,t.W,t.u)}b.nb=function(t){t=t.target;let e=this.M;e&&An(t)==3?e.l():this.Pa(t)};b.Pa=function(t){try{if(t==this.g)e:{let l=An(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Ty||this.g&&(this.h.h||this.g.ja()||Cb(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?hu(3):hu(2)),ah(this);var n=this.g.da();this.ca=n;t:if(Xb(this)){var r=Cb(this.g);t="";var i=r.length,s=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ii(this),ou(this);var o="";break t}this.h.i=new z.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Xj(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!au(a)){var c=a;break t}}c=null}if(n=c)eo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vy(this,n);else{this.i=!1,this.s=3,gt(12),Ii(this),ou(this);break e}}this.S?(Jb(this,l,o),Ty&&this.i&&l==3&&($b(this.U,this.V,"tick",this.mb),this.V.start())):(eo(this.j,this.m,o,null),Vy(this,o)),l==4&&Ii(this),this.i&&!this.J&&(l==4?IA(this.l,this):(this.i=!1,wu(this)))}else IB(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Ii(this),ou(this)}}}catch{}finally{}};function Xb(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Jb(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=nB(t,n),i==ky){e==4&&(t.s=4,gt(14),r=!1),eo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Yb){t.s=4,gt(15),eo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else eo(t.j,t.m,i,null),Vy(t,i);Xb(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,gt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),av(e),e.M=!0,gt(11))):(eo(t.j,t.m,n,"[Invalid Chunked Response]"),Ii(t),ou(t))}b.mb=function(){if(this.g){var t=An(this.g),e=this.g.ja();this.o<e.length&&(ah(this),Jb(this,t,e),this.i&&t!=4&&wu(this))}};function nB(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?ky:(n=Number(e.substring(n,r)),isNaN(n)?Yb:(r+=1,r+n>e.length?ky:(e=e.slice(r,r+n),t.o=r+n,e)))}b.cancel=function(){this.J=!0,Ii(this)};function wu(t){t.Y=Date.now()+t.P,eA(t,t.P)}function eA(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=yu(st(t.lb,t),e)}function ah(t){t.C&&(z.clearTimeout(t.C),t.C=null)}b.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(Jj(this.j,this.B),this.L!=2&&(hu(),gt(17)),Ii(this),this.s=2,ou(this)):eA(this,this.Y-t)};function ou(t){t.l.H==0||t.J||IA(t.l,t)}function Ii(t){ah(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Zy(t.V),Hb(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Vy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Ly(n.i,t))){if(!t.K&&Ly(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Kd(n),dh(n);else break e;ov(n),gt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=yu(st(n.ib,n),6e3));if(1>=uA(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Di(n,11)}else if((t.K||n.g==t)&&Kd(n),!au(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(nv(s,s.h),s.h=null))}if(r.F){let v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,ve(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=TA(r,r.J?r.pa:null,r.Y),o.K){cA(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(ah(a),wu(a)),r.g=o}else wA(r);0<n.j.length&&hh(n)}else c[0]!="stop"&&c[0]!="close"||Di(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Di(n,7):sv(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}hu(4)}catch{}}function rB(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Xd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function iB(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Xd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function tA(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Xd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=iB(t),r=rB(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var nA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sB(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ci(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ci){this.h=t.h,Gd(this,t.j),this.s=t.s,this.g=t.g,Wd(this,t.m),this.l=t.l;var e=t.i,n=new fu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Eb(this,n),this.o=t.o}else t&&(e=String(t).match(nA))?(this.h=!1,Gd(this,e[1]||"",!0),this.s=iu(e[2]||""),this.g=iu(e[3]||"",!0),Wd(this,e[4]),this.l=iu(e[5]||"",!0),Eb(this,e[6]||"",!0),this.o=iu(e[7]||"")):(this.h=!1,this.i=new fu(null,this.h))}Ci.prototype.toString=function(){var t=[],e=this.j;e&&t.push(su(e,Ib,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(su(e,Ib,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(su(n,n.charAt(0)=="/"?uB:aB,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",su(n,lB)),t.join("")};function Jn(t){return new Ci(t)}function Gd(t,e,n){t.j=n?iu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Wd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Eb(t,e,n){e instanceof fu?(t.i=e,dB(t.i,t.h)):(n||(e=su(e,cB)),t.i=new fu(e,t.h))}function ve(t,e,n){t.i.set(e,n)}function uh(t){return ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function iu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function su(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,oB),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function oB(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Ib=/[#\/\?@]/g,aB=/[#\?:]/g,uB=/[#\?]/g,cB=/[#\?@]/g,lB=/#/g;function fu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Nr(t){t.g||(t.g=new Map,t.h=0,t.i&&sB(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}b=fu.prototype;b.add=function(t,e){Nr(this),this.i=null,t=ro(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function rA(t,e){Nr(t),e=ro(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function iA(t,e){return Nr(t),e=ro(t,e),t.g.has(e)}b.forEach=function(t,e){Nr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};b.ta=function(){Nr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};b.Z=function(t){Nr(this);let e=[];if(typeof t=="string")iA(this,t)&&(e=e.concat(this.g.get(ro(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};b.set=function(t,e){return Nr(this),this.i=null,t=ro(this,t),iA(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};b.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function sA(t,e,n){rA(t,e),0<n.length&&(t.i=null,t.g.set(ro(t,e),$y(n)),t.h+=n.length)}b.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ro(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function dB(t,e){e&&!t.j&&(Nr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(rA(this,r),sA(this,i,n))},t)),t.j=e}var hB=class{constructor(t,e){this.g=t,this.map=e}};function oA(t){this.l=t||fB,z.PerformanceNavigationTiming?(t=z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(z.g&&z.g.Ka&&z.g.Ka()&&z.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var fB=10;function aA(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function uA(t){return t.h?1:t.g?t.g.size:0}function Ly(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function nv(t,e){t.g?t.g.add(e):t.h=e}function cA(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}oA.prototype.cancel=function(){if(this.i=lA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function lA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return $y(t.i)}var pB=class{stringify(t){return z.JSON.stringify(t,void 0)}parse(t){return z.JSON.parse(t,void 0)}};function gB(){this.g=new pB}function mB(t,e,n){let r=n||"";try{tA(t,function(i,s){let o=i;gu(i)&&(o=Qy(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yB(t,e){let n=new rh;if(z.Image){let r=new Image;r.onload=jd(qd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=jd(qd,n,r,"TestLoadImage: error",!1,e),r.onabort=jd(qd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=jd(qd,n,r,"TestLoadImage: timeout",!1,e),z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function qd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Eu(t){this.l=t.ec||null,this.j=t.ob||!1}Xe(Eu,Jy);Eu.prototype.g=function(){return new ch(this.l,this.j)};Eu.prototype.i=function(t){return function(){return t}}({});function ch(t,e){Ze.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=rv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xe(ch,Ze);var rv=0;b=ch.prototype;b.open=function(t,e){if(this.readyState!=rv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,pu(this)};b.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};b.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Iu(this)),this.readyState=rv};b.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,pu(this)),this.g&&(this.readyState=3,pu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function dA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}b.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Iu(this):pu(this),this.readyState==3&&dA(this)}};b.Za=function(t){this.g&&(this.response=this.responseText=t,Iu(this))};b.Ya=function(t){this.g&&(this.response=t,Iu(this))};b.ka=function(){this.g&&Iu(this)};function Iu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,pu(t)}b.setRequestHeader=function(t,e){this.v.append(t,e)};b.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};b.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function pu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ch.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var vB=z.JSON.parse;function Ae(t){Ze.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=hA,this.L=this.M=!1}Xe(Ae,Ze);var hA="",_B=/^https?$/i,wB=["POST","PUT"];b=Ae.prototype;b.Oa=function(t){this.M=t};b.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Oy.g(),this.C=this.u?wb(this.u):wb(Oy),this.g.onreadystatechange=st(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Db(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=z.FormData&&t instanceof z.FormData,!(0<=Sb(wB,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{gA(this),0<this.B&&((this.L=EB(this.g))?(this.g.timeout=this.B,this.g.ontimeout=st(this.ua,this)):this.A=Xy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Db(this,s)}};function EB(t){return no&&typeof t.timeout=="number"&&t.ontimeout!==void 0}b.ua=function(){typeof Uy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rt(this,"timeout"),this.abort(8))};function Db(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,fA(t),lh(t)}function fA(t){t.F||(t.F=!0,rt(t,"complete"),rt(t,"error"))}b.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,rt(this,"complete"),rt(this,"abort"),lh(this))};b.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lh(this,!0)),Ae.$.N.call(this)};b.La=function(){this.s||(this.G||this.v||this.l?pA(this):this.kb())};b.kb=function(){pA(this)};function pA(t){if(t.h&&typeof Uy<"u"&&(!t.C[1]||An(t)!=4||t.da()!=2)){if(t.v&&An(t)==4)Xy(t.La,0,t);else if(rt(t,"readystatechange"),An(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(nA)[1]||null;!i&&z.self&&z.self.location&&(i=z.self.location.protocol.slice(0,-1)),r=!_B.test(i?i.toLowerCase():"")}n=r}if(n)rt(t,"complete"),rt(t,"success");else{t.m=6;try{var s=2<An(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",fA(t)}}finally{lh(t)}}}}function lh(t,e){if(t.g){gA(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||rt(t,"ready");try{n.onreadystatechange=r}catch{}}}function gA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(z.clearTimeout(t.A),t.A=null)}b.isActive=function(){return!!this.g};function An(t){return t.g?t.g.readyState:0}b.da=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}};b.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};b.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),vB(e)}};function Cb(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case hA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function IB(t){let e={};t=(t.g&&2<=An(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(au(t[r]))continue;var n=Kj(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}qj(e,function(r){return r.join(", ")})}b.Ia=function(){return this.m};b.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function mA(t){let e="";return qy(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function iv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=mA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ve(t,e,n))}function nu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function yA(t){this.Ga=0,this.j=[],this.l=new rh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=nu("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=nu("baseRetryDelayMs",5e3,t),this.hb=nu("retryDelaySeedMs",1e4,t),this.eb=nu("forwardChannelMaxRetries",2,t),this.xa=nu("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new oA(t&&t.concurrentRequestLimit),this.Ja=new gB,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}b=yA.prototype;b.ra=8;b.H=1;function sv(t){if(vA(t),t.H==3){var e=t.W++,n=Jn(t.I);if(ve(n,"SID",t.K),ve(n,"RID",e),ve(n,"TYPE","terminate"),Du(t,n),e=new _u(t,t.l,e),e.L=2,e.A=uh(Jn(n)),n=!1,z.navigator&&z.navigator.sendBeacon)try{n=z.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&z.Image&&(new Image().src=e.A,n=!0),n||(e.g=bA(e.l,null),e.g.ha(e.A)),e.G=Date.now(),wu(e)}CA(t)}function dh(t){t.g&&(av(t),t.g.cancel(),t.g=null)}function vA(t){dh(t),t.u&&(z.clearTimeout(t.u),t.u=null),Kd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&z.clearTimeout(t.m),t.m=null)}function hh(t){if(!aA(t.i)&&!t.m){t.m=!0;var e=t.Na;cu||Bb(),lu||(cu(),lu=!0),Yy.add(e,t),t.C=0}}function DB(t,e){return uA(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=yu(st(t.Na,t,e),DA(t,t.C)),t.C++,!0)}b.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new _u(this,this.l,t),s=this.s;if(this.U&&(s?(s=Nb(s),Pb(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=_A(this,i,e),n=Jn(this.I),ve(n,"RID",t),ve(n,"CVER",22),this.F&&ve(n,"X-HTTP-Session-Id",this.F),Du(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(mA(s)))+"&"+e:this.o&&iv(n,this.o,s)),nv(this.i,i),this.bb&&ve(n,"TYPE","init"),this.P?(ve(n,"$req",e),ve(n,"SID","null"),i.aa=!0,Fy(i,n,null)):Fy(i,n,e),this.H=2}}else this.H==3&&(t?Tb(this,t):this.j.length==0||aA(this.i)||Tb(this))};function Tb(t,e){var n;e?n=e.m:n=t.W++;let r=Jn(t.I);ve(r,"SID",t.K),ve(r,"RID",n),ve(r,"AID",t.V),Du(t,r),t.o&&t.s&&iv(r,t.o,t.s),n=new _u(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=_A(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),nv(t.i,n),Fy(n,r,e)}function Du(t,e){t.na&&qy(t.na,function(n,r){ve(e,r,n)}),t.h&&tA({},function(n,r){ve(e,r,n)})}function _A(t,e,n){n=Math.min(t.j.length,n);var r=t.h?st(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{mB(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function wA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;cu||Bb(),lu||(cu(),lu=!0),Yy.add(e,t),t.A=0}}function ov(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=yu(st(t.Ma,t),DA(t,t.A)),t.A++,!0)}b.Ma=function(){if(this.u=null,EA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=yu(st(this.jb,this),t)}};b.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gt(10),dh(this),EA(this))};function av(t){t.B!=null&&(z.clearTimeout(t.B),t.B=null)}function EA(t){t.g=new _u(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Jn(t.wa);ve(e,"RID","rpc"),ve(e,"SID",t.K),ve(e,"AID",t.V),ve(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ve(e,"TO",t.qa),ve(e,"TYPE","xmlhttp"),Du(t,e),t.o&&t.s&&iv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=uh(Jn(e)),n.u=null,n.S=!0,Zb(n,t)}b.ib=function(){this.v!=null&&(this.v=null,dh(this),ov(this),gt(19))};function Kd(t){t.v!=null&&(z.clearTimeout(t.v),t.v=null)}function IA(t,e){var n=null;if(t.g==e){Kd(t),av(t),t.g=null;var r=2}else if(Ly(t.i,e))n=e.F,cA(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=ih(),rt(r,new Gb(r,n)),hh(t)}else wA(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&DB(t,e)||r==2&&ov(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Di(t,5);break;case 4:Di(t,10);break;case 3:Di(t,6);break;default:Di(t,2)}}}function DA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Di(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=st(t.pb,t);n||(n=new Ci("//www.google.com/images/cleardot.gif"),z.location&&z.location.protocol=="http"||Gd(n,"https"),uh(n)),yB(n.toString(),r)}else gt(2);t.H=0,t.h&&t.h.za(e),CA(t),vA(t)}b.pb=function(t){t?(this.l.info("Successfully pinged google.com"),gt(2)):(this.l.info("Failed to ping google.com"),gt(1))};function CA(t){if(t.H=0,t.ma=[],t.h){let e=lA(t.i);(e.length!=0||t.j.length!=0)&&(mb(t.ma,e),mb(t.ma,t.j),t.i.i.length=0,$y(t.j),t.j.length=0),t.h.ya()}}function TA(t,e,n){var r=n instanceof Ci?Jn(n):new Ci(n);if(r.g!="")e&&(r.g=e+"."+r.g),Wd(r,r.m);else{var i=z.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ci(null);r&&Gd(s,r),e&&(s.g=e),i&&Wd(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&ve(r,n,e),ve(r,"VER",t.ra),Du(t,r),r}function bA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ae(new Eu({ob:n})):new Ae(t.va),e.Oa(t.J),e}b.isActive=function(){return!!this.h&&this.h.isActive(this)};function AA(){}b=AA.prototype;b.Ba=function(){};b.Aa=function(){};b.za=function(){};b.ya=function(){};b.isActive=function(){return!0};b.Va=function(){};function Qd(){if(no&&!(10<=Number(Bj)))throw Error("Environmental error: no available transport.")}Qd.prototype.g=function(t,e){return new Ft(t,e)};function Ft(t,e){Ze.call(this),this.g=new yA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!au(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!au(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new io(this)}Xe(Ft,Ze);Ft.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;gt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=TA(t,null,t.Y),hh(t)};Ft.prototype.close=function(){sv(this.g)};Ft.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Qy(t),t=n);e.j.push(new hB(e.fb++,t)),e.H==3&&hh(e)};Ft.prototype.N=function(){this.g.h=null,delete this.j,sv(this.g),delete this.g,Ft.$.N.call(this)};function SA(t){ev.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Xe(SA,ev);function MA(){tv.call(this),this.status=1}Xe(MA,tv);function io(t){this.g=t}Xe(io,AA);io.prototype.Ba=function(){rt(this.g,"a")};io.prototype.Aa=function(t){rt(this.g,new SA(t))};io.prototype.za=function(t){rt(this.g,new MA)};io.prototype.ya=function(){rt(this.g,"b")};function CB(){this.blockSize=-1}function un(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Xe(un,CB);un.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Cy(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}un.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Cy(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Cy(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Cy(this,r),i=0;break}}this.h=i,this.i+=e};un.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function he(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var TB={};function uv(t){return-128<=t&&128>t?Vj(t,function(e){return new he([e|0],0>e?-1:0)}):new he([t|0],0>t?-1:0)}function Sn(t){if(isNaN(t)||!isFinite(t))return to;if(0>t)return nt(Sn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=jy;return new he(e,0)}function xA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return nt(xA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Sn(Math.pow(e,8)),r=to,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Sn(Math.pow(e,s)),r=r.R(s).add(Sn(o))):(r=r.R(n),r=r.add(Sn(o)))}return r}var jy=4294967296,to=uv(0),By=uv(1),bb=uv(16777216);b=he.prototype;b.ea=function(){if(Wt(this))return-nt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:jy+r)*e,e*=jy}return t};b.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Xn(this))return"0";if(Wt(this))return"-"+nt(this).toString(t);for(var e=Sn(Math.pow(t,6)),n=this,r="";;){var i=Zd(n,e).g;n=Yd(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Xn(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};b.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Xn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Wt(t){return t.h==-1}b.X=function(t){return t=Yd(this,t),Wt(t)?-1:Xn(t)?0:1};function nt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new he(n,~t.h).add(By)}b.abs=function(){return Wt(this)?nt(this):this};b.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new he(n,n[n.length-1]&-2147483648?-1:0)};function Yd(t,e){return t.add(nt(e))}b.R=function(t){if(Xn(this)||Xn(t))return to;if(Wt(this))return Wt(t)?nt(this).R(nt(t)):nt(nt(this).R(t));if(Wt(t))return nt(this.R(nt(t)));if(0>this.X(bb)&&0>t.X(bb))return Sn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=o*u,zd(n,2*r+2*i),n[2*r+2*i+1]+=s*u,zd(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,zd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,zd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new he(n,0)};function zd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ru(t,e){this.g=t,this.h=e}function Zd(t,e){if(Xn(e))throw Error("division by zero");if(Xn(t))return new ru(to,to);if(Wt(t))return e=Zd(nt(t),e),new ru(nt(e.g),nt(e.h));if(Wt(e))return e=Zd(t,nt(e)),new ru(nt(e.g),e.h);if(30<t.g.length){if(Wt(t)||Wt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=By,r=e;0>=r.X(t);)n=Ab(n),r=Ab(r);var i=Js(n,1),s=Js(r,1);for(r=Js(r,2),n=Js(n,2);!Xn(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Js(r,1),n=Js(n,1)}return e=Yd(t,i.R(e)),new ru(i,e)}for(i=to;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Sn(n),o=s.R(e);Wt(o)||0<o.X(t);)n-=r,s=Sn(n),o=s.R(e);Xn(s)&&(s=By),i=i.add(s),t=Yd(t,o)}return new ru(i,t)}b.gb=function(t){return Zd(this,t).h};b.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new he(n,this.h&t.h)};b.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new he(n,this.h|t.h)};b.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new he(n,this.h^t.h)};function Ab(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new he(n,t.h)}function Js(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new he(i,t.h)}Qd.prototype.createWebChannel=Qd.prototype.g;Ft.prototype.send=Ft.prototype.u;Ft.prototype.open=Ft.prototype.m;Ft.prototype.close=Ft.prototype.close;sh.NO_ERROR=0;sh.TIMEOUT=8;sh.HTTP_ERROR=6;Wb.COMPLETE="complete";Kb.EventType=vu;vu.OPEN="a";vu.CLOSE="b";vu.ERROR="c";vu.MESSAGE="d";Ze.prototype.listen=Ze.prototype.O;Ae.prototype.listenOnce=Ae.prototype.P;Ae.prototype.getLastError=Ae.prototype.Sa;Ae.prototype.getLastErrorCode=Ae.prototype.Ia;Ae.prototype.getStatus=Ae.prototype.da;Ae.prototype.getResponseJson=Ae.prototype.Wa;Ae.prototype.getResponseText=Ae.prototype.ja;Ae.prototype.send=Ae.prototype.ha;Ae.prototype.setWithCredentials=Ae.prototype.Oa;un.prototype.digest=un.prototype.l;un.prototype.reset=un.prototype.reset;un.prototype.update=un.prototype.j;he.prototype.add=he.prototype.add;he.prototype.multiply=he.prototype.R;he.prototype.modulo=he.prototype.gb;he.prototype.compare=he.prototype.X;he.prototype.toNumber=he.prototype.ea;he.prototype.toString=he.prototype.toString;he.prototype.getBits=he.prototype.D;he.fromNumber=Sn;he.fromString=xA;var RA=cn.createWebChannelTransport=function(){return new Qd},NA=cn.getStatEventTarget=function(){return ih()},fh=cn.ErrorCode=sh,PA=cn.EventType=Wb,OA=cn.Event=Ti,cv=cn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},I8=cn.FetchXmlHttpFactory=Eu,Cu=cn.WebChannel=Kb,kA=cn.XhrIo=Ae,FA=cn.Md5=un,bi=cn.Integer=he;var VA="@firebase/firestore";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var ko="10.7.0";var jr=new yc("@firebase/firestore");function co(){return jr.logLevel}function FS(t){jr.setLogLevel(t)}function E(t,...e){if(jr.logLevel<=pn.DEBUG){let n=e.map(lw);jr.debug(`Firestore (${ko}): ${t}`,...n)}}function ke(t,...e){if(jr.logLevel<=pn.ERROR){let n=e.map(lw);jr.error(`Firestore (${ko}): ${t}`,...n)}}function Qt(t,...e){if(jr.logLevel<=pn.WARN){let n=e.map(lw);jr.warn(`Firestore (${ko}): ${t}`,...n)}}function lw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function R(t="Unexpected state"){let e=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: `+t;throw ke(e),new Error(e)}function k(t,e){t||R()}function VS(t,e){t||R()}function A(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends pE{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var qe=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ch=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},pv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(He.UNAUTHENTICATED))}shutdown(){}},gv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},mv=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new qe;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qe,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>y(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qe)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(k(typeof r.accessToken=="string"),new Ch(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return k(e===null||typeof e=="string"),new He(e)}},yv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},vv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},_v=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,E("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(k(typeof n.token=="string"),this.R=n.token,new _v(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function bB(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Th=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=bB(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function W(t,e){return t<e?-1:t>e?1:0}function _o(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function LS(t){return t+"\0"}var Te=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var L=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Te(0,0))}static max(){return new t(new Te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var bh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&R(),r===void 0?r=e.length-n:r>e.length-n&&R(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ce=class t extends bh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},AB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fe=class t extends bh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return AB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new w(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new w(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new w(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var T=class t{constructor(e){this.path=e}static fromPath(e){return new t(ce.fromString(e))}static fromName(e){return new t(ce.fromString(e).popFirst(5))}static empty(){return new t(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ce(e.slice()))}};var wo=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Ev(t){return t.fields.find(e=>e.kind===2)}function Si(t){return t.fields.filter(e=>e.kind!==2)}wo.UNKNOWN_ID=-1;var mo=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Fu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Yt.min())}};function jS(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=L.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new Yt(i,T.empty(),e)}function BS(t){return new Yt(t.readTime,t.key,-1)}var Yt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(L.min(),T.empty(),-1)}static max(){return new t(L.max(),T.empty(),-1)}};function dw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=T.comparator(t.documentKey,e.documentKey),n!==0?n:W(t.largestBatchId,e.largestBatchId))}var US="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ah=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Yr(t){return y(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==US)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&R(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var Sh=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new qe,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Oi(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=hw(r.target.error);this.V.reject(new Oi(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new Oi(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Dv(n)}},Br=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(gc())===12.2&&ke("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),Mi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!mc())return!1;if(t.C())return!0;let e=gc(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return y(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new Oi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new w(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new w(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Oi(e,o))},i.onupgradeneeded=s=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return y(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=Sh.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),p.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&o<3;if(E("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Iv=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Mi(this.k.delete())}},Oi=class extends w{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Zr(t){return t.name==="IndexedDbTransactionError"}var Dv=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mi(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),Mi(this.store.add(e))}get(e){return Mi(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),Mi(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),Mi(this.store.count())}W(e,n){let r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){let i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{let i=this.store.getAll(r.range);return new p((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=s=>{let o=hw(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let u=new Iv(a),c=n(a.primaryKey,a.value,u);if(c instanceof p){let l=c.catch(d=>(u.done(),p.reject(d)));r.push(l)}u.isDone?i():u.$===null?a.continue():a.continue(u.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Mi(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=hw(r.target.error);n(i)}})}var LA=!1;function hw(t){let e=Br.S(gc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LA||(LA=!0,setTimeout(()=>{throw r},0)),r}}return t}var Cv=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){E("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>y(this,null,function*(){this.task=null;try{E("IndexBackiller",`Documents written: ${yield this.X.te()}`)}catch(n){Zr(n)?E("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):yield Yr(n)}yield this.ee(6e4)}))}},Tv=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return y(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,s=!0;return p.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return E("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(E("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=BS(s);dw(o,r)>0&&(r=o)}),new Yt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Vt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function oc(t){return t==null}function Vu(t){return t===0&&1/t==-1/0}function $S(t){return typeof t=="number"&&Number.isInteger(t)&&!Vu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function mt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=jA(e)),e=SB(t.get(n),e);return jA(e)}function SB(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function jA(t){return t+""}function Mn(t){let e=t.length;if(k(e>=2),e===2)return k(t.charAt(0)===""&&t.charAt(1)===""),ce.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&R(),t.charAt(o+1)){case"":let a=t.substring(s,o),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:R()}s=o+2}return new ce(r)}var BA=["userId","batchId"];function vh(t,e){return[t,mt(e)]}function HS(t,e,n){return[t,mt(e),n]}var MB={},xB=["prefixPath","collectionGroup","readTime","documentId"],RB=["prefixPath","collectionGroup","documentId"],NB=["collectionGroup","readTime","prefixPath","documentId"],PB=["canonicalId","targetId"],OB=["targetId","path"],kB=["path","targetId"],FB=["collectionId","parent"],VB=["indexId","uid"],LB=["uid","sequenceNumber"],jB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],BB=["indexId","uid","orderedDocumentKey"],UB=["userId","collectionPath","documentId"],$B=["userId","collectionPath","largestBatchId"],HB=["userId","collectionGroup","largestBatchId"],qS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qB=[...qS,"documentOverlays"],zS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GS=zS,zB=[...GS,"indexConfiguration","indexState","indexEntries"];var Lu=class extends Ah{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function et(t,e){let n=A(t);return Br.M(n.ae,e)}function UA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var _e=class t{constructor(e,n){this.comparator=e,this.root=n||Rn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new go(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new go(this.root,e,this.comparator,!1)}getReverseIterator(){return new go(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new go(this.root,e,this.comparator,!0)}},go=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Rn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw R();let e=this.left.check();if(e!==this.right.check())throw R();return e+(this.isRed()?0:1)}};Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw R()}get value(){throw R()}get color(){throw R()}get left(){throw R()}get right(){throw R()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ge=class t{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mh(this.data.getIterator())}getIteratorFrom(e){return new Mh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Mh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function so(t){return t.hasNext()?t.getNext():void 0}var Lt=class t{constructor(e){this.fields=e,e.sort(Fe.comparator)}static empty(){return new t([])}unionWith(e){let n=new ge(Fe.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _o(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var xh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function KS(){return typeof atob<"u"}var Je=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new xh("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return W(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Je.EMPTY_BYTE_STRING=new Je("");var GB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(t){if(k(!!t),typeof t=="string"){let e=0,n=GB.exec(t);if(k(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $r(t){return typeof t=="string"?Je.fromBase64String(t):Je.fromUint8Array(t)}function Ef(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function fw(t){let e=t.mapValue.fields.__previous_value__;return Ef(e)?fw(e):e}function ju(t){let e=Ur(t.mapValue.fields.__local_write_time__.timestampValue);return new Te(e.seconds,e.nanos)}var bv=class{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Hr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Vr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_h={nullValue:"NULL_VALUE"};function ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ef(t)?4:QS(t)?9007199254740991:10:R()}function On(t,e){if(t===e)return!0;let n=ki(t);if(n!==ki(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ju(t).isEqual(ju(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ur(i.timestampValue),a=Ur(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return $r(i.bytesValue).isEqual($r(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Se(i.geoPointValue.latitude)===Se(s.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Se(i.integerValue)===Se(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Se(i.doubleValue),a=Se(s.doubleValue);return o===a?Vu(o)===Vu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return _o(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(UA(o)!==UA(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!On(o[u],a[u])))return!1;return!0}(t,e);default:return R()}}function Bu(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function qr(t,e){if(t===e)return 0;let n=ki(t),r=ki(e);if(n!==r)return W(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return W(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Se(s.integerValue||s.doubleValue),u=Se(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return $A(t.timestampValue,e.timestampValue);case 4:return $A(ju(t),ju(e));case 5:return W(t.stringValue,e.stringValue);case 6:return function(s,o){let a=$r(s),u=$r(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=W(a[c],u[c]);if(l!==0)return l}return W(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=W(Se(s.latitude),Se(o.latitude));return a!==0?a:W(Se(s.longitude),Se(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=qr(a[c],u[c]);if(l)return l}return W(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Vr.mapValue&&o===Vr.mapValue)return 0;if(s===Vr.mapValue)return 1;if(o===Vr.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),c=o.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){let h=W(u[d],l[d]);if(h!==0)return h;let f=qr(a[u[d]],c[l[d]]);if(f!==0)return f}return W(u.length,l.length)}(t.mapValue,e.mapValue);default:throw R()}}function $A(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return W(t,e);let n=Ur(t),r=Ur(e),i=W(n.seconds,r.seconds);return i!==0?i:W(n.nanos,r.nanos)}function Eo(t){return Av(t)}function Av(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Ur(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $r(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return T.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Av(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Av(n.fields[o])}`;return i+"}"}(t.mapValue):R()}function Fi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sv(t){return!!t&&"integerValue"in t}function Uu(t){return!!t&&"arrayValue"in t}function HA(t){return!!t&&"nullValue"in t}function qA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wh(t){return!!t&&"mapValue"in t}function Ru(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ru(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ru(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function WB(t){return"nullValue"in t?_h:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Fi(Hr.empty(),T.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:R()}function KB(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Fi(Hr.empty(),T.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Vr:R()}function zA(t,e){let n=qr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function GA(t,e){let n=qr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var ut=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ru(n)}setAll(e){let n=Fe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ru(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());wh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gi(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Ru(this.value))}};function YS(t){let e=[];return Gi(t.fields,(n,r)=>{let i=new Fe([n]);if(wh(r)){let s=YS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Lt(e)}var ze=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,L.min(),L.min(),L.min(),ut.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,L.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,L.min(),L.min(),ut.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,L.min(),L.min(),ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(L.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=L.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var kn=class{constructor(e,n){this.position=e,this.inclusive=n}};function WA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=T.comparator(T.fromName(o.referenceValue),n.key):r=qr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function KA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}var Vi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function QB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Rh=class{},ie=class t extends Rh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Rv(e,n,r):n==="array-contains"?new Ov(e,r):n==="in"?new Nh(e,r):n==="not-in"?new kv(e,r):n==="array-contains-any"?new Fv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Nv(e,r):new Pv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qr(n,this.value)):n!==null&&ki(this.value)===ki(n)&&this.matchesComparison(qr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return R()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fe=class t extends Rh{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Io(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Io(t){return t.op==="and"}function Mv(t){return t.op==="or"}function pw(t){return ZS(t)&&Io(t)}function ZS(t){for(let e of t.filters)if(e instanceof fe)return!1;return!0}function xv(t){if(t instanceof ie)return t.field.canonicalString()+t.op.toString()+Eo(t.value);if(pw(t))return t.filters.map(e=>xv(e)).join(",");{let e=t.filters.map(n=>xv(n)).join(",");return`${t.op}(${e})`}}function XS(t,e){return t instanceof ie?function(r,i){return i instanceof ie&&r.op===i.op&&r.field.isEqual(i.field)&&On(r.value,i.value)}(t,e):t instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&XS(o,i.filters[a]),!0):!1}(t,e):void R()}function JS(t,e){let n=t.filters.concat(e);return fe.create(n,t.op)}function eM(t){return t instanceof ie?function(n){return`${n.field.canonicalString()} ${n.op} ${Eo(n.value)}`}(t):t instanceof fe?function(n){return n.op.toString()+" {"+n.getFilters().map(eM).join(" ,")+"}"}(t):"Filter"}var Rv=class extends ie{constructor(e,n,r){super(e,n,r),this.key=T.fromName(r.referenceValue)}matches(e){let n=T.comparator(e.key,this.key);return this.matchesComparison(n)}},Nv=class extends ie{constructor(e,n){super(e,"in",n),this.keys=tM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Pv=class extends ie{constructor(e,n){super(e,"not-in",n),this.keys=tM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function tM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>T.fromName(r.referenceValue))}var Ov=class extends ie{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Uu(n)&&Bu(n.arrayValue,this.value)}},Nh=class extends ie{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Bu(this.value.arrayValue,n)}},kv=class extends ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Bu(this.value.arrayValue,n)}},Fv=class extends ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Uu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bu(this.value.arrayValue,r))}};var Vv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Lv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Vv(t,e,n,r,i,s,o)}function Li(t){let e=A(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),oc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Eo(r)).join(",")),e.ce=n}return e.ce}function ac(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!KA(t.startAt,e.startAt)&&KA(t.endAt,e.endAt)}function Ph(t){return T.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Oh(t,e){return t.filters.filter(n=>n instanceof ie&&n.field.isEqual(e))}function QA(t,e,n){let r=_h,i=!0;for(let s of Oh(t,e)){let o=_h,a=!0;switch(s.op){case"<":case"<=":o=WB(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=_h}zA({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];zA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function YA(t,e,n){let r=Vr,i=!0;for(let s of Oh(t,e)){let o=Vr,a=!0;switch(s.op){case">=":case">":o=KB(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Vr}GA({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];GA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var ln=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function nM(t,e,n,r,i,s,o,a){return new ln(t,e,n,r,i,s,o,a)}function Fo(t){return new ln(t)}function ZA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gw(t){return t.collectionGroup!==null}function yo(t){let e=A(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ge(Fe.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Vi(s,r))}),n.has(Fe.keyField().canonicalString())||e.le.push(new Vi(Fe.keyField(),r))}return e.le}function yt(t){let e=A(t);return e.he||(e.he=YB(e,yo(t))),e.he}function YB(t,e){if(t.limitType==="F")return Lv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Vi(i.field,s)});let n=t.endAt?new kn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new kn(t.startAt.position,t.startAt.inclusive):null;return Lv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jv(t,e){let n=t.filters.concat([e]);return new ln(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kh(t,e,n){return new ln(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uc(t,e){return ac(yt(t),yt(e))&&t.limitType===e.limitType}function rM(t){return`${Li(yt(t))}|lt:${t.limitType}`}function lo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>eM(i)).join(", ")}]`),oc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Eo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Eo(i)).join(",")),`Target(${r})`}(yt(t))}; limitType=${t.limitType})`}function cc(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):T.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of yo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let c=WA(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,yo(r),i)||r.endAt&&!function(o,a,u){let c=WA(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,yo(r),i))}(t,e)}function iM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sM(t){return(e,n)=>{let r=!1;for(let i of yo(t)){let s=ZB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZB(t,e,n){let r=t.field.isKeyField()?T.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?qr(u,c):R()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return R()}}var Fn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return WS(this.inner)}size(){return this.innerSize}};var XB=new _e(T.comparator);function Ct(){return XB}var oM=new _e(T.comparator);function Mu(...t){let e=oM;for(let n of t)e=e.insert(n.key,n);return e}function aM(t){let e=oM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xn(){return Nu()}function uM(){return Nu()}function Nu(){return new Fn(t=>t.toString(),(t,e)=>t.isEqual(e))}var JB=new _e(T.comparator),eU=new ge(T.comparator);function Q(...t){let e=eU;for(let n of t)e=e.add(n);return e}var tU=new ge(W);function mw(){return tU}function cM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vu(e)?"-0":e}}function lM(t){return{integerValue:""+t}}function dM(t,e){return $S(e)?lM(e):cM(t,e)}var Do=class{constructor(){this._=void 0}};function nU(t,e,n){return t instanceof zr?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ef(s)&&(s=fw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof nr?fM(t,e):t instanceof rr?pM(t,e):function(i,s){let o=hM(i,s),a=XA(o)+XA(i.Ie);return Sv(o)&&Sv(i.Ie)?lM(a):cM(i.serializer,a)}(t,e)}function rU(t,e,n){return t instanceof nr?fM(t,e):t instanceof rr?pM(t,e):n}function hM(t,e){return t instanceof Gr?function(r){return Sv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var zr=class extends Do{},nr=class extends Do{constructor(e){super(),this.elements=e}};function fM(t,e){let n=gM(e);for(let r of t.elements)n.some(i=>On(i,r))||n.push(r);return{arrayValue:{values:n}}}var rr=class extends Do{constructor(e){super(),this.elements=e}};function pM(t,e){let n=gM(e);for(let r of t.elements)n=n.filter(i=>!On(i,r));return{arrayValue:{values:n}}}var Gr=class extends Do{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function XA(t){return Se(t.integerValue||t.doubleValue)}function gM(t){return Uu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ji=class{constructor(e,n){this.field=e,this.transform=n}};function iU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof nr&&i instanceof nr||r instanceof rr&&i instanceof rr?_o(r.elements,i.elements,On):r instanceof Gr&&i instanceof Gr?On(r.Ie,i.Ie):r instanceof zr&&i instanceof zr}(t.transform,e.transform)}var Bv=class{constructor(e,n){this.version=e,this.transformResults=n}},Me=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Eh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Co=class{};function mM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kr(t.key,Me.none()):new Wr(t.key,t.data,Me.none());{let n=t.data,r=ut.empty(),i=new ge(Fe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new dn(t.key,r,new Lt(i.toArray()),Me.none())}}function sU(t,e,n){t instanceof Wr?function(i,s,o){let a=i.value.clone(),u=eS(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof dn?function(i,s,o){if(!Eh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=eS(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(yM(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pu(t,e,n,r){return t instanceof Wr?function(s,o,a,u){if(!Eh(s.precondition,o))return a;let c=s.value.clone(),l=tS(s.fieldTransforms,u,o);return c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof dn?function(s,o,a,u){if(!Eh(s.precondition,o))return a;let c=tS(s.fieldTransforms,u,o),l=o.data;return l.setAll(yM(s)),l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Eh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function oU(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=hM(r.transform,i||null);s!=null&&(n===null&&(n=ut.empty()),n.set(r.field,s))}return n||null}function JA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_o(r,i,(s,o)=>iU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Wr=class extends Co{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},dn=class extends Co{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function yM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function eS(t,e,n){let r=new Map;k(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,rU(o,a,n[i]))}return r}function tS(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,nU(s,o,e))}return r}var Kr=class extends Co{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},$u=class extends Co{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Hu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&sU(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Pu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=uM();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=mM(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(L.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Q())}isEqual(e){return this.batchId===e.batchId&&_o(this.mutations,e.mutations,(n,r)=>JA(n,r))&&_o(this.baseMutations,e.baseMutations,(n,r)=>JA(n,r))}},Uv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){k(e.mutations.length===r.length);let i=function(){return JB}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var qu=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $v=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ue,ae;function vM(t){switch(t){default:return R();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function _M(t){if(t===void 0)return ke("GRPC error has no .code"),g.UNKNOWN;switch(t){case Ue.OK:return g.OK;case Ue.CANCELLED:return g.CANCELLED;case Ue.UNKNOWN:return g.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return g.INTERNAL;case Ue.UNAVAILABLE:return g.UNAVAILABLE;case Ue.UNAUTHENTICATED:return g.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case Ue.NOT_FOUND:return g.NOT_FOUND;case Ue.ALREADY_EXISTS:return g.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return g.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case Ue.ABORTED:return g.ABORTED;case Ue.OUT_OF_RANGE:return g.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return g.UNIMPLEMENTED;case Ue.DATA_LOSS:return g.DATA_LOSS;default:return R()}}(ae=Ue||(Ue={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";var nS=null;function wM(){return new TextEncoder}var aU=new bi([4294967295,4294967295],0);function rS(t){let e=wM().encode(t),n=new FA;return n.update(e),new Uint8Array(n.digest())}function iS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new bi([n,r],0),new bi([i,s],0)]}var Hv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pi(`Invalid padding: ${n}`);if(r<0)throw new Pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pi(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=bi.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(bi.fromNumber(r)));return i.compare(aU)===1&&(i=new bi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=rS(e),[r,i]=iS(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=rS(e),[r,i]=iS(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Pi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var zu=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Gu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(L.min(),i,new _e(W),Ct(),Q())}},Gu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Q(),Q(),Q())}};var vo=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Fh=class{constructor(e,n){this.targetId=e,this.fe=n}},Vh=class{constructor(e,n,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Lh=class{constructor(){this.ge=0,this.pe=oS(),this.ye=Je.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Q(),n=Q(),r=Q();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:R()}}),new Gu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=oS()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,k(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},qv=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=Ct(),this.Qe=sS(),this.Ke=new _e(W)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:R()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Ph(s))if(r===0){let o=new T(s.path);this.We(n,o,ze.newNoDocument(o,L.min()))}else k(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),u=a?this.et(a,e,o):1;if(u!==0){this.He(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}nS?.tt(function(l,d,h,f,m){var v,_,D,N,S,j;let $={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},K=d.unchangedNames;return K&&($.bloomFilter={applied:m===0,hashCount:(v=K?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(N=(D=(_=K?.bits)===null||_===void 0?void 0:_.bitmap)===null||D===void 0?void 0:D.length)!==null&&N!==void 0?N:0,padding:(j=(S=K?.bits)===null||S===void 0?void 0:S.padding)!==null&&j!==void 0?j:0,mightContain:we=>{var jt;return(jt=f?.mightContain(we))!==null&&jt!==void 0&&jt}}),$}(o,e.fe,this.Le.nt(),a,u))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=$r(r).toUint8Array()}catch(u){if(u instanceof xh)return Qt("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Hv(o,i,s)}catch(u){return Qt(u instanceof Pi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Ph(a.target)){let u=new T(a.target.path);this.qe.get(u)!==null||this.st(o,u)||this.We(o,u,ze.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Q();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new zu(e,n,this.Ke,this.qe,r);return this.qe=Ct(),this.Qe=sS(),this.Ke=new _e(W),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Lh,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new ge(W),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Lh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function sS(){return new _e(T.comparator)}function oS(){return new _e(T.comparator)}var uU=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),cU=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),lU=(()=>({and:"AND",or:"OR"}))(),zv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Gv(t,e){return t.useProto3Json||oc(e)?e:{value:e}}function To(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dU(t,e){return To(t,e.toTimestamp())}function Ve(t){return k(!!t),L.fromTimestamp(function(n){let r=Ur(n);return new Te(r.seconds,r.nanos)}(t))}function yw(t,e){return function(r){return new ce(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function IM(t){let e=ce.fromString(t);return k(RM(e)),e}function Wu(t,e){return yw(t.databaseId,e.path)}function Nn(t,e){let n=IM(e);if(n.get(1)!==t.databaseId.projectId)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new T(CM(n))}function Wv(t,e){return yw(t.databaseId,e)}function DM(t){let e=IM(t);return e.length===4?ce.emptyPath():CM(e)}function Ku(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CM(t){return k(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function aS(t,e,n){return{name:Wu(t,e),fields:n.value.mapValue.fields}}function TM(t,e,n){let r=Nn(t,e.name),i=Ve(e.updateTime),s=e.createTime?Ve(e.createTime):L.min(),o=new ut({mapValue:{fields:e.fields}}),a=ze.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function hU(t,e){return"found"in e?function(r,i){k(!!i.found),i.found.name,i.found.updateTime;let s=Nn(r,i.found.name),o=Ve(i.found.updateTime),a=i.found.createTime?Ve(i.found.createTime):L.min(),u=new ut({mapValue:{fields:i.found.fields}});return ze.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){k(!!i.missing),k(!!i.readTime);let s=Nn(r,i.missing),o=Ve(i.readTime);return ze.newNoDocument(s,o)}(t,e):R()}function fU(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:R()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,l){return c.useProto3Json?(k(l===void 0||typeof l=="string"),Je.fromBase64String(l||"")):(k(l===void 0||l instanceof Uint8Array),Je.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let l=c.code===void 0?g.UNKNOWN:_M(c.code);return new w(l,c.message||"")}(o);n=new Vh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Nn(t,r.document.name),s=Ve(r.document.updateTime),o=r.document.createTime?Ve(r.document.createTime):L.min(),a=new ut({mapValue:{fields:r.document.fields}}),u=ze.newFoundDocument(i,s,o,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new vo(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Nn(t,r.document),s=r.readTime?Ve(r.readTime):L.min(),o=ze.newNoDocument(i,s),a=r.removedTargetIds||[];n=new vo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Nn(t,r.document),s=r.removedTargetIds||[];n=new vo([],s,i,null)}else{if(!("filter"in e))return R();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new $v(i,s),a=r.targetId;n=new Fh(a,o)}}return n}function Qu(t,e){let n;if(e instanceof Wr)n={update:aS(t,e.key,e.value)};else if(e instanceof Kr)n={delete:Wu(t,e.key)};else if(e instanceof dn)n={update:aS(t,e.key,e.data),updateMask:_U(e.fieldMask)};else{if(!(e instanceof $u))return R();n={verify:Wu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof zr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof nr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gr)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw R()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:dU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:R()}(t,e.precondition)),n}function Kv(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?Me.updateTime(Ve(s.updateTime)):s.exists!==void 0?Me.exists(s.exists):Me.none()}(e.currentDocument):Me.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;if("setToServerValue"in a)k(a.setToServerValue==="REQUEST_TIME"),u=new zr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];u=new nr(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];u=new rr(l)}else"increment"in a?u=new Gr(o,a.increment):R();let c=Fe.fromServerFormat(a.fieldPath);return new ji(c,u)}(t,i)):[];if(e.update){e.update.name;let i=Nn(t,e.update.name),s=new ut({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(u){let c=u.fieldPaths||[];return new Lt(c.map(l=>Fe.fromServerFormat(l)))}(e.updateMask);return new dn(i,s,o,n,r)}return new Wr(i,s,n,r)}if(e.delete){let i=Nn(t,e.delete);return new Kr(i,n)}if(e.verify){let i=Nn(t,e.verify);return new $u(i,n)}return R()}function pU(t,e){return t&&t.length>0?(k(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ve(i.updateTime):Ve(s);return o.isEqual(L.min())&&(o=Ve(s)),new Bv(o,i.transformResults||[])}(n,e))):[]}function bM(t,e){return{documents:[Wv(t,e.path)]}}function AM(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Wv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Wv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(u){if(u.length!==0)return xM(fe.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);let s=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:ho(d.field),direction:mU(d.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let o=Gv(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function SM(t){let e=DM(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){k(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=MM(d);return h instanceof fe&&pw(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(m){return new Vi(fo(m.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,oc(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){let h=!!d.before,f=d.values||[];return new kn(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){let h=!d.before,f=d.values||[];return new kn(f,h)}(n.endAt)),nM(e,i,o,s,a,"F",u,c)}function gU(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return R()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=fo(n.unaryFilter.field);return ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=fo(n.unaryFilter.field);return ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=fo(n.unaryFilter.field);return ie.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=fo(n.unaryFilter.field);return ie.create(o,"!=",{nullValue:"NULL_VALUE"});default:return R()}}(t):t.fieldFilter!==void 0?function(n){return ie.create(fo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return R()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fe.create(n.compositeFilter.filters.map(r=>MM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return R()}}(n.compositeFilter.op))}(t):R()}function mU(t){return uU[t]}function yU(t){return cU[t]}function vU(t){return lU[t]}function ho(t){return{fieldPath:t.canonicalString()}}function fo(t){return Fe.fromServerFormat(t.fieldPath)}function xM(t){return t instanceof ie?function(n){if(n.op==="=="){if(qA(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NAN"}};if(HA(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qA(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NAN"}};if(HA(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(n.field),op:yU(n.op),value:n.value}}}(t):t instanceof fe?function(n){let r=n.getFilters().map(i=>xM(i));return r.length===1?r[0]:{compositeFilter:{op:vU(n.op),filters:r}}}(t):R()}function _U(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var bo=class t{constructor(e,n,r,i,s=L.min(),o=L.min(),a=Je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var jh=class{constructor(e){this.ut=e}};function wU(t,e){let n;if(e.document)n=TM(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=T.fromSegments(e.noDocument.path),i=Ui(e.noDocument.readTime);n=ze.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return R();{let r=T.fromSegments(e.unknownDocument.path),i=Ui(e.unknownDocument.version);n=ze.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new Te(i[0],i[1]);return L.fromTimestamp(s)}(e.readTime)),n}function uS(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Bh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Wu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:To(s,o.version.toTimestamp()),createTime:To(s,o.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Bi(e.version)};else{if(!e.isUnknownDocument())return R();r.unknownDocument={path:n.path.toArray(),version:Bi(e.version)}}return r}function Bh(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Bi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ui(t){let e=new Te(t.seconds,t.nanoseconds);return L.fromTimestamp(e)}function xi(t,e){let n=(e.baseMutations||[]).map(s=>Kv(t.ut,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>Kv(t.ut,s)),i=Te.fromMillis(e.localWriteTimeMs);return new Hu(e.batchId,i,n,r)}function xu(t){let e=Ui(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ui(t.lastLimboFreeSnapshotVersion):L.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return k(s.documents.length===1),yt(Fo(DM(s.documents[0])))}(t.query):function(s){return yt(SM(s))}(t.query),new bo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Je.fromBase64String(t.resumeToken))}function NM(t,e){let n=Bi(e.snapshotVersion),r=Bi(e.lastLimboFreeSnapshotVersion),i;i=Ph(e.target)?bM(t.ut,e.target):AM(t.ut,e.target);let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Li(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function vw(t){let e=SM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kh(e,e.limit,"L"):e}function lv(t,e){return new qu(e.largestBatchId,Kv(t.ut,e.overlayMutation))}function cS(t,e){let n=e.path.lastSegment();return[t,mt(e.path.popLast()),n]}function lS(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Bi(r.readTime),documentKey:mt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Qv=class{getBundleMetadata(e,n){return dS(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ui(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return dS(e).put(function(i){return{bundleId:i.id,createTime:Bi(Ve(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return hS(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:vw(s.bundledQuery),readTime:Ui(s.readTime)}}(r)})}saveNamedQuery(e,n){return hS(e).put(function(i){return{name:i.name,readTime:Bi(Ve(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function dS(t){return et(t,"bundles")}function hS(t){return et(t,"namedQueries")}var Uh=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Tu(e).get(cS(this.userId,n)).next(r=>r?lv(this.serializer,r):null)}getOverlays(e,n){let r=xn();return p.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new qu(n,o);i.push(this.lt(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(mt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Tu(e).H("collectionPathOverlayIndex",a))}),p.waitFor(s)}getOverlaysForCollection(e,n,r){let i=xn(),s=mt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Tu(e).W("collectionPathOverlayIndex",o).next(a=>{for(let u of a){let c=lv(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=xn(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Tu(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,c,l)=>{let d=lv(this.serializer,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):l.done()}).next(()=>s)}lt(e,n){return Tu(e).put(function(i,s,o){let[a,u,c]=cS(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Qu(i.ut,o.mutation)}}(this.serializer,this.userId,n))}};function Tu(t){return et(t,"documentOverlays")}var er=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Se(e.integerValue));else if("doubleValue"in e){let r=Se(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Vu(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt($r(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?QS(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):R()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),T.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};er.St=new er;function EU(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function fS(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=EU(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var Yv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{let i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){let n=this.Bt(e),r=fS(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){let n=this.Bt(e),r=fS(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Zv=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},Xv=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},Ri=class{constructor(){this.Wt=new Yv,this.Gt=new Zv(this.Wt),this.zt=new Xv(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var Ni=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Pr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=pS(t.arrayValue,e.arrayValue),n!==0?n:(n=pS(t.directionalValue,e.directionalValue),n!==0?n:T.comparator(t.documentKey,e.documentKey)))}function pS(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var $h=class{constructor(e){this.Jt=new ge((n,r)=>Fe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(k(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=Ev(e);if(n!==void 0&&!this.tn(n))return!1;let r=Si(e),i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.Yt.length||!this.rn(this.Yt[o++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new ge(Fe.comparator),n=[];for(let r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new mo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new mo(r.field,0))}for(let r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new mo(r.field,r.dir==="asc"?0:1)));return new wo(wo.UNKNOWN_ID,this.collectionId,n,Fu.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function PM(t){var e,n;if(k(t instanceof ie||t instanceof fe),t instanceof ie){if(t instanceof Nh){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ie.create(t.field,"==",s)))||[];return fe.create(i,"or")}return t}let r=t.filters.map(i=>PM(i));return fe.create(r,t.op)}function IU(t){if(t.getFilters().length===0)return[];let e=t_(PM(t));return k(OM(e)),Jv(e)||e_(e)?[e]:e.getFilters()}function Jv(t){return t instanceof ie}function e_(t){return t instanceof fe&&pw(t)}function OM(t){return Jv(t)||e_(t)||function(n){if(n instanceof fe&&Mv(n)){for(let r of n.getFilters())if(!Jv(r)&&!e_(r))return!1;return!0}return!1}(t)}function t_(t){if(k(t instanceof ie||t instanceof fe),t instanceof ie)return t;if(t.filters.length===1)return t_(t.filters[0]);let e=t.filters.map(r=>t_(r)),n=fe.create(e,t.op);return n=Hh(n),OM(n)?n:(k(n instanceof fe),k(Io(n)),k(n.filters.length>1),n.filters.reduce((r,i)=>_w(r,i)))}function _w(t,e){let n;return k(t instanceof ie||t instanceof fe),k(e instanceof ie||e instanceof fe),n=t instanceof ie?e instanceof ie?function(i,s){return fe.create([i,s],"and")}(t,e):gS(t,e):e instanceof ie?gS(e,t):function(i,s){if(k(i.filters.length>0&&s.filters.length>0),Io(i)&&Io(s))return JS(i,s.getFilters());let o=Mv(i)?i:s,a=Mv(i)?s:i,u=o.filters.map(c=>_w(c,a));return fe.create(u,"or")}(t,e),Hh(n)}function gS(t,e){if(Io(e))return JS(e,t.getFilters());{let n=e.filters.map(r=>_w(t,r));return fe.create(n,"or")}}function Hh(t){if(k(t instanceof ie||t instanceof fe),t instanceof ie)return t;let e=t.getFilters();if(e.length===1)return Hh(e[0]);if(ZS(t))return t;let n=e.map(i=>Hh(i)),r=[];return n.forEach(i=>{i instanceof ie?r.push(i):i instanceof fe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:fe.create(r,t.op)}var n_=class{constructor(){this.on=new Yu}addToCollectionParentIndex(e,n){return this.on.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(Yt.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(Yt.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},Yu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ge(ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ge(ce.comparator)).toArray()}};var ph=new Uint8Array(0),r_=class{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Yu,this.an=new Fn(r=>Li(r),(r,i)=>ac(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let s={collectionId:r,parent:mt(i)};return mS(e).put(s)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[LS(n),""],!1,!0);return mS(e).W(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(Mn(o.parent))}return r})}addFieldIndex(e,n){let r=bu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=ao(e);return s.next(a=>{o.put(lS(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=bu(e),i=ao(e),s=oo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=bu(e),r=oo(e),i=ao(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new $h(r).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=oo(e),i=!0,s=new Map;return p.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Q(),a=[];return p.forEach(s,(u,c)=>{E("IndexedDbIndexManager",`Using index ${function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(j=>`${j.fieldPath}:${j.kind}`).join(",")}`}(u)} to execute ${Li(n)}`);let l=function(S,j){let $=Ev(j);if($===void 0)return null;for(let K of Oh(S,$.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(c,u),d=function(S,j){let $=new Map;for(let K of Si(j))for(let we of Oh(S,K.fieldPath))switch(we.op){case"==":case"in":$.set(K.fieldPath.canonicalString(),we.value);break;case"not-in":case"!=":return $.set(K.fieldPath.canonicalString(),we.value),Array.from($.values())}return null}(c,u),h=function(S,j){let $=[],K=!0;for(let we of Si(j)){let jt=we.kind===0?QA(S,we.fieldPath,S.startAt):YA(S,we.fieldPath,S.startAt);$.push(jt.value),K&&(K=jt.inclusive)}return new kn($,K)}(c,u),f=function(S,j){let $=[],K=!0;for(let we of Si(j)){let jt=we.kind===0?YA(S,we.fieldPath,S.endAt):QA(S,we.fieldPath,S.endAt);$.push(jt.value),K&&(K=jt.inclusive)}return new kn($,K)}(c,u),m=this.ln(u,c,h),v=this.ln(u,c,f),_=this.hn(u,c,d),D=this.Pn(u.indexId,l,m,h.inclusive,v,f.inclusive,_);return p.forEach(D,N=>r.j(N,n.limit).next(S=>{S.forEach(j=>{let $=T.fromSegments(j.documentKey);o.has($)||(o=o.add($),a.push($))})}))}).next(()=>a)}return p.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=IU(fe.create(e.filters,"and")).map(r=>Lv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){let u=(n!=null?n.length:1)*Math.max(r.length,s.length),c=u/(n!=null?n.length:1),l=[];for(let d=0;d<u;++d){let h=n?this.In(n[d/c]):ph,f=this.Tn(e,h,r[d%c],i),m=this.En(e,h,s[d%c],o),v=a.map(_=>this.Tn(e,h,_,!0));l.push(...this.createRange(f,m,v))}return l}Tn(e,n,r,i){let s=new Ni(e,T.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){let s=new Ni(e,T.empty(),n,r);return i?s.Ht():s}cn(e,n){let r=new $h(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.un(n);return p.forEach(i,s=>this.cn(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let c=new ge(Fe.comparator),l=!1;for(let d of u.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:c=c.add(h.field));for(let d of u.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(l?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){let r=new Ri;for(let i of Si(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.jt(i.kind);er.St.ht(s,o)}return r.Ut()}In(e){let n=new Ri;return er.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let r=new Ri;return er.St.ht(Fi(this.databaseId,n),r.jt(function(s){let o=Si(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new Ri);let s=0;for(let o of Si(e)){let a=r[s++];for(let u of i)if(this.Rn(n,o.fieldPath)&&Uu(a))i=this.Vn(i,o,a);else{let c=u.jt(o.kind);er.St.ht(a,c)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let u=new Ri;u.seed(a.Ut()),er.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ie&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=bu(e),i=ao(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{let o=[];return p.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(l,d){let h=d?new Fu(d.sequenceNumber,new Yt(Ui(d.readTime),new T(Mn(d.documentKey)),d.largestBatchId)):Fu.empty(),f=l.fields.map(([m,v])=>new mo(Fe.fromServerFormat(m),v));return new wo(l.indexId,l.collectionGroup,f,h)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:W(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=bu(e),s=ao(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,u=>s.put(lS(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?p.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,u=>this.gn(e,i,u).next(c=>{let l=this.pn(s,u);return c.isEqual(l)?p.resolve():this.yn(e,s,u,c,l)}))))})}wn(e,n,r,i){return oo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return oo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){let i=oo(e),s=new ge(Pr);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new Ni(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new ge(Pr),i=this.dn(n,e);if(i==null)return r;let s=Ev(n);if(s!=null){let o=e.data.field(s.fieldPath);if(Uu(o))for(let a of o.arrayValue.values||[])r=r.add(new Ni(n.indexId,e.key,this.In(a),i))}else r=r.add(new Ni(n.indexId,e.key,ph,i));return r}yn(e,n,r,i,s){E("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(u,c,l,d,h){let f=u.getIterator(),m=c.getIterator(),v=so(f),_=so(m);for(;v||_;){let D=!1,N=!1;if(v&&_){let S=l(v,_);S<0?N=!0:S>0&&(D=!0)}else v!=null?N=!0:D=!0;D?(d(_),_=so(m)):N?(h(v),v=so(f)):(v=so(f),_=so(m))}}(i,s,Pr,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),p.waitFor(o)}fn(e){let n=1;return ao(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Pr(o,a)).filter((o,a,u)=>!a||Pr(o,u[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Pr(o,e),u=Pr(o,n);if(a===0)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,ph,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,ph,[]];s.push(IDBKeyRange.bound(a,u))}return s}bn(e,n){return Pr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(yS)}getMinOffset(e,n){return p.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||R())).next(yS)}};function mS(t){return et(t,"collectionParents")}function oo(t){return et(t,"indexEntries")}function bu(t){return et(t,"indexConfiguration")}function ao(t){return et(t,"indexState")}function yS(t){k(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;dw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Yt(e.readTime,e.documentKey,n)}var vS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function kM(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.Y({range:o},(l,d,h)=>(a++,h.delete()));s.push(u.next(()=>{k(a===1)}));let c=[];for(let l of n.mutations){let d=HS(e,l.key.path,n.batchId);s.push(i.delete(d)),c.push(l.key)}return p.waitFor(s).next(()=>c)}function qh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw R();e=t.noDocument}return JSON.stringify(e).length}Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);var zh=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){k(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Or(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=po(e),o=Or(e);return o.add({}).next(a=>{k(typeof a=="number");let u=new Hu(a,n,r,i),c=function(f,m,v){let _=v.baseMutations.map(N=>Qu(f.ut,N)),D=v.mutations.map(N=>Qu(f.ut,N));return{userId:m,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:_,mutations:D}}(this.serializer,this.userId,u),l=[],d=new ge((h,f)=>W(h.canonicalString(),f.canonicalString()));for(let h of i){let f=HS(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(o.put(c)),l.push(s.put(f,MB))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),p.waitFor(l).next(()=>u)})}lookupMutationBatch(e,n){return Or(e).get(n).next(r=>r?(k(r.userId===this.userId),xi(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?p.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Or(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(k(a.batchId>=r),s=xi(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Or(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Or(e).W("userMutationsIndex",n).next(r=>r.map(i=>xi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=vh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return po(e).Y({range:i},(o,a,u)=>{let[c,l,d]=o,h=Mn(l);if(c===this.userId&&n.path.isEqual(h))return Or(e).get(d).next(f=>{if(!f)throw R();k(f.userId===this.userId),s.push(xi(this.serializer,f))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ge(W),i=[];return n.forEach(s=>{let o=vh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=po(e).Y({range:a},(c,l,d)=>{let[h,f,m]=c,v=Mn(f);h===this.userId&&s.path.isEqual(v)?r=r.add(m):d.done()});i.push(u)}),p.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=vh(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new ge(W);return po(e).Y({range:o},(u,c,l)=>{let[d,h,f]=u,m=Mn(h);d===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):l.done()}).next(()=>this.vn(e,a))}vn(e,n){let r=[],i=[];return n.forEach(s=>{i.push(Or(e).get(s).next(o=>{if(o===null)throw R();k(o.userId===this.userId),r.push(xi(this.serializer,o))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return kM(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return po(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){let u=Mn(s[1]);i.push(u)}else a.done()}).next(()=>{k(i.length===0)})})}containsKey(e,n){return FM(e,this.userId,n)}Mn(e){return VM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function FM(t,e,n){let r=vh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return po(t).Y({range:s,J:!0},(a,u,c)=>{let[l,d,h]=a;l===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function Or(t){return et(t,"mutations")}function po(t){return et(t,"documentMutations")}function VM(t){return et(t,"mutationQueues")}var Ao=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var i_=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new Ao(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>L.fromTimestamp(new Te(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>uo(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(k(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0,s=[];return uo(e).Y((o,a)=>{let u=xu(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>p.waitFor(s)).next(()=>i)}forEachTarget(e,n){return uo(e).Y((r,i)=>{let s=xu(i);n(s)})}Bn(e){return _S(e).get("targetGlobalKey").next(n=>(k(n!==null),n))}Ln(e,n){return _S(e).put("targetGlobalKey",n)}kn(e,n){return uo(e).put(NM(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Li(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return uo(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{let c=xu(a);ac(n,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=kr(e);return n.forEach(o=>{let a=mt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=kr(e);return p.forEach(n,s=>{let o=mt(s.path);return p.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=kr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=kr(e),s=Q();return i.Y({range:r,J:!0},(o,a,u)=>{let c=Mn(o[1]),l=new T(c);s=s.add(l)}).next(()=>s)}containsKey(e,n){let r=mt(n.path),i=IDBKeyRange.bound([r],[LS(r)],!1,!0),s=0;return kr(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}_t(e,n){return uo(e).get(n).next(r=>r?xu(r):null)}};function uo(t){return et(t,"targets")}function _S(t){return et(t,"targetGlobal")}function kr(t){return et(t,"targetDocuments")}function wS([t,e],[n,r]){let i=W(t,n);return i===0?W(e,r):i}var s_=class{constructor(e){this.Qn=e,this.buffer=new ge(wS),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();wS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},o_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){E("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zr(n)?E("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Yr(n)}yield this.Gn(3e5)}))}},a_=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(Vt._e);let r=new s_(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(E("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(vS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(E("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vS):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(E("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),co()<=pn.DEBUG&&E("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-l}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}};function DU(t,e){return new a_(t,e)}var u_=class{constructor(e,n){this.db=e,this.garbageCollector=DU(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return gh(e,r)}removeReference(e,n,r){return gh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return gh(e,n)}Xn(e,n){return function(i,s){let o=!1;return VM(i).Z(a=>FM(i,a,s).next(u=>(u&&(o=!0),p.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.Zn(e,(o,a)=>{if(a<=n){let u=this.Xn(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,L.min()),kr(e).delete(function(d){return[0,mt(d.path)]}(o))))});i.push(u)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return gh(e,n)}Zn(e,n){let r=kr(e),i,s=Vt._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:c})=>{o===0?(s!==Vt._e&&n(new T(Mn(i)),s),s=c,i=u):s=Vt._e}).next(()=>{s!==Vt._e&&n(new T(Mn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function gh(t,e){return kr(t).put(function(r,i){return{targetId:0,path:mt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Gh=class{constructor(){this.changes=new Fn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ze.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var c_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ai(e).put(r)}removeEntry(e,n,r){return Ai(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Bh(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=ze.newInvalidDocument(n);return Ai(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Au(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:ze.newInvalidDocument(n)};return Ai(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Au(n))},(i,s)=>{r={document:this.tr(n,s),size:qh(s)}}).next(()=>r)}getEntries(e,n){let r=Ct();return this.rr(e,n,(i,s)=>{let o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=Ct(),i=new _e(T.comparator);return this.rr(e,n,(s,o)=>{let a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,qh(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return p.resolve();let i=new ge(DS);n.forEach(u=>i=i.add(u));let s=IDBKeyRange.bound(Au(i.first()),Au(i.last())),o=i.getIterator(),a=o.getNext();return Ai(e).Y({index:"documentKeyIndex",range:s},(u,c,l)=>{let d=T.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&DS(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?l.U(Au(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Bh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ai(e).W(IDBKeyRange.bound(a,u,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let l=Ct();for(let d of c){let h=this.tr(T.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(cc(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let s=Ct(),o=IS(n,r),a=IS(n,Yt.max());return Ai(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,c,l)=>{let d=this.tr(T.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&l.done()}).next(()=>s)}newChangeBuffer(e){return new l_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ES(e).get("remoteDocumentGlobalKey").next(n=>(k(!!n),n))}er(e,n){return ES(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let r=wU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(L.min())))return r}return ze.newInvalidDocument(e)}};function LM(t){return new c_(t)}var l_=class extends Gh{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Fn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new ge((s,o)=>W(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){let u=uS(this._r.serializer,o);i=i.add(s.path.popLast());let c=qh(u);r+=c-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){let u=uS(this._r.serializer,o.convertToNoDocument(L.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function ES(t){return et(t,"remoteDocumentGlobal")}function Ai(t){return et(t,"remoteDocumentsV14")}function Au(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function IS(t,e){let n=e.documentKey.path.toArray();return[t,Bh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function DS(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=W(n[s],r[s]),i)return i;return i=W(n.length,r.length),i||(i=W(n[n.length-2],r[r.length-2]),i||W(n[n.length-1],r[r.length-1]))}var d_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Wh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Pu(r.mutation,i,Lt.empty(),Te.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Q()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Q()){let i=xn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Mu();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=xn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Q()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ct(),o=Nu(),a=function(){return Nu()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof dn)?s=s.insert(c.key,c):l!==void 0?(o.set(c.key,l.mutation.getFieldMask()),Pu(l.mutation,c,l.mutation.getFieldMask(),Te.now())):o.set(c.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new d_(l,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Nu(),i=new _e((o,a)=>o-a),s=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||Lt.empty();l=a.applyToLocalView(c,l),r.set(u,l);let d=(i.get(a.batchId)||Q()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,d=uM();l.forEach(h=>{if(!s.has(h)){let f=mM(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return p.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return T.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):p.resolve(xn()),a=-1,u=s;return o.next(c=>p.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Q())).next(l=>({batchId:a,changes:aM(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new T(n)).next(r=>{let i=Mu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Mu();return this.indexManager.getCollectionParents(e,s).next(a=>p.forEach(a,u=>{let c=function(d,h){return new ln(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{let l=c.getKey();o.get(l)===null&&(o=o.insert(l,ze.newInvalidDocument(l)))});let a=Mu();return o.forEach((u,c)=>{let l=s.get(u);l!==void 0&&Pu(l.mutation,c,Lt.empty(),Te.now()),cc(n,c)&&(a=a.insert(u,c))}),a})}};var h_=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return p.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ve(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:vw(i.bundledQuery),readTime:Ve(i.readTime)}}(n)),p.resolve()}};var f_=class{constructor(){this.overlays=new _e(T.comparator),this.lr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=xn();return p.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=xn(),s=n.length+1,o=new T(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new _e((c,l)=>c-l),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);l===null&&(l=xn(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=xn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return p.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qu(n,r));let s=this.lr.get(n);s===void 0&&(s=Q(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var Zu=class{constructor(){this.hr=new ge($e.Pr),this.Ir=new ge($e.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new $e(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new $e(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new T(new ce([])),r=new $e(n,e),i=new $e(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new T(new ce([])),r=new $e(n,e),i=new $e(n,e+1),s=Q();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new $e(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},$e=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return T.comparator(e.key,n.key)||W(e.gr,n.gr)}static Tr(e,n){return W(e.gr,n.gr)||T.comparator(e.key,n.key)}};var p_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new ge($e.Pr)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Hu(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new $e(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(o)}lookupMutationBatch(e,n){return p.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return p.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new $e(n,0),i=new $e(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),p.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ge(W);return n.forEach(i=>{let s=new $e(i,0),o=new $e(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),p.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;T.isDocumentKey(s)||(s=s.child(""));let o=new $e(new T(s),0),a=new ge(W);return this.yr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.gr)),!0)},o),p.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){k(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return p.forEach(n.mutations,i=>{let s=new $e(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new $e(n,0),i=this.yr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var g_=class{constructor(e){this.Cr=e,this.docs=function(){return new _e(T.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():ze.newInvalidDocument(n))}getEntries(e,n){let r=Ct();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ze.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ct(),o=n.path,a=new T(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||dw(BS(l),r)<=0||(i.has(l.key)||cc(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return p.resolve(s)}getAllFromCollectionGroup(e,n,r,i){R()}vr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new m_(this)}getSize(e){return p.resolve(this.size)}},m_=class extends Gh{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var y_=class{constructor(e){this.persistence=e,this.Fr=new Fn(n=>Li(n),ac),this.lastRemoteSnapshotVersion=L.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Zu,this.targetCount=0,this.Nr=Ao.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),p.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new Ao(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.kn(n),p.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(s).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),p.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Or.containsKey(n))}};var Kh=class{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Vt(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new y_(this),this.indexManager=new n_,this.remoteDocumentCache=function(i){return new g_(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new jh(n),this.Kr=new h_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new f_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new p_(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new v_(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return p.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},v_=class extends Ah{constructor(e){super(),this.currentSequenceNumber=e}},Qh=class t{constructor(e){this.persistence=e,this.Gr=new Zu,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw R()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),p.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Hr,r=>{let i=T.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,L.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return p.or([()=>p.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var __=class{constructor(e){this.serializer=e}N(e,n,r,i){let s=new Sh("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BA,{unique:!0}),u.createObjectStore("documentMutations")}(e),CS(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=p.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),CS(e)),o=o.next(()=>function(u){let c=u.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:L.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",l)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,c){return c.store("mutations").W().next(l=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BA,{unique:!0});let d=c.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){let c=u.createObjectStore("documentOverlays",{keyPath:UB});c.createIndex("collectionPathOverlayIndex",$B,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",HB,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){let c=u.createObjectStore("remoteDocumentsV14",{keyPath:xB});c.createIndex("documentKeyIndex",RB),c.createIndex("collectionGroupIndex",NB)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:VB}).createIndex("sequenceNumberIndex",LB,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:jB}).createIndex("documentKeyIndex",BB,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=qh(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>p.forEach(a,u=>{k(u.userId===s.userId);let c=xi(this.serializer,u);return kM(e,s.userId,c).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.Y((o,a)=>{let u=new ce(o),c=function(d){return[0,mt(d)]}(u);s.push(n.get(c).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:mt(d),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>p.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:FB});let r=n.store("collectionParents"),i=new Yu,s=o=>{if(i.add(o)){let a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:mt(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{let u=new ce(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],c)=>{let l=Mn(a);return s(l.popLast())}))}ni(e){let n=e.store("targets");return n.Y((r,i)=>{let s=xu(i),o=NM(this.serializer,s);return n.put(o)})}ri(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{let a=n.store("remoteDocumentsV14"),u=function(d){return d.document?new T(ce.fromString(d.document.name).popFirst(5)):d.noDocument?T.fromSegments(d.noDocument.path):d.unknownDocument?T.fromSegments(d.unknownDocument.path):R()}(o).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>p.waitFor(i))}ii(e,n){let r=n.store("mutations"),i=LM(this.serializer),s=new Kh(Qh.jr,this.serializer.ut);return r.W().next(o=>{let a=new Map;return o.forEach(u=>{var c;let l=(c=a.get(u.userId))!==null&&c!==void 0?c:Q();xi(this.serializer,u).keys().forEach(d=>l=l.add(d)),a.set(u.userId,l)}),p.forEach(a,(u,c)=>{let l=new He(c),d=Uh.ct(this.serializer,l),h=s.getIndexManager(l),f=zh.ct(l,this.serializer,h,s.referenceDelegate);return new Wh(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Lu(n,Vt._e),u).next()})})}};function CS(t){t.createObjectStore("targetDocuments",{keyPath:OB}).createIndex("documentTargetsIndex",kB,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PB,{unique:!0}),t.createObjectStore("targetGlobal")}var dv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",w_=class t{constructor(e,n,r,i,s,o,a,u,c,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=c,this._i=l,this.ai=d,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!t.D())throw new w(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new u_(this,i),this.Ii=n+"main",this.serializer=new jh(u),this.Ti=new Br(this.Ii,this.ai,new __(this.serializer)),this.qr=new i_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LM(this.serializer),this.Kr=new Qv,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,l===!1&&ke("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,dv);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Vt(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>y(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>y(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>y(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Zr(e))return E("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return E("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Su(e).get("owner").next(n=>p.resolve(this.wi(n)))}Si(e){return mh(e).delete(this.clientId)}bi(){return y(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=et(n,"clientMetadata");return r.W().next(i=>{let s=this.Ci(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return p.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?p.resolve(!0):Su(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,dv);return!1}}return!(!this.networkEnabled||!this.inForeground)||mh(e).W().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&E("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return y(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Lu(e,Vt._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>mh(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return zh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new r_(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Uh.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){E("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===15?zB:u===14?GS:u===13?zS:u===12?qB:u===11?qS:void R()}(this.ai),o;return this.Ti.runTransaction(e,i,s,a=>(o=new Lu(a,this.Lr?this.Lr.next():Vt._e),n==="readwrite-primary"?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw ke(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new w(g.FAILED_PRECONDITION,US);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return Su(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new w(g.FAILED_PRECONDITION,dv)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Su(e).put("owner",n)}static D(){return Br.D()}pi(e){let n=Su(e);return n.get("owner").next(r=>this.wi(r)?(E("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Di(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(ke(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;fE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return E("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ke("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){ke("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Su(t){return et(t,"owner")}function mh(t){return et(t,"clientMetadata")}function ww(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var E_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Q(),i=Q();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var I_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Yh=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new I_;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(co()<=pn.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),p.resolve()):(co()<=pn.DEBUG&&E("QueryEngine","Query:",lo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(co()<=pn.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yt(n))):p.resolve())}zi(e,n){if(ZA(n))return p.resolve(null);let r=yt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=kh(n,null,"F"),r=yt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Q(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Yi(n,a);return this.Zi(n,c,o,u.readTime)?this.zi(e,kh(n,null,"F")):this.Xi(e,c,n,u)}))})))}ji(e,n,r,i){return ZA(n)||i.isEqual(L.min())?p.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?p.resolve(null):(co()<=pn.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lo(n)),this.Xi(e,o,n,jS(i,-1)).next(a=>a))})}Yi(e,n){let r=new ge(sM(e));return n.forEach((i,s)=>{cc(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return co()<=pn.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",lo(n)),this.Gi.getDocumentsMatchingQuery(e,n,Yt.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var D_=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new _e(W),this.ns=new Fn(s=>Li(s),ac),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wh(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function jM(t,e,n,r){return new D_(t,e,n,r)}function BM(t,e){return y(this,null,function*(){let n=A(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=Q();for(let c of i){o.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of s){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})})}function CU(t,e){let n=A(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let d=c.batch,h=d.keys(),f=p.resolve();return h.forEach(m=>{f=f.next(()=>l.getEntry(u,m)).next(v=>{let _=c.docVersions.get(m);k(_!==null),v.version.compareTo(_)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),l.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Q();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function UM(t){let e=A(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function TU(t,e){let n=A(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Je.EMPTY_BYTE_STRING,L.min()).withLastLimboFreeSnapshotVersion(L.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(v,_,D){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(h,f,l)&&a.push(n.qr.updateTargetData(s,f))});let u=Ct(),c=Q();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push($M(s,o,e.documentUpdates).next(l=>{u=l.us,c=l.cs})),!r.isEqual(L.min())){let l=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ts=i,s))}function $M(t,e,n){let r=Q(),i=Q();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ct();return n.forEach((a,u)=>{let c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(L.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{us:o,cs:i}})}function bU(t,e){let n=A(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function So(t,e){let n=A(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,p.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new bo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function Mo(t,e,n){return y(this,null,function*(){let r=A(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Zr(o))throw o;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function Zh(t,e,n){let r=A(t),i=L.min(),s=Q();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,l){let d=A(u),h=d.ns.get(l);return h!==void 0?p.resolve(d.ts.get(h)):d.qr.getTargetData(c,l)}(r,o,yt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:L.min(),n?s:Q())).next(a=>(zM(r,iM(e),a),{documents:a,ls:s})))}function HM(t,e){let n=A(t),r=A(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function qM(t,e){let n=A(t),r=n.rs.get(e)||L.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,jS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(zM(n,e,i),i))}function zM(t,e,n){let r=t.rs.get(e)||L.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function AU(t,e,n,r){return y(this,null,function*(){let i=A(t),s=Q(),o=Ct();for(let c of n){let l=e.hs(c.metadata.name);c.document&&(s=s.add(l));let d=e.Ps(c);d.setReadTime(e.Is(c.metadata.readTime)),o=o.insert(l,d)}let a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield So(i,function(l){return yt(Fo(ce.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>$M(c,a,o).next(l=>(a.apply(c),l)).next(l=>i.qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.qr.addMatchingKeys(c,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,l.us,l.cs)).next(()=>l.us)))})}function SU(r,i){return y(this,arguments,function*(t,e,n=Q()){let s=yield So(t,yt(vw(e.bundledQuery))),o=A(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ve(e.readTime);if(s.snapshotVersion.compareTo(u)>=0)return o.Kr.saveNamedQuery(a,e);let c=s.withResumeToken(Je.EMPTY_BYTE_STRING,u);return o.ts=o.ts.insert(c.targetId,c),o.qr.updateTargetData(a,c).next(()=>o.qr.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.qr.addMatchingKeys(a,n,s.targetId)).next(()=>o.Kr.saveNamedQuery(a,e))})})}function TS(t,e){return`firestore_clients_${t}_${e}`}function bS(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function hv(t,e){return`firestore_targets_${t}_${e}`}var Xh=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new w(i.error.code,i.error.message))),o?new t(e,n,i.state,s):(ke("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ou=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new w(r.error.code,r.error.message))),s?new t(e,r.state,i):(ke("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Jh=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=mw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=$S(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(ke("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},C_=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(ke("SharedClientState",`Failed to parse online state: ${e}`),null)}},Xu=class{constructor(){this.activeTargetIds=mw()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},ku=class{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new _e(W),this.started=!1,this.ps=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=TS(this.persistenceKey,this.Rs),this.ws=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Xu),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return y(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Rs)continue;let i=this.getItem(TS(this.persistenceKey,r));if(i){let s=Jh.Ts(r,i);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let r=this.Ms(n);r&&this.xs(r)}for(let r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(hv(this.persistenceKey,e));if(r){let i=Ou.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hv(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return E("SharedClientState","READ",e,n),n}setItem(e,n){E("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){E("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(E("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void ke("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>y(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let r=this.Ks(n.key);return this.$s(r,null)}{let r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){let r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){let r=function(s){let o=Vt._e;if(s!=null)try{let a=JSON.parse(s);k(typeof a=="number"),o=a}catch(a){ke("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Vt._e&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){let r=this.Hs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){let i=new Xh(this.currentUser,e,n,r),s=bS(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){let n=bS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){let i=hv(this.persistenceKey,e),s=new Ou(e,n,r);this.setItem(i,s.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let r=this.Ks(e);return Jh.Ts(r,n)}Ws(e,n){let r=this.bs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Xh.Ts(new He(s),i,n)}zs(e,n){let r=this.Ds.exec(e),i=Number(r[1]);return Ou.Ts(i,n)}Ms(e){return C_.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return y(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);E("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=mw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},ef=class{constructor(){this.eo=new Xu,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Xu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var T_=class{ro(e){}shutdown(){}};var tf=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var yh=null;function fv(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}var MU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var b_=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var at="WebChannelConnection",A_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){let a=fv(),u=this.So(n,r);E("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,s,o),this.Do(n,u,c,i).then(l=>(E("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Qt("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ko}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){let i=MU[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){let s=fv();return new Promise((o,a)=>{let u=new kA;u.setWithCredentials(!0),u.listenOnce(PA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case fh.NO_ERROR:let l=u.getResponseJson();E(at,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case fh.TIMEOUT:E(at,`RPC '${e}' ${s} timed out`),a(new w(g.DEADLINE_EXCEEDED,"Request time out"));break;case fh.HTTP_ERROR:let d=u.getStatus();if(E(at,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let m=function(_){let D=_.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(D)>=0?D:g.UNKNOWN}(f.status);a(new w(m,f.message))}else a(new w(g.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new w(g.UNAVAILABLE,"Connection failed."));break;default:R()}}finally{E(at,`RPC '${e}' ${s} completed.`)}});let c=JSON.stringify(i);E(at,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}vo(e,n,r){let i=fv(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RA(),a=NA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=s.join("");E(at,`Creating RPC '${e}' stream ${i}: ${l}`,u);let d=o.createWebChannel(l,u),h=!1,f=!1,m=new b_({co:_=>{f?E(at,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(E(at,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(at,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},lo:()=>d.close()}),v=(_,D,N)=>{_.listen(D,S=>{try{N(S)}catch(j){setTimeout(()=>{throw j},0)}})};return v(d,Cu.EventType.OPEN,()=>{f||E(at,`RPC '${e}' stream ${i} transport opened.`)}),v(d,Cu.EventType.CLOSE,()=>{f||(f=!0,E(at,`RPC '${e}' stream ${i} transport closed`),m.Ro())}),v(d,Cu.EventType.ERROR,_=>{f||(f=!0,Qt(at,`RPC '${e}' stream ${i} transport errored:`,_),m.Ro(new w(g.UNAVAILABLE,"The operation could not be completed")))}),v(d,Cu.EventType.MESSAGE,_=>{var D;if(!f){let N=_.data[0];k(!!N);let S=N,j=S.error||((D=S[0])===null||D===void 0?void 0:D.error);if(j){E(at,`RPC '${e}' stream ${i} received error:`,j);let $=j.status,K=function(kf){let oE=Ue[kf];if(oE!==void 0)return _M(oE)}($),we=j.message;K===void 0&&(K=g.INTERNAL,we="Unknown error status: "+$+" with message "+j.message),f=!0,m.Ro(new w(K,we)),d.close()}else E(at,`RPC '${e}' stream ${i} received:`,N),m.Vo(N)}}),v(a,OA.STAT_EVENT,_=>{_.stat===cv.PROXY?E(at,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===cv.NOPROXY&&E(at,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Ao()},0),m}};function GM(){return typeof window<"u"?window:null}function Ih(){return typeof document<"u"?document:null}function lc(t){return new zv(t,!0)}var Ju=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var nf=class{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Ju(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return y(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return y(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){return y(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(ke(n.toString()),ke("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(n)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{let i=new w(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){let r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(()=>y(this,null,function*(){this.state=0,this.start()}))}o_(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},S_=class extends nf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();let n=fU(this.serializer,e),r=function(s){if(!("targetChange"in s))return L.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?L.min():o.readTime?Ve(o.readTime):L.min()}(e);return this.listener.a_(n,r)}u_(e){let n={};n.database=Ku(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Ph(u)?{documents:bM(s,u)}:{query:AM(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=EM(s,o.resumeToken);let c=Gv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(L.min())>0){a.readTime=To(s,o.snapshotVersion.toTimestamp());let c=Gv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=gU(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){let n={};n.database=Ku(this.serializer),n.removeTarget=e,this.e_(n)}},M_=class extends nf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(k(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();let n=pU(e.writeResults,e.commitTime),r=Ve(e.commitTime);return this.listener.I_(r,n)}return k(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){let e={};e.database=Ku(this.serializer),this.e_(e)}P_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Qu(this.serializer,r))};this.e_(n)}};var x_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new w(g.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new w(g.UNKNOWN,s.toString())})}terminate(){this.d_=!0}};var R_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(ke(n),this.f_=!1):E("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var N_=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(()=>y(this,null,function*(){Xr(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(u){return y(this,null,function*(){let c=A(u);c.C_.add(4),yield Vo(c),c.M_.set("Unknown"),c.C_.delete(4),yield dc(c)})}(this))}))}),this.M_=new R_(r,i)}};function dc(t){return y(this,null,function*(){if(Xr(t))for(let e of t.v_)yield e(!0)})}function Vo(t){return y(this,null,function*(){for(let e of t.v_)yield e(!1)})}function If(t,e){let n=A(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Dw(n)?Iw(n):jo(n).Ho()&&Ew(n,e))}function ec(t,e){let n=A(t),r=jo(n);n.D_.delete(e),r.Ho()&&WM(n,e),n.D_.size===0&&(r.Ho()?r.Zo():Xr(n)&&n.M_.set("Unknown"))}function Ew(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(L.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jo(t).u_(e)}function WM(t,e){t.x_.Oe(e),jo(t).c_(e)}function Iw(t){t.x_=new qv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),jo(t).start(),t.M_.g_()}function Dw(t){return Xr(t)&&!jo(t).jo()&&t.D_.size>0}function Xr(t){return A(t).C_.size===0}function KM(t){t.x_=void 0}function xU(t){return y(this,null,function*(){t.D_.forEach((e,n)=>{Ew(t,e)})})}function RU(t,e){return y(this,null,function*(){KM(t),Dw(t)?(t.M_.w_(e),Iw(t)):t.M_.set("Unknown")})}function NU(t,e,n){return y(this,null,function*(){if(t.M_.set("Online"),e instanceof Vh&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.D_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rf(t,r)}else if(e instanceof vo?t.x_.$e(e):e instanceof Fh?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(L.min()))try{let r=yield UM(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.x_.it(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=s.D_.get(c);l&&s.D_.set(c,l.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{let l=s.D_.get(u);if(!l)return;s.D_.set(u,l.withResumeToken(Je.EMPTY_BYTE_STRING,l.snapshotVersion)),WM(s,u);let d=new bo(l.target,u,c,l.sequenceNumber);Ew(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield rf(t,r)}})}function rf(t,e,n){return y(this,null,function*(){if(!Zr(e))throw e;t.C_.add(1),yield Vo(t),t.M_.set("Offline"),n||(n=()=>UM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield dc(t)}))})}function QM(t,e){return e().catch(n=>rf(t,n,e))}function Lo(t){return y(this,null,function*(){let e=A(t),n=Qr(e),r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;PU(e);)try{let i=yield bU(e.localStore,r);if(i===null){e.b_.length===0&&n.Zo();break}r=i.batchId,OU(e,i)}catch(i){yield rf(e,i)}YM(e)&&ZM(e)})}function PU(t){return Xr(t)&&t.b_.length<10}function OU(t,e){t.b_.push(e);let n=Qr(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function YM(t){return Xr(t)&&!Qr(t).jo()&&t.b_.length>0}function ZM(t){Qr(t).start()}function kU(t){return y(this,null,function*(){Qr(t).E_()})}function FU(t){return y(this,null,function*(){let e=Qr(t);for(let n of t.b_)e.P_(n.mutations)})}function VU(t,e,n){return y(this,null,function*(){let r=t.b_.shift(),i=Uv.from(r,e,n);yield QM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Lo(t)})}function LU(t,e){return y(this,null,function*(){e&&Qr(t).h_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return vM(o)&&o!==g.ABORTED}(i.code)){let s=r.b_.shift();Qr(r).Yo(),yield QM(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Lo(r)}})}(t,e)),YM(t)&&ZM(t)})}function AS(t,e){return y(this,null,function*(){let n=A(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=Xr(n);n.C_.add(3),yield Vo(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield dc(n)})}function P_(t,e){return y(this,null,function*(){let n=A(t);e?(n.C_.delete(2),yield dc(n)):e||(n.C_.add(2),yield Vo(n),n.M_.set("Unknown"))})}function jo(t){return t.O_||(t.O_=function(n,r,i){let s=A(n);return s.A_(),new S_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:xU.bind(null,t),Io:RU.bind(null,t),a_:NU.bind(null,t)}),t.v_.push(e=>y(this,null,function*(){e?(t.O_.Yo(),Dw(t)?Iw(t):t.M_.set("Unknown")):(yield t.O_.stop(),KM(t))}))),t.O_}function Qr(t){return t.N_||(t.N_=function(n,r,i){let s=A(n);return s.A_(),new M_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:kU.bind(null,t),Io:LU.bind(null,t),T_:FU.bind(null,t),I_:VU.bind(null,t)}),t.v_.push(e=>y(this,null,function*(){e?(t.N_.Yo(),yield Lo(t)):(yield t.N_.stop(),t.b_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_}var O_=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Bo(t,e){if(ke("AsyncQueue",`${e}: ${t}`),Zr(t))return new w(g.UNAVAILABLE,`${e}: ${t}`);throw t}var sf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||T.comparator(n.key,r.key):(n,r)=>T.comparator(n.key,r.key),this.keyedMap=Mu(),this.sortedSet=new _e(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var of=class{constructor(){this.B_=new _e(T.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):R():this.B_=this.B_.insert(n,e)}L_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},xo=class t{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,sf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var k_=class{constructor(){this.k_=void 0,this.listeners=[]}},F_=class{constructor(){this.queries=new Fn(e=>rM(e),uc),this.onlineState="Unknown",this.q_=new Set}};function Cw(t,e){return y(this,null,function*(){let n=A(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new k_),i)try{s.k_=yield n.onListen(r)}catch(o){let a=Bo(o,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&bw(n)})}function Tw(t,e){return y(this,null,function*(){let n=A(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function jU(t,e){let n=A(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&bw(n)}function BU(t,e,n){let r=A(t),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(n);r.queries.delete(e)}function bw(t){t.q_.forEach(e=>{e.next()})}var tc=class{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new xo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var V_=class{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}};var af=class{constructor(e){this.serializer=e}hs(e){return Nn(this.serializer,e)}Ps(e){return e.metadata.exists?TM(this.serializer,e.document,!1):ze.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Ve(e)}},L_=class{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XM(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;let r=ce.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){let n=new Map,r=new af(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.hs(i.metadata.name);for(let o of i.metadata.queries){let a=(n.get(o)||Q()).add(s);n.set(o,a)}}return n}complete(){return y(this,null,function*(){let e=yield AU(this.localStore,new af(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(let r of this.queries)yield SU(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}})}};function XM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var uf=class{constructor(e){this.key=e}},cf=class{constructor(e){this.key=e}},lf=class{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Q(),this.mutatedKeys=Q(),this._a=sM(e),this.aa=new sf(this._a)}get ua(){return this.ia}ca(e,n){let r=n?n.la:new of,i=n?n.aa:this.aa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=cc(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),_=!1;h&&f?h.data.isEqual(f.data)?m!==v&&(r.track({type:3,doc:f}),_=!0):this.ha(h,f)||(r.track({type:2,doc:f}),_=!0,(u&&this._a(f,u)>0||c&&this._a(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(u||c)&&(a=!0)),_&&(f?(o=o.add(f),s=v?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let o=e.la.L_();o.sort((l,d)=>function(f,m){let v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return R()}};return v(f)-v(m)}(l.type,d.type)||this._a(l.doc,d.doc)),this.Pa(r),i=i!=null&&i;let a=n&&!i?this.Ia():[],u=this.oa.size===0&&this.current&&!i?1:0,c=u!==this.sa;return this.sa=u,o.length!==0||c?{snapshot:new xo(this.query,e.aa,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new of,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=Q(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});let n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new cf(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new uf(r))}),n}da(e){this.ia=e.ls,this.oa=Q();let n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return xo.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},j_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},B_=class{constructor(e){this.key=e,this.Ra=!1}},U_=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Fn(a=>rM(a),uc),this.fa=new Map,this.ga=new Set,this.pa=new _e(T.comparator),this.ya=new Map,this.wa=new Zu,this.Sa={},this.ba=new Map,this.Da=Ao.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function UU(t,e){return y(this,null,function*(){let n=Rw(t),r,i,s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{let o=yield So(n.localStore,yt(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield Aw(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&If(n.remoteStore,o)}return i})}function Aw(t,e,n,r,i){return y(this,null,function*(){t.va=(d,h,f)=>function(v,_,D,N){return y(this,null,function*(){let S=_.view.ca(D);S.Zi&&(S=yield Zh(v.localStore,_.query,!1).then(({documents:we})=>_.view.ca(we,S)));let j=N&&N.targetChanges.get(_.targetId),$=N&&N.targetMismatches.get(_.targetId)!=null,K=_.view.applyChanges(S,v.isPrimaryClient,j,$);return $_(v,_.targetId,K.Ta),K.snapshot})}(t,d,h,f);let s=yield Zh(t.localStore,e,!0),o=new lf(e,s.ls),a=o.ca(s.documents),u=Gu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);$_(t,n,c.Ta);let l=new j_(e,n,o);return t.ma.set(e,l),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),c.snapshot})}function $U(t,e){return y(this,null,function*(){let n=A(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!uc(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Mo(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ec(n.remoteStore,r.targetId),Ro(n,r.targetId)}).catch(Yr))):(Ro(n,r.targetId),yield Mo(n.localStore,r.targetId,!0))})}function HU(t,e,n){return y(this,null,function*(){let r=Nw(t);try{let i=yield function(o,a){let u=A(o),c=Te.now(),l=a.reduce((f,m)=>f.add(m.key),Q()),d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=Ct(),v=Q();return u.ss.getEntries(f,l).next(_=>{m=_,m.forEach((D,N)=>{N.isValidDocument()||(v=v.add(D))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,m)).next(_=>{d=_;let D=[];for(let N of a){let S=oU(N,d.get(N.key).overlayedDocument);S!=null&&D.push(new dn(N.key,S,YS(S.value.mapValue),Me.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,D,a)}).next(_=>{h=_;let D=_.applyToLocalDocumentSet(d,v);return u.documentOverlayCache.saveOverlays(f,_.batchId,D)})}).then(()=>({batchId:h.batchId,changes:aM(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Sa[o.currentUser.toKey()];c||(c=new _e(W)),c=c.insert(a,u),o.Sa[o.currentUser.toKey()]=c}(r,i.batchId,n),yield or(r,i.changes),yield Lo(r.remoteStore)}catch(i){let s=Bo(i,"Failed to persist write");n.reject(s)}})}function JM(t,e){return y(this,null,function*(){let n=A(t);try{let r=yield TU(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.ya.get(s);o&&(k(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?k(o.Ra):i.removedDocuments.size>0&&(k(o.Ra),o.Ra=!1))}),yield or(n,r,e)}catch(r){yield Yr(r)}})}function SS(t,e,n){let r=A(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ma.forEach((s,o)=>{let a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=A(o);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(let h of d.listeners)h.Q_(a)&&(c=!0)}),c&&bw(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qU(t,e,n){return y(this,null,function*(){let r=A(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.ya.get(e),s=i&&i.key;if(s){let o=new _e(T.comparator);o=o.insert(s,ze.newNoDocument(s,L.min()));let a=Q().add(s),u=new zu(L.min(),new Map,new _e(W),o,a);yield JM(r,u),r.pa=r.pa.remove(s),r.ya.delete(e),xw(r)}else yield Mo(r.localStore,e,!1).then(()=>Ro(r,e,n)).catch(Yr)})}function zU(t,e){return y(this,null,function*(){let n=A(t),r=e.batch.batchId;try{let i=yield CU(n.localStore,e);Mw(n,r,null),Sw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield or(n,i)}catch(i){yield Yr(i)}})}function GU(t,e,n){return y(this,null,function*(){let r=A(t);try{let i=yield function(o,a){let u=A(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(k(d!==null),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);Mw(r,e,n),Sw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield or(r,i)}catch(i){yield Yr(i)}})}function WU(t,e){return y(this,null,function*(){let n=A(t);Xr(n.remoteStore)||E("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=A(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){let i=Bo(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Sw(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function Mw(t,e,n){let r=A(t),i=r.Sa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Ro(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||ex(t,r)})}function ex(t,e){t.ga.delete(e.path.canonicalString());let n=t.pa.get(e);n!==null&&(ec(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),xw(t))}function $_(t,e,n){for(let r of n)r instanceof uf?(t.wa.addReference(r.key,e),KU(t,r)):r instanceof cf?(E("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||ex(t,r.key)):R()}function KU(t,e){let n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ga.add(r),xw(t))}function xw(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){let e=t.ga.values().next().value;t.ga.delete(e);let n=new T(ce.fromString(e)),r=t.Da.next();t.ya.set(r,new B_(n)),t.pa=t.pa.insert(n,r),If(t.remoteStore,new bo(yt(Fo(n.path)),r,"TargetPurposeLimboResolution",Vt._e))}}function or(t,e,n){return y(this,null,function*(){let r=A(t),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=E_.Qi(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.Va.a_(i),yield function(u,c){return y(this,null,function*(){let l=A(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(c,h=>p.forEach(h.ki,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Zr(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let f=l.ts.get(h),m=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(m);l.ts=l.ts.insert(h,v)}}})}(r.localStore,s))})}function QU(t,e){return y(this,null,function*(){let n=A(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield BM(n.localStore,e);n.currentUser=e,function(s,o){s.ba.forEach(a=>{a.forEach(u=>{u.reject(new w(g.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield or(n,r._s)}})}function YU(t,e){let n=A(t),r=n.ya.get(e);if(r&&r.Ra)return Q().add(r.key);{let i=Q(),s=n.fa.get(e);if(!s)return i;for(let o of s){let a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function ZU(t,e){return y(this,null,function*(){let n=A(t),r=yield Zh(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&$_(n,e.targetId,i.Ta),i})}function XU(t,e){return y(this,null,function*(){let n=A(t);return qM(n.localStore,e).then(r=>or(n,r))})}function JU(t,e,n,r){return y(this,null,function*(){let i=A(t),s=yield function(a,u){let c=A(a),l=A(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.Cn(d,u).next(h=>h?c.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?yield Lo(i.remoteStore):n==="acknowledged"||n==="rejected"?(Mw(i,e,r||null),Sw(i,e),function(a,u){A(A(a).mutationQueue).Fn(u)}(i.localStore,e)):R(),yield or(i,s)):E("SyncEngine","Cannot apply mutation batch with id: "+e)})}function e$(t,e){return y(this,null,function*(){let n=A(t);if(Rw(n),Nw(n),e===!0&&n.Ca!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield MS(n,r.toArray());n.Ca=!0,yield P_(n.remoteStore,!0);for(let s of i)If(n.remoteStore,s)}else if(e===!1&&n.Ca!==!1){let r=[],i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ro(n,o),Mo(n.localStore,o,!0))),ec(n.remoteStore,o)}),yield i,yield MS(n,r),function(o){let a=A(o);a.ya.forEach((u,c)=>{ec(a.remoteStore,c)}),a.wa.Vr(),a.ya=new Map,a.pa=new _e(T.comparator)}(n),n.Ca=!1,yield P_(n.remoteStore,!1)}})}function MS(t,e,n){return y(this,null,function*(){let r=A(t),i=[],s=[];for(let o of e){let a,u=r.fa.get(o);if(u&&u.length!==0){a=yield So(r.localStore,yt(u[0]));for(let c of u){let l=r.ma.get(c),d=yield ZU(r,l);d.snapshot&&s.push(d.snapshot)}}else{let c=yield HM(r.localStore,o);a=yield So(r.localStore,c),yield Aw(r,tx(c),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i})}function tx(t){return nM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function t$(t){return function(n){return A(A(n).persistence).Bi()}(A(t).localStore)}function n$(t,e,n,r){return y(this,null,function*(){let i=A(t);if(i.Ca)return void E("SyncEngine","Ignoring unexpected query state notification.");let s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield qM(i.localStore,iM(s[0])),a=zu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Je.EMPTY_BYTE_STRING);yield or(i,o,a);break}case"rejected":yield Mo(i.localStore,e,!0),Ro(i,e,r);break;default:R()}})}function r$(t,e,n){return y(this,null,function*(){let r=Rw(t);if(r.Ca){for(let i of e){if(r.fa.has(i)){E("SyncEngine","Adding an already active target "+i);continue}let s=yield HM(r.localStore,i),o=yield So(r.localStore,s);yield Aw(r,tx(s),o.targetId,!1,o.resumeToken),If(r.remoteStore,o)}for(let i of n)r.fa.has(i)&&(yield Mo(r.localStore,i,!1).then(()=>{ec(r.remoteStore,i),Ro(r,i)}).catch(Yr))}})}function Rw(t){let e=A(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qU.bind(null,e),e.Va.a_=jU.bind(null,e.eventManager),e.Va.Fa=BU.bind(null,e.eventManager),e}function Nw(t){let e=A(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GU.bind(null,e),e}function i$(t,e,n){let r=A(t);(function(s,o,a){return y(this,null,function*(){try{let u=yield o.getMetadata();if(yield function(f,m){let v=A(f),_=Ve(m.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",D=>v.Kr.getBundleMetadata(D,m.id)).then(D=>!!D&&D.createTime.compareTo(_)>=0)}(s.localStore,u))return yield o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(XM(u));let c=new L_(u,s.localStore,o.serializer),l=yield o.Ma();for(;l;){let h=yield c.ea(l);h&&a._updateProgress(h),l=yield o.Ma()}let d=yield c.complete();return yield or(s,d.ra,void 0),yield function(f,m){let v=A(f);return v.persistence.runTransaction("Save bundle","readwrite",_=>v.Kr.saveBundleMetadata(_,m))}(s.localStore,u),a._completeWith(d.progress),Promise.resolve(d.na)}catch(u){return Qt("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var nc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=lc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return jM(this.persistence,new Yh,e.initialUser,this.serializer)}createPersistence(e){return new Kh(Qh.jr,this.serializer)}createSharedClientState(e){return new ef}terminate(){return y(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var df=class t extends nc{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){yield Ff(t.prototype,this,"initialize").call(this,e),yield this.xa.initialize(this,e),yield Nw(this.xa.syncEngine),yield Lo(this.xa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return jM(this.persistence,new Yh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new o_(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new Tv(n,this.persistence);return new Cv(e.asyncQueue,r)}createPersistence(e){let n=ww(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new w_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,GM(),Ih(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ef}},H_=class t extends df{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return y(this,null,function*(){yield Ff(t.prototype,this,"initialize").call(this,e);let n=this.xa.syncEngine;this.sharedClientState instanceof ku&&(this.sharedClientState.syncEngine={Ys:JU.bind(null,n),Zs:n$.bind(null,n),Xs:r$.bind(null,n),Bi:t$.bind(null,n),Js:XU.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(r=>y(this,null,function*(){yield e$(this.xa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=GM();if(!ku.D(n))throw new w(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=ww(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ku(n,e.asyncQueue,r,e.clientId,e.initialUser)}},rc=class{initialize(e,n){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>SS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QU.bind(null,this.syncEngine),yield P_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new F_}()}createDatastore(e){let n=lc(e.databaseInfo.databaseId),r=function(s){return new A_(s)}(e.databaseInfo);return function(s,o,a,u){return new x_(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new N_(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>SS(this.syncEngine,n,0),function(){return tf.D()?new tf:new T_}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,l){let d=new U_(i,s,o,a,u,c);return l&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(n){return y(this,null,function*(){let r=A(n);E("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield Vo(r),r.F_.shutdown(),r.M_.set("Unknown")})}(this.remoteStore)}};function xS(t,e=10240){let n=0;return{read(){return y(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return y(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var No=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):ke("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var q_=class{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new qe,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){return y(this,null,function*(){return this.metadata.promise})}Ma(){return y(this,null,function*(){return yield this.getMetadata(),this.ka()})}ka(){return y(this,null,function*(){let e=yield this.qa();if(e===null)return null;let n=this.La.decode(e),r=Number(n);isNaN(r)&&this.Qa(`length string (${n}) is not valid number`);let i=yield this.Ka(r);return new V_(JSON.parse(i),e.length+r)})}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){return y(this,null,function*(){for(;this.$a()<0&&!(yield this.Ua()););if(this.buffer.length===0)return null;let e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ka(e){return y(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ua())&&this.Qa("Reached the end of bundle when more is expected.");let n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){return y(this,null,function*(){let e=yield this.Ba.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var z_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new w(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let n=yield function(i,s){return y(this,null,function*(){let o=A(i),a=Ku(o.serializer)+"/documents",u={documents:s.map(h=>Wu(o.serializer,h))},c=yield o.Co("BatchGetDocuments",a,u,s.length),l=new Map;c.forEach(h=>{let f=hU(o.serializer,h);l.set(f.key.toString(),f)});let d=[];return s.forEach(h=>{let f=l.get(h.toString());k(!!f),d.push(f)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=T.fromPath(r);this.mutations.push(new $u(i,this.precondition(i)))}),yield function(r,i){return y(this,null,function*(){let s=A(r),o=Ku(s.serializer)+"/documents",a={writes:i.map(u=>Qu(s.serializer,u))};yield s.wo("Commit",o,a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw R();n=L.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new w(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(L.min())?Me.exists(!1):Me.updateTime(n):Me.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(L.min()))throw new w(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Me.updateTime(n)}return Me.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var G_=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new Ju(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(()=>y(this,null,function*(){let e=new z_(this.datastore),n=this.za(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ja(i)}))}).catch(r=>{this.ja(r)})}))}za(e){try{let n=this.updateFunction(e);return!oc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!vM(n)}return!1}};var W_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=Th.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>y(this,null,function*(){E("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(E("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){return y(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new qe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Bo(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Dh(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield BM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function K_(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Pw(t);E("FirestoreClient","Initializing OnlineComponentProvider");let r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>AS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>AS(e.remoteStore,s)),t._onlineComponents=e})}function nx(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Pw(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Dh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!nx(n))throw n;Qt("Error using user provided cache. Falling back to memory cache: "+n),yield Dh(t,new nc)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield Dh(t,new nc);return t._offlineComponents})}function Df(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield K_(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield K_(t,new rc))),t._onlineComponents})}function rx(t){return Pw(t).then(e=>e.persistence)}function Ow(t){return Pw(t).then(e=>e.localStore)}function ix(t){return Df(t).then(e=>e.remoteStore)}function kw(t){return Df(t).then(e=>e.syncEngine)}function s$(t){return Df(t).then(e=>e.datastore)}function Po(t){return y(this,null,function*(){let e=yield Df(t),n=e.eventManager;return n.onListen=UU.bind(null,e.syncEngine),n.onUnlisten=$U.bind(null,e.syncEngine),n})}function o$(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield rx(t),n=yield ix(t);return e.setNetworkEnabled(!0),function(i){let s=A(i);return s.C_.delete(0),dc(s)}(n)}))}function a$(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield rx(t),n=yield ix(t);return e.setNetworkEnabled(!1),function(i){return y(this,null,function*(){let s=A(i);s.C_.add(0),yield Vo(s),s.M_.set("Offline")})}(n)}))}function u$(t,e){let n=new qe;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s,o){return y(this,null,function*(){try{let a=yield function(c,l){let d=A(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new w(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Bo(a,`Failed to get document '${s} from cache`);o.reject(u)}})}(yield Ow(t),e,n)})),n.promise}function sx(t,e,n={}){let r=new qe;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,u,c){let l=new No({next:h=>{o.enqueueAndForget(()=>Tw(s,d));let f=h.docs.has(a);!f&&h.fromCache?c.reject(new w(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?c.reject(new w(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new tc(Fo(a.path),l,{includeMetadataChanges:!0,J_:!0});return Cw(s,d)}(yield Po(t),t.asyncQueue,e,n,r)})),r.promise}function c$(t,e){let n=new qe;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s,o){return y(this,null,function*(){try{let a=yield Zh(i,s,!0),u=new lf(s,a.ls),c=u.ca(a.documents),l=u.applyChanges(c,!1);o.resolve(l.snapshot)}catch(a){let u=Bo(a,`Failed to execute query '${s} against cache`);o.reject(u)}})}(yield Ow(t),e,n)})),n.promise}function ox(t,e,n={}){let r=new qe;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,u,c){let l=new No({next:h=>{o.enqueueAndForget(()=>Tw(s,d)),h.fromCache&&u.source==="server"?c.reject(new w(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new tc(a,l,{includeMetadataChanges:!0,J_:!0});return Cw(s,d)}(yield Po(t),t.asyncQueue,e,n,r)})),r.promise}function l$(t,e){let n=new No(e);return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s){A(i).q_.add(s),s.next()}(yield Po(t),n)})),()=>{n.Na(),t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s){A(i).q_.delete(s)}(yield Po(t),n)}))}}function d$(t,e,n,r){let i=function(o,a){let u;return u=typeof o=="string"?wM().encode(o):o,function(l,d){return new q_(l,d)}(function(l,d){if(l instanceof Uint8Array)return xS(l,d);if(l instanceof ArrayBuffer)return xS(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,lc(e));t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){i$(yield kw(t),i,r)}))}function h$(t,e){return t.asyncQueue.enqueue(()=>y(this,null,function*(){return function(r,i){let s=A(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield Ow(t),e)}))}function ax(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var RS=new Map;function Fw(t,e,n){if(!n)throw new w(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Vw(t,e,n,r){if(e===!0&&r===!0)throw new w(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function NS(t){if(!T.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PS(t){if(T.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":R()}function ue(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Cf(t);throw new w(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ux(t,e){if(e<=0)throw new w(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var hf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ax((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$i=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pv;switch(r.type){case"firstParty":return new vv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=RS.get(n);r&&(E("ComponentProvider","Removing Datastore"),RS.delete(n),r.terminate())}(this),Promise.resolve()}};function cx(t,e,n,r={}){var i;let s=(t=ue(t,$i))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Qt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=He.MOCK_USER;else{a=hE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new w(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new He(c)}t._authCredentials=new gv(new Ch(a,u))}}var it=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},me=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Pn=class t extends it{constructor(e,n,r){super(e,n,Fo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new me(this.firestore,null,new T(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Lw(t,e,...n){if(t=De(t),Fw("collection","path",e),t instanceof $i){let r=ce.fromString(e,...n);return PS(r),new Pn(t,null,r)}{if(!(t instanceof me||t instanceof Pn))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ce.fromString(e,...n));return PS(r),new Pn(t.firestore,null,r)}}function lx(t,e){if(t=ue(t,$i),Fw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new it(t,null,function(r){return new ln(ce.emptyPath(),r)}(e))}function hc(t,e,...n){if(t=De(t),arguments.length===1&&(e=Th.newId()),Fw("doc","path",e),t instanceof $i){let r=ce.fromString(e,...n);return NS(r),new me(t,null,new T(r))}{if(!(t instanceof me||t instanceof Pn))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ce.fromString(e,...n));return NS(r),new me(t.firestore,t instanceof Pn?t.converter:null,new T(r))}}function jw(t,e){return t=De(t),e=De(e),(t instanceof me||t instanceof Pn)&&(e instanceof me||e instanceof Pn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Bw(t,e){return t=De(t),e=De(e),t instanceof it&&e instanceof it&&t.firestore===e.firestore&&uc(t._query,e._query)&&t.converter===e.converter}var Q_=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Ju(this,"async_queue_retry"),this.iu=()=>{let n=Ih();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};let e=Ih();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let n=Ih();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let n=new qe;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return y(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Zr(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ke("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);let i=O_.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&R()}verifyOperationInProgress(){}uu(){return y(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let n=this.Xa.indexOf(e);this.Xa.splice(n,1)}};function Y_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Z_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new qe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var dx=-1,Ie=class extends $i{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Q_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||hx(this),this._firestoreClient.terminate()}};function We(t){return t._firestoreClient||hx(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function hx(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,c,l){return new bv(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ax(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new W_(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function fx(t,e){Ix(t=ue(t,Ie));let n=We(t);if(n._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Qt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new rc;return gx(n,i,new df(i,r.cacheSizeBytes,e?.forceOwnership))}function px(t){Ix(t=ue(t,Ie));let e=We(t);if(e._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Qt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new rc;return gx(e,r,new H_(r,n.cacheSizeBytes))}function gx(t,e,n){let r=new qe;return t.asyncQueue.enqueue(()=>y(this,null,function*(){try{yield Dh(t,n),yield K_(t,e),r.resolve()}catch(i){let s=i;if(!nx(s))throw s;Qt("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function mx(t){if(t._initialized&&!t._terminated)throw new w(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new qe;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{yield function(r){return y(this,null,function*(){if(!Br.D())return Promise.resolve();let i=r+"main";yield Br.delete(i)})}(ww(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function yx(t){return function(n){let r=new qe;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return WU(yield kw(n),r)})),r.promise}(We(t=ue(t,Ie)))}function vx(t){return o$(We(t=ue(t,Ie)))}function _x(t){return a$(We(t=ue(t,Ie)))}function wx(t,e){let n=We(t=ue(t,Ie)),r=new Z_;return d$(n,t._databaseId,e,r),r}function Ex(t,e){return h$(We(t=ue(t,Ie)),e).then(n=>n?new it(t,null,n.query):null)}function Ix(t){if(t._initialized||t._terminated)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Vn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Je.fromBase64String(e))}catch(n){throw new w(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var hn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ir=class{constructor(e){this._methodName=e}};var Hi=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return W(this._lat,e._lat)||W(this._long,e._long)}};var f$=/^__.*__$/,X_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new dn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wr(e,this.data,n,this.fieldTransforms)}},ff=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new dn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Dx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw R()}}var pf=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return gf(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(Dx(this.Iu)&&f$.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},J_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lc(e)}pu(e,n,r,i=!1){return new pf({Iu:e,methodName:n,gu:r,path:Fe.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Wi(t){let e=t._freezeSettings(),n=lc(t._databaseId);return new J_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tf(t,e,n,r,i,s={}){let o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);Hw("Data must be an object, but it was:",o,r);let a=bx(r,o),u,c;if(s.merge)u=new Lt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let h=iw(e,d,n);if(!o.contains(h))throw new w(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Sx(l,h)||l.push(h)}u=new Lt(l),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new X_(new ut(a),u,c)}var ic=class t extends ir{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Cx(t,e,n){return new pf({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var ew=class t extends ir{_toFieldTransform(e){return new ji(e.path,new zr)}isEqual(e){return e instanceof t}},tw=class extends ir{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=Cx(this,e,!0),r=this.yu.map(s=>Ki(s,n)),i=new nr(r);return new ji(e.path,i)}isEqual(e){return this===e}},nw=class extends ir{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=Cx(this,e,!0),r=this.yu.map(s=>Ki(s,n)),i=new rr(r);return new ji(e.path,i)}isEqual(e){return this===e}},rw=class extends ir{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){let n=new Gr(e.serializer,dM(e.serializer,this.wu));return new ji(e.path,n)}isEqual(e){return this===e}};function Uw(t,e,n,r){let i=t.pu(1,e,n);Hw("Data must be an object, but it was:",i,r);let s=[],o=ut.empty();Gi(r,(u,c)=>{let l=qw(e,u,n);c=De(c);let d=i.Ru(l);if(c instanceof ic)s.push(l);else{let h=Ki(c,d);h!=null&&(s.push(l),o.set(l,h))}});let a=new Lt(s);return new ff(o,a,i.fieldTransforms)}function $w(t,e,n,r,i,s){let o=t.pu(1,e,n),a=[iw(e,r,n)],u=[i];if(s.length%2!=0)throw new w(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(iw(e,s[h])),u.push(s[h+1]);let c=[],l=ut.empty();for(let h=a.length-1;h>=0;--h)if(!Sx(c,a[h])){let f=a[h],m=u[h];m=De(m);let v=o.Ru(f);if(m instanceof ic)c.push(f);else{let _=Ki(m,v);_!=null&&(c.push(f),l.set(f,_))}}let d=new Lt(c);return new ff(l,d,o.fieldTransforms)}function Tx(t,e,n,r=!1){return Ki(n,t.pu(r?4:3,e))}function Ki(t,e){if(Ax(t=De(t)))return Hw("Unsupported field value:",e,t),bx(t,e);if(t instanceof ir)return function(r,i){if(!Dx(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Ki(a,i.Vu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Te.fromDate(r);return{timestampValue:To(i.serializer,s)}}if(r instanceof Te){let s=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:To(i.serializer,s)}}if(r instanceof Hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vn)return{bytesValue:EM(i.serializer,r._byteString)};if(r instanceof me){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${Cf(r)}`)}(t,e)}function bx(t,e){let n={};return WS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(t,(r,i)=>{let s=Ki(i,e.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Ax(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof Hi||t instanceof Vn||t instanceof me||t instanceof ir)}function Hw(t,e,n){if(!Ax(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Cf(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function iw(t,e,n){if((e=De(e))instanceof hn)return e._internalPath;if(typeof e=="string")return qw(t,e);throw gf("Field path arguments must be of type string or ",t,!1,void 0,n)}var p$=new RegExp("[~\\*/\\[\\]]");function qw(t,e,n){if(e.search(p$)>=0)throw gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hn(...e.split("."))._internalPath}catch{throw gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gf(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new w(g.INVALID_ARGUMENT,a+t+u)}function Sx(t,e){return t.some(n=>n.isEqual(e))}var qi=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new sw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(bf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},sw=class extends qi{data(){return super.data()}};function bf(t,e){return typeof e=="string"?qw(t,e):e instanceof hn?e._internalPath:e._delegate._internalPath}function Mx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sc=class{},zi=class extends sc{};function ar(t,e,...n){let r=[];e instanceof sc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof ow).length,a=s.filter(u=>u instanceof mf).length;if(o>1||o>0&&a>0)throw new w(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var mf=class t extends zi{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return jx(e._query,n),new it(e.firestore,e.converter,jv(e._query,n))}_parse(e){let n=Wi(e.firestore);return function(s,o,a,u,c,l,d){let h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new w(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){kS(d,l);let f=[];for(let m of d)f.push(OS(u,s,m));h={arrayValue:{values:f}}}else h=OS(u,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||kS(d,l),h=Tx(a,o,d,l==="in"||l==="not-in");return ie.create(c,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function xx(t,e,n){let r=e,i=bf("where",t);return mf._create(i,r,n)}var ow=class t extends sc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fe.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)jx(o,u),o=jv(o,u)}(e._query,n),new it(e.firestore,e.converter,jv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var aw=class t extends zi{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vi(s,o)}(e._query,this._field,this._direction);return new it(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new ln(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function Rx(t,e="asc"){let n=e,r=bf("orderBy",t);return aw._create(r,n)}var yf=class t extends zi{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new it(e.firestore,e.converter,kh(e._query,this._limit,this._limitType))}};function Nx(t){return ux("limit",t),yf._create("limit",t,"F")}function Px(t){return ux("limitToLast",t),yf._create("limitToLast",t,"L")}var vf=class t extends zi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=Lx(e,this.type,this._docOrFields,this._inclusive);return new it(e.firestore,e.converter,function(i,s){return new ln(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}};function Ox(...t){return vf._create("startAt",t,!0)}function kx(...t){return vf._create("startAfter",t,!1)}var _f=class t extends zi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=Lx(e,this.type,this._docOrFields,this._inclusive);return new it(e.firestore,e.converter,function(i,s){return new ln(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}};function Fx(...t){return _f._create("endBefore",t,!1)}function Vx(...t){return _f._create("endAt",t,!0)}function Lx(t,e,n,r){if(n[0]=De(n[0]),n[0]instanceof qi)return function(s,o,a,u,c){if(!u)throw new w(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of yo(s))if(d.field.isKeyField())l.push(Fi(o,u.key));else{let h=u.data.field(d.field);if(Ef(h))throw new w(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new w(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new kn(l,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Wi(t.firestore);return function(o,a,u,c,l,d){let h=o.explicitOrderBy;if(l.length>h.length)throw new w(g.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let m=0;m<l.length;m++){let v=l[m];if(h[m].field.isKeyField()){if(typeof v!="string")throw new w(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!gw(o)&&v.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);let _=o.path.child(ce.fromString(v));if(!T.isDocumentKey(_))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);let D=new T(_);f.push(Fi(a,D))}else{let _=Tx(u,c,v);f.push(_)}}return new kn(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function OS(t,e,n){if(typeof(n=De(n))=="string"){if(n==="")throw new w(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gw(e)&&n.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ce.fromString(n));if(!T.isDocumentKey(r))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fi(t,new T(r))}if(n instanceof me)return Fi(t,n._key);throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(n)}.`)}function kS(t,e){if(!Array.isArray(t)||t.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jx(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Oo=class{convertValue(e,n="none"){switch(ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw R()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Gi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Hi(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=fw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ju(e));default:return null}}convertTimestamp(e){let n=Ur(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ce.fromString(e);k(RM(r));let i=new Hr(r.get(1),r.get(3)),s=new T(r.popFirst(5));return i.isEqual(n)||ke(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Af(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var uw=class extends Oo{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new me(this.firestore,null,n)}};var tr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Zt=class extends qi{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Lr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(bf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Lr=class extends Zt{data(e={}){return super.data(e)}},fn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new tr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Lr(this._firestore,this._userDataWriter,r.key,r,new tr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Lr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Lr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:g$(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function g$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return R()}}function zw(t,e){return t instanceof Zt&&e instanceof Zt?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof fn&&e instanceof fn&&t._firestore===e._firestore&&Bw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Bx(t){t=ue(t,me);let e=ue(t.firestore,Ie);return sx(We(e),t._key).then(n=>Qw(e,t,n))}var sr=class extends Oo{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new me(this.firestore,null,n)}};function Ux(t){t=ue(t,me);let e=ue(t.firestore,Ie),n=We(e),r=new sr(e);return u$(n,t._key).then(i=>new Zt(e,r,t._key,i,new tr(i!==null&&i.hasLocalMutations,!0),t.converter))}function $x(t){t=ue(t,me);let e=ue(t.firestore,Ie);return sx(We(e),t._key,{source:"server"}).then(n=>Qw(e,t,n))}function Hx(t){t=ue(t,it);let e=ue(t.firestore,Ie),n=We(e),r=new sr(e);return Mx(t._query),ox(n,t._query).then(i=>new fn(e,r,t,i))}function qx(t){t=ue(t,it);let e=ue(t.firestore,Ie),n=We(e),r=new sr(e);return c$(n,t._query).then(i=>new fn(e,r,t,i))}function zx(t){t=ue(t,it);let e=ue(t.firestore,Ie),n=We(e),r=new sr(e);return ox(n,t._query,{source:"server"}).then(i=>new fn(e,r,t,i))}function Gw(t,e,n){t=ue(t,me);let r=ue(t.firestore,Ie),i=Af(t.converter,e,n);return Uo(r,[Tf(Wi(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Me.none())])}function Ww(t,e,n,...r){t=ue(t,me);let i=ue(t.firestore,Ie),s=Wi(i),o;return o=typeof(e=De(e))=="string"||e instanceof hn?$w(s,"updateDoc",t._key,e,n,r):Uw(s,"updateDoc",t._key,e),Uo(i,[o.toMutation(t._key,Me.exists(!0))])}function Gx(t){return Uo(ue(t.firestore,Ie),[new Kr(t._key,Me.none())])}function Wx(t,e){let n=ue(t.firestore,Ie),r=hc(t),i=Af(t.converter,e);return Uo(n,[Tf(Wi(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Me.exists(!1))]).then(()=>r)}function Kw(t,...e){var n,r,i;t=De(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Y_(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(Y_(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,c,l;if(t instanceof me)c=ue(t.firestore,Ie),l=Fo(t._key.path),u={next:d=>{e[o]&&e[o](Qw(c,t,d))},error:e[o+1],complete:e[o+2]};else{let d=ue(t,it);c=ue(d.firestore,Ie),l=d._query;let h=new sr(c);u={next:f=>{e[o]&&e[o](new fn(c,h,d,f))},error:e[o+1],complete:e[o+2]},Mx(t._query)}return function(h,f,m,v){let _=new No(v),D=new tc(f,_,m);return h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Cw(yield Po(h),D)})),()=>{_.Na(),h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Tw(yield Po(h),D)}))}}(We(c),l,a,u)}function Kx(t,e){return l$(We(t=ue(t,Ie)),Y_(e)?e:{next:e})}function Uo(t,e){return function(r,i){let s=new qe;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return HU(yield kw(r),i,s)})),s.promise}(We(t),e)}function Qw(t,e,n){let r=n.docs.get(e._key),i=new sr(t);return new Zt(t,i,e._key,r,new tr(n.hasPendingWrites,n.fromCache),e.converter)}var m$={maxAttempts:5};var wf=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Wi(e)}set(e,n,r){this._verifyNotCommitted();let i=Fr(e,this._firestore),s=Af(i.converter,n,r),o=Tf(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Me.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=Fr(e,this._firestore),o;return o=typeof(n=De(n))=="string"||n instanceof hn?$w(this._dataReader,"WriteBatch.update",s._key,n,r,i):Uw(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Me.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Fr(e,this._firestore);return this._mutations=this._mutations.concat(new Kr(n._key,Me.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Fr(t,e){if((t=De(t)).firestore!==e)throw new w(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var cw=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Wi(n)}get(n){let r=Fr(n,this._firestore),i=new uw(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return R();let o=s[0];if(o.isFoundDocument())return new qi(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new qi(this._firestore,i,r._key,null,r.converter);throw R()})}set(n,r,i){let s=Fr(n,this._firestore),o=Af(s.converter,r,i),a=Tf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){let o=Fr(n,this._firestore),a;return a=typeof(r=De(r))=="string"||r instanceof hn?$w(this._dataReader,"Transaction.update",o._key,r,i,s):Uw(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){let r=Fr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Fr(e,this._firestore),r=new sr(this._firestore);return super.get(e).then(i=>new Zt(this._firestore,r,n._key,i._document,new tr(!1,!1),n.converter))}};function Qx(t,e,n){t=ue(t,Ie);let r=Object.assign(Object.assign({},m$),n);return function(s){if(s.maxAttempts<1)throw new w(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let u=new qe;return s.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){let c=yield s$(s);new G_(s.asyncQueue,c,a,o,u).run()})),u.promise}(We(t),i=>e(new cw(t,i)),r)}function Yx(){return new ic("deleteField")}function Zx(){return new ew("serverTimestamp")}function Xx(...t){return new tw("arrayUnion",t)}function Jx(...t){return new nw("arrayRemove",t)}function eR(t){return new rw("increment",t)}(function(e,n=!0){(function(i){ko=i})(mE),zo(new Jr("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ie(new mv(r.getProvider("auth-internal")),new wv(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new w(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hr(c.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ur(VA,"4.4.0",e),ur(VA,"4.4.0","esm2017")})();var y$="@firebase/firestore-compat",v$="0.3.23";function tE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new w("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function tR(){if(typeof Uint8Array>"u")throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function nR(){if(!KS())throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Sf=class t{constructor(e){this._delegate=e}static fromBase64String(e){return nR(),new t(Vn.fromBase64String(e))}static fromUint8Array(e){return tR(),new t(Vn.fromUint8Array(e))}toBase64(){return nR(),this._delegate.toBase64()}toUint8Array(){return tR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Yw(t){return _$(t,["next","error","complete"])}function _$(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var Zw=class{enableIndexedDbPersistence(e,n){return fx(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return px(e._delegate)}clearIndexedDbPersistence(e){return mx(e._delegate)}},Mf=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Qt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){cx(this._delegate,e,n,r)}enableNetwork(){return vx(this._delegate)}disableNetwork(){return _x(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Vw("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return yx(this._delegate)}onSnapshotsInSync(e){return Kx(this._delegate,e)}get app(){if(!this._appCompat)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qo(this,Lw(this._delegate,e))}catch(n){throw vt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ln(this,hc(this._delegate,e))}catch(n){throw vt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xi(this,lx(this._delegate,e))}catch(n){throw vt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Qx(this._delegate,n=>e(new xf(this,n)))}batch(){return We(this._delegate),new Rf(new wf(this._delegate,e=>Uo(this._delegate,e)))}loadBundle(e){return wx(this._delegate,e)}namedQuery(e){return Ex(this._delegate,e).then(n=>n?new Xi(this,n):null)}},$o=class extends Oo{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sf(new Vn(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Ln.forKey(n,this.firestore,null)}};function w$(t){FS(t)}var xf=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new $o(e)}get(e){let n=Qi(e);return this._delegate.get(n).then(r=>new Yi(this._firestore,new Zt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Qi(e);return r?(tE("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=Qi(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=Qi(e);return this._delegate.delete(n),this}},Rf=class{constructor(e){this._delegate=e}set(e,n,r){let i=Qi(e);return r?(tE("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=Qi(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=Qi(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Ho=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Lr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zi(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new t(e,new $o(e),n),i.set(n,s)),s}};Ho.INSTANCES=new WeakMap;var Ln=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new $o(e)}static forPath(e,n,r){if(e.length%2!==0)throw new w("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new me(n._delegate,r,new T(e)))}static forKey(e,n,r){return new t(n,new me(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new qo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qo(this.firestore,Lw(this._delegate,e))}catch(n){throw vt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=De(e),e instanceof me?jw(this._delegate,e):!1}set(e,n){n=tE("DocumentReference.set",n);try{return n?Gw(this._delegate,e,n):Gw(this._delegate,e)}catch(r){throw vt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Ww(this._delegate,e):Ww(this._delegate,e,n,...r)}catch(i){throw vt(i,"updateDoc()","DocumentReference.update()")}}delete(){return Gx(this._delegate)}onSnapshot(...e){let n=rR(e),r=iR(e,i=>new Yi(this.firestore,new Zt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Kw(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=Ux(this._delegate):e?.source==="server"?n=$x(this._delegate):n=Bx(this._delegate),n.then(r=>new Yi(this.firestore,new Zt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ho.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function vt(t,e,n){return t.message=t.message.replace(e,n),t}function rR(t){for(let e of t)if(typeof e=="object"&&!Yw(e))return e;return{}}function iR(t,e){var n,r;let i;return Yw(t[0])?i=t[0]:Yw(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Yi=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ln(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return zw(this._delegate,e._delegate)}},Zi=class extends Yi{data(e){let n=this._delegate.data(e);return this._delegate._converter||VS(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Xi=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new $o(e)}where(e,n,r){try{return new t(this.firestore,ar(this._delegate,xx(e,n,r)))}catch(i){throw vt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,ar(this._delegate,Rx(e,n)))}catch(r){throw vt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,ar(this._delegate,Nx(e)))}catch(n){throw vt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,ar(this._delegate,Px(e)))}catch(n){throw vt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,ar(this._delegate,Ox(...e)))}catch(n){throw vt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,ar(this._delegate,kx(...e)))}catch(n){throw vt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,ar(this._delegate,Fx(...e)))}catch(n){throw vt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,ar(this._delegate,Vx(...e)))}catch(n){throw vt(n,"endAt()","Query.endAt()")}}isEqual(e){return Bw(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=qx(this._delegate):e?.source==="server"?n=zx(this._delegate):n=Hx(this._delegate),n.then(r=>new fc(this.firestore,new fn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=rR(e),r=iR(e,i=>new fc(this.firestore,new fn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Kw(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ho.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Xw=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Zi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},fc=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Xi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Xw(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Zi(this._firestore,r))})}isEqual(e){return zw(this._delegate,e._delegate)}},qo=class t extends Xi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Ln(this.firestore,e):null}doc(e){try{return e===void 0?new Ln(this.firestore,hc(this._delegate)):new Ln(this.firestore,hc(this._delegate,e))}catch(n){throw vt(n,"doc()","CollectionReference.doc()")}}add(e){return Wx(this._delegate,e).then(n=>new Ln(this.firestore,n))}isEqual(e){return jw(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ho.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Qi(t){return ue(t,me)}var Jw=class t{constructor(...e){this._delegate=new hn(...e)}static documentId(){return new t(Fe.keyField().canonicalString())}isEqual(e){return e=De(e),e instanceof hn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var eE=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=Zx();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=Yx();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=Xx(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=Jx(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=eR(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var E$={Firestore:Mf,GeoPoint:Hi,Timestamp:Te,Blob:Sf,Transaction:xf,WriteBatch:Rf,DocumentReference:Ln,DocumentSnapshot:Yi,Query:Xi,QueryDocumentSnapshot:Zi,QuerySnapshot:fc,CollectionReference:qo,FieldPath:Jw,FieldValue:eE,setLogLevel:w$,CACHE_SIZE_UNLIMITED:dx};function I$(t,e){t.INTERNAL.registerComponent(new Jr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},E$)))}function D$(t){I$(t,(e,n)=>new Mf(e,n,new Zw)),t.registerVersion(y$,v$)}D$(_t);function C$(t,e=Qo){return new J(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function sR(t,e){return C$(t,e)}function T$(t,e){return sR(t,e).pipe(ii(void 0),Zo(),B(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function iE(t,e){return sR(t,e).pipe(B(n=>({payload:n,type:"query"})))}var Nf=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:s}=lR(r,n);return new Of(i,s,this.afs)}snapshotChanges(){return T$(this.ref,this.afs.schedulers.outsideAngular).pipe(Dt)}valueChanges(e={}){return this.snapshotChanges().pipe(B(({payload:n})=>e.idField?de(M({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return oe(this.ref.get(e)).pipe(Dt)}};function Pf(t,e){return iE(t,e).pipe(ii(void 0),Zo(),B(n=>{let[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let c=s.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function oR(t,e,n){return Pf(t,n).pipe(ri((r,i)=>b$(r,i.map(s=>s.payload),e),[]),rp(),B(r=>r.map(i=>({type:i.type,payload:i}))))}function b$(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=A$(t,r))}),t}function nE(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function A$(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return nE(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return nE(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nE(t,e.oldIndex,1);break}return t}function aR(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Of=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Pf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(B(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(ii(void 0),Zo(),Ke(([r,i])=>i.length>0||!r),B(([,r])=>r),Dt)}auditTrail(e){return this.stateChanges(e).pipe(ri((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=aR(e);return oR(this.query,n,this.afs.schedulers.outsideAngular).pipe(Dt)}valueChanges(e={}){return iE(this.query,this.afs.schedulers.outsideAngular).pipe(B(n=>n.payload.docs.map(r=>e.idField?de(M({},r.data()),{[e.idField]:r.id}):r.data())),Dt)}get(e){return oe(this.query.get(e)).pipe(Dt)}add(e){return this.ref.add(e)}doc(e){return new Nf(this.ref.doc(e),this.afs)}},rE=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Pf(this.query,this.afs.schedulers.outsideAngular).pipe(Dt):Pf(this.query,this.afs.schedulers.outsideAngular).pipe(B(n=>n.filter(r=>e.indexOf(r.type)>-1)),Ke(n=>n.length>0),Dt)}auditTrail(e){return this.stateChanges(e).pipe(ri((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=aR(e);return oR(this.query,n,this.afs.schedulers.outsideAngular).pipe(Dt)}valueChanges(e={}){return iE(this.query,this.afs.schedulers.outsideAngular).pipe(B(r=>r.payload.docs.map(i=>e.idField?M({[e.idField]:i.id},i.data()):i.data())),Dt)}get(e){return oe(this.query.get(e)).pipe(Dt)}},uR=new x("angularfire2.enableFirestorePersistence"),cR=new x("angularfire2.firestore.persistenceSettings"),S$=new x("angularfire2.firestore.settings"),M$=new x("angularfire2.firestore.use-emulator");function lR(t,e=n=>n){return{query:e(t),ref:t}}var sE=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,c,l,d,h,f,m,v,_,D,N){this.schedulers=u;let S=Ya(n,a,r),j=l;d&&my(S,a,h,m,v,_,f,D),[this.firestore,this.persistenceEnabled$]=Ad(`${S.name}.firestore`,"AngularFirestore",S.name,()=>{let $=a.runOutsideAngular(()=>S.firestore());if(s&&$.settings(s),j&&$.useEmulator(...j),i&&!vi(o)){let K=()=>{try{return oe($.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(we){return typeof console<"u"&&console.warn(we),F(!1)}};return[$,a.runOutsideAngular(K)]}else return[$,F(!1)]},[s,j,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:s,query:o}=lR(i,r),a=this.schedulers.ngZone.run(()=>s);return new Of(a,o,this)}collectionGroup(n,r){let i=r||(o=>o),s=this.firestore.collectionGroup(n);return new rE(i(s),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Nf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(I(Qs),I(Ys,8),I(uR,8),I(S$,8),I(ht),I(re),I(Cd),I(cR,8),I(M$,8),I(Sd,8),I(ly,8),I(dy,8),I(hy,8),I(fy,8),I(py,8),I(gy,8),I(Ei,8))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),dR=(()=>{class t{constructor(){_t.registerVersion("angularfire",Ks.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:uR,useValue:!0},{provide:cR,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Oe({type:t});static \u0275inj=Pe({providers:[sE]})}return t})();var hR=(()=>{let e=class e{constructor(r){this.afs=r}addStudent(r){return r.id=this.afs.createId(),this.afs.collection("/Students").add(r)}getAllStudents(){return this.afs.collection("/Students").snapshotChanges()}deleteStudent(r){return this.afs.doc("/Students/"+r.id).delete()}updateStudent(r){this.deleteStudent(r),this.addStudent(r)}};e.\u0275fac=function(i){return new(i||e)(I(sE))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function N$(t,e){if(t&1){let n=zC();V(0,"tr")(1,"td"),G(2),U(),V(3,"td"),G(4),U(),V(5,"td"),G(6),U(),V(7,"td"),G(8),U(),V(9,"td")(10,"button",24),Ee("click",function(){let s=uD(n).$implicit,o=WC();return cD(o.deleteStudent(s))}),G(11,"Delete"),U()()()}if(t&2){let n=e.$implicit;Qe(2),ks(n.first_name),Qe(2),ks(n.last_name),Qe(2),ks(n.email),Qe(2),ks(n.mobile)}}var fR=(()=>{let e=class e{constructor(r,i,s){this.auth=r,this.data=i,this.router=s,this.stuedntList=[],this.studentObj={id:"",first_name:"",last_name:"",email:"",mobile:""},this.id="",this.first_name="",this.last_name="",this.email="",this.mobile=""}register(){this.auth.logout()}ngOnInit(){this.getAllStudents()}getAllStudents(){this.data.getAllStudents().subscribe(r=>{this.stuedntList=r.map(i=>{let s=i.payload.doc.data();return s.id=i.payload.doc.id,s})},r=>{alert("Error while feetching the data")})}resetForm(){this.id="",this.first_name="",this.last_name="",this.email="",this.mobile=""}addStudent(){if(this.first_name==""||this.last_name==""||this.email==""||this.mobile==""){alert("Fill all input fields");return}this.studentObj.id="",this.studentObj.email=this.email,this.studentObj.first_name=this.first_name,this.studentObj.last_name=this.last_name,this.studentObj.mobile=this.mobile,this.data.addStudent(this.studentObj),this.resetForm()}updateStudent(){}deleteStudent(r){window.confirm("Are you sure you want to delete "+r.first_name+" "+r.last_name+" ?")&&this.data.deleteStudent(r)}};e.\u0275fac=function(i){return new(i||e)(se(Ar),se(hR),se(on))},e.\u0275cmp=It({type:e,selectors:[["app-dashboard"]],decls:48,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-4","mt-5"],[1,"card","border-0","shadow","p-3"],[1,"form-floating","mb-3","text-center"],[1,"text-center","text-warning"],[1,"form-floating","mb-3"],["type","text","id","firstname","name","firstname",1,"form-control",3,"ngModel","ngModelChange"],["for","firstname"],["type","text","id","lastname","name","lastname",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],["type","email","id","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","text","id","mobile","name","mobile",1,"form-control",3,"ngModel","ngModelChange"],["for","mobile"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"col-md-8","mt-2"],[1,"text-danger"],[1,"card","p-3","shadow"],[1,"card-body"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-warning","text-center",3,"click"],[1,"btn","btn-outline-danger",3,"click"]],template:function(i,s){i&1&&(V(0,"div",0),gi(1,"div",1),V(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h5",5),G(7,"Add Student"),U()(),V(8,"div",6)(9,"input",7),Ee("ngModelChange",function(a){return s.first_name=a}),U(),V(10,"label",8),G(11,"First name"),U()(),V(12,"div",6)(13,"input",9),Ee("ngModelChange",function(a){return s.last_name=a}),U(),V(14,"label",10),G(15,"Last name"),U()(),V(16,"div",6)(17,"input",11),Ee("ngModelChange",function(a){return s.email=a}),U(),V(18,"label",12),G(19,"Email address"),U()(),V(20,"div",6)(21,"input",13),Ee("ngModelChange",function(a){return s.mobile=a}),U(),V(22,"label",14),G(23,"Mobile"),U()(),V(24,"button",15),Ee("click",function(){return s.addStudent()}),G(25,"Add Student"),U()()(),V(26,"div",16)(27,"h5",17),G(28,"Student List"),U(),V(29,"div",18)(30,"div",19)(31,"table",20)(32,"thead")(33,"tr")(34,"th",21),G(35,"First Name"),U(),V(36,"th",21),G(37,"Last Name"),U(),V(38,"th",21),G(39,"Email"),U(),V(40,"th",21),G(41,"Mobile"),U(),V(42,"th",21),G(43,"Action"),U()()(),V(44,"tbody"),Gg(45,N$,12,4,"tr",22),U()(),V(46,"button",23),Ee("click",function(){return s.register()}),G(47,"Logout"),U()()()()()()),i&2&&(Qe(9),ft("ngModel",s.first_name),Qe(4),ft("ngModel",s.last_name),Qe(4),ft("ngModel",s.email),Qe(4),ft("ngModel",s.mobile),Qe(24),ft("ngForOf",s.stuedntList))},dependencies:[y0,Tn,Sr,Zn]});let t=e;return t})();var pR=(()=>{let e=class e{constructor(r){this.auth=r,this.email="",this.password=""}register(){if(this.email==""){alert("Please enter the email");return}if(this.password==""){alert("Please enter the password ");return}this.auth.register(this.email,this.password),this.email="",this.password=""}};e.\u0275fac=function(i){return new(i||e)(se(Ar))},e.\u0275cmp=It({type:e,selectors:[["app-register"]],decls:26,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col","md-6"],["href","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(i,s){i&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),G(9,"Register"),U()(),V(10,"div",6)(11,"label",8),G(12,"Email address"),U(),V(13,"input",9),Ee("ngModelChange",function(a){return s.email=a}),U()(),V(14,"div",6)(15,"label",10),G(16,"Password"),U(),V(17,"input",11),Ee("ngModelChange",function(a){return s.password=a}),U()(),V(18,"button",12),Ee("click",function(){return s.register()}),G(19,"Register"),U(),V(20,"div",13)(21,"div",14)(22,"a",15),G(23,"Have an account ? "),V(24,"span",16),G(25,"Login"),U()()()()()()()()()()()),i&2&&(Qe(13),ft("ngModel",s.email),Qe(4),ft("ngModel",s.password))},dependencies:[xr,Tn,Sr,Mr,Zn,Yn]});let t=e;return t})();var gR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=It({type:e,selectors:[["app-verify-email"]],decls:13,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card"],[1,"card-body"],[1,"mb-3"],[1,"text-danger","text-muted"],[1,"text-muted"]],template:function(i,s){i&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),G(9,"Welcome"),U()(),V(10,"div",6)(11,"p",8),G(12,"Link has sent on your registered email. Please verify it."),U()()()()()()()()())},dependencies:[xr,Mr,Yn]});let t=e;return t})();var mR=(()=>{let e=class e{constructor(r){this.auth=r,this.email=""}forgotpassword(){this.auth.forgotpassword(this.email),this.email=""}};e.\u0275fac=function(i){return new(i||e)(se(Ar))},e.\u0275cmp=It({type:e,selectors:[["app-forgot-password"]],decls:22,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col","md-6"],["href","/register",2,"text-decoration","none"],[1,"text-danger"]],template:function(i,s){i&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),G(9,"Forgot Password"),U()(),V(10,"div",6)(11,"label",8),G(12,"Email "),U(),V(13,"input",9),Ee("ngModelChange",function(a){return s.email=a}),U()(),V(14,"button",10),Ee("click",function(){return s.forgotpassword()}),G(15,"Send link"),U(),V(16,"div",11)(17,"div",12)(18,"a",13),G(19,"Back to "),V(20,"span",14),G(21,"Login"),U()()()()()()()()()()()),i&2&&(Qe(13),ft("ngModel",s.email))},dependencies:[xr,Tn,Sr,Mr,Zn,Yn]});let t=e;return t})();var P$=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:gb},{path:"dashboard",component:fR},{path:"register",component:pR},{path:"verify-email",component:gR},{path:"forgot-password",component:mR}],yR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({imports:[Ka.forRoot(P$),Ka]});let t=e;return t})();var vR=(()=>{let e=class e{constructor(){this.title="Angular_app2"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=It({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,s){i&1&&gi(0,"router-outlet")},dependencies:[Km]});let t=e;return t})();var _R={production:!1,firebase:{apiKey:"AIzaSyBsp-YvA8WdsLCdViG3zykIyjCVSxnfqww",authDomain:"student-management-syste-fe884.firebaseapp.com",projectId:"student-management-syste-fe884",storageBucket:"student-management-syste-fe884.appspot.com",messagingSenderId:"523036578785",appId:"1:523036578785:web:187f9732e31ecce9c578a0"}};var wR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e,bootstrap:[vR]}),e.\u0275inj=Pe({providers:[L0()],imports:[V0,yR,HT.initializeApp(_R.firebase),Ka,fb,pb,dR]});let t=e;return t})();F0().bootstrapModule(wR).catch(t=>console.error(t));
